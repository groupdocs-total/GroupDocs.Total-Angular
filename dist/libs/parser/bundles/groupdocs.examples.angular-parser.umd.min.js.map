{"version":3,"sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@groupdocs.examples.angular/parser/lib/app-models.ts","ng://@groupdocs.examples.angular/parser/lib/parser.service.ts","ng://@groupdocs.examples.angular/parser/lib/template.service.ts","ng://@groupdocs.examples.angular/parser/lib/source-file.service.ts","ng://@groupdocs.examples.angular/parser/lib/placeholder.service.ts","ng://@groupdocs.examples.angular/parser/lib/document-page.service.ts","ng://@groupdocs.examples.angular/parser/lib/parser-app.component.ts","ng://@groupdocs.examples.angular/parser/lib/field.service.ts","ng://@groupdocs.examples.angular/parser/lib/field/field.component.ts","ng://@groupdocs.examples.angular/parser/lib/rename-modal/rename-modal.component.ts","ng://@groupdocs.examples.angular/parser/lib/surface/surface.component.ts","ng://@groupdocs.examples.angular/parser/lib/confirmation-modal/confirmation-modal.component.ts","ng://@groupdocs.examples.angular/parser/lib/utils.service.ts","ng://@groupdocs.examples.angular/parser/lib/table-viewer/table-viewer.component.ts","ng://@groupdocs.examples.angular/parser/lib/side-panel/side-panel.component.ts","ng://@groupdocs.examples.angular/parser/lib/placeholder/placeholder.component.ts","ng://@groupdocs.examples.angular/parser/lib/parser-config.ts","ng://@groupdocs.examples.angular/parser/lib/parser-config.service.ts","ng://@groupdocs.examples.angular/parser/lib/parser.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","TableValue","obj","this","rows","i","length","row","j","push","OperationState","_state","enabled","defineProperty","prototype","_prompt","prompt","_error","_result","error","result","execute","SourceFile","guid","password","_super","DocumentDescription","__","constructor","create","tslib_1.__extends","Point","x","y","Size","width","height","Template","_id","_name","_fields","_addFieldSubject","Subject","_removeFieldSubject","_modifiedSubject","_fieldChangedSubscriptions","Map","addedField","asObservable","removedField","modified","NotSaved","id","name","notifyModified","addField","field","_this","set","changed","subscribe","next","removeField","index","indexOf","get","unsubscribe","delete","splice","removeFieldByName","fieldName","getFieldByName","toLocaleLowerCase","createField","baseName","TemplateField","getNextFieldName","size","pageNumber","position","name_1","toString","TemplateFieldTypes","FIXED","TABLE","_template","_fieldType","_changedSubject","_columns","addColumn","columnName","columnValue","column","TemplateFieldTableSeparator","getNextColumnName","removeColumn","getColumnByName","fieldType","_pageNumber","_position","_size","toJSON","columns","name_2","_value","value","ParserService","_http","_config","loadFiles","path","post","getParserApiEndpoint","Api","LOAD_FILE_TREE","httpOptionsJson","upload","file","url","rewrite","formData","FormData","append","String","UPLOAD_DOCUMENTS","loadDocumentDescription","sourceFile","subject","observer","response","complete","err","logToServer","console","LOAD_DOCUMENT_DESCRIPTION","pipe","timeout","parseByTemplate","template","PARSE","fields","getErrorMessage","status","title","errorMessage","JSON","stringify","localStorage","getItem","log","Injectable","args","providedIn","HttpClient","ConfigService","TemplateService","_templatePattern","_currentTemplateChangedSubject","_templateAddedSubject","_templateRemovedSubject","currentTemplateChanged","templateAddedSubject","templateRemovedSubject","_templates","loadTemplatesFromLocalStorage","createTemplate","_currentTemplate","selectTemplate","templateId","getTemplateById","setCurrentTemplate","getNextTemplateName","renameTemplate","exTemplate","getTemplateByName","Error","currentTemplate","saveTemplate","removeTemplate","onTemplateRemoved","serialize","deserialize","templateJson","loadTemplateFromJson","_currentTemplateModifiedSubscription","throttle","v","interval","t","onTemplateAdded","key","removeItem","startsWith","parse","templateName","getNextTemplateId","objField","saveTemplateToLocalStorage","setItem","isStored","SourceFileService","_sourceFileChangedSubject","sourceFileChanged","_sourceFile","PlaceholderService","_descriptionSubject","_stateSubject","descriptionChanged","stateChanged","startOperation","description","DocumentPageService","_activePageChangedSubject","_activePage","activePageChanged","setActivePage","activePage","ParserAppComponent","_modalService","parserService","sourceFileService","templateService","_zoomService","_navigateService","placeholderService","documentPageService","_uploadFilesService","_passwordService","windowService","CREATE_FIELD_MODE","browseFilesModal","CommonModals","BrowseFiles","documentError","isApiAvaible","fileWasDropped","files","onResize","w","refreshZoom","uploadsChange","uploads","item","rewriteConfig","selectFile","selectDir","passChange","pass","PasswordRequired","zoomIn","zoom","changeZoom","zoomOut","addFieldClick","addTableClick","isFileLoaded","document","openModal","fileShouldBeLoaded","open","$event","fileDropped","modalId","credentials","FileCredentials","close","parserConfig","browse","ngOnInit","reloadCurrentPage","window","location","reload","_document","operationState","countPages","pages","currentPage","getFitToWidth","surfaceWidth","innerWidth","pageWidth","ptToPx","offsetWidth","Math","round","pt","Component","selector","ModalService","ZoomService","NavigateService","UploadFilesService","PasswordService","WindowService","Input","FieldService","rendererFactory2","_destroy","_isMoving","_mouseMoveSubject","_mouseUpSubject","_activeChangedSubject","mouseMove","mouseUp","activeChanged","renderer","createRenderer","createMouseObservables","removeMouseMoveListener","removeMouseUpListener","fromEventPattern","handler","listen","takeUntil","event","onMouseMove","removePanMoveListener","onMouseUp","removePanEndListener","ngOnDestroy","setActive","beginMove","mousePosition","Utils","getMousePosition","isMoving","RendererFactory2","FieldContextMenuClick","action","FieldComponent","_fieldService","contextMenuClick","EventEmitter","isActive","_field","_left","left","pageSize","min","max","_top","top","_right","right","_bottom","bottom","renameFieldClick","emit","deleteFieldClick","addColumnLeft","addColumnRight","mouseDown","mode","preventDefault","startMousePos","columnInitialPos","mouseUpSubscription","mousePos","delta","scale","rightClick","Output","RenameModalComponent","acceptEvent","cancelEvent","newError","newValue","hasError","initialValue","refresh","setTimeout","inputBox","nativeElement","focus","acceptClick","operationId","cancelClick","modalElement","cancelClose","ViewChild","static","SurfaceComponent","hostingComponentsService","addDynamicComponentService","_templateService","_documentPageService","fieldWrappers","_zoom","zoomChange","_currentTemplateChangedSubscription","setTemplate","_","updateActivePage","dynamicDirective","find","viewContainerRef","fieldComponent","addDynamicComponent","wrapper","FieldWrapper","pageModel","number","contextMenuSubscription","fieldContextMenuClick","fieldNameModal","fieldNameModalAccept","oldFieldName","newFieldName","removeFields","forEach","destroy","clear","getCurrentPosition","page","offset","ngAfterViewInit","_fieldAddedSubscription","_fieldRemovedSubscription","doubleTap","elementsFromPoint","parseInt","substring","surface","querySelectorAll","element","child","children","style","opacity","parentElement","background","HostingDynamicComponentService","AddDynamicComponentService","ref","ConfirmationModalComponent","UtilsService","generateCsvForParseResults","results","r","isArray","table","prepareCsvItem","col","ci","replace","TableViewerComponent","SidePanelComponent","_parserService","_sourceFileService","_utilsService","_placeholderService","_parseState","isDataMode","isTemplateMode","_templateAddedSubscription","templateIds","_templateRemovedSubscription","removeTemplateId","parseState","manageTemplates","isCurrentTemplate","selectTemplateClick","showData","createTemplateClick","renameTemplateClick","stopPropagation","templateNameModal","templateNameModalAccept","removeTemplateClick","templateRemoveModal","promptText","templateRemoveModalAccept","downloadTemplateClick","f","File","type","fileUrl","URL","createObjectURL","fileLink","createElement","href","download","click","revokeObjectURL","onFileSelected","target","reader_1","FileReader","readAsText","onload","uploadTemplate","state","data","downloadResultsAsCsv","isCompleted","csv","fileNameForCsv","showTableValue","tableViewer","PlaceholderComponent","stateSubscription","progress","isVisible","ParserConfig","ParserConfigService","_parserConfig","BehaviorSubject","_updatedConfig","load","Promise","resolve","reject","configEndpoint","getConfigEndpoint","PARSER_APP","toPromise","then","catch","initializeApp","parserConfigService","setupLoadingInterceptor","service","LoadingMaskInterceptorService","ParserModule","library","add","fas","far","forRoot","apiEndpoint","DEFAULT_API_ENDPOINT","ngModule","NgModule","declarations","imports","BrowserModule","CommonComponentsModule","HttpClientModule","ClickOutsideModule","FontAwesomeModule","exports","providers","ExceptionMessageService","provide","HTTP_INTERCEPTORS","useClass","ErrorInterceptorService","multi","APP_INITIALIZER","useFactory","deps","LoadingMaskService","entryComponents"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { EventEmitter } from \"events\";\nimport { Observable, Subject, Subscription } from 'rxjs';\nimport { PageModel } from \"@groupdocs.examples.angular/common-components\";\nimport { __values } from \"tslib\";\n\nexport class TableValue {\n  constructor(obj: any) {\n    for (let i = 0; i < obj.length; i++) {\n      const row: string[] = [];\n      if (obj[i]) {\n        for (let j = 0; j < obj[i].length; j++) {\n          row.push(obj[i][j]);\n        }\n      }\n\n      this.rows.push(row);\n    }\n  }\n\n  readonly rows: Array<string[]> = [];\n}\n\nexport class OperationState<T> {\n  private _state = 0;\n  private _prompt: string;\n  private _error: string;\n  private _result: T;\n\n  enabled = true;\n\n  get isReadyToRun() {\n    return this._state === 0;\n  }\n\n  get isFailed() {\n    return this._state === -1;\n  }\n\n  get isCompleted() {\n    return this._state === 1;\n  }\n\n  get isProcessing() {\n    return this._state == null;\n  }\n\n  get prompt() {\n    return this._prompt;\n  }\n\n  set prompt(prompt: string) {\n    this._prompt = prompt;\n    this._error = null;\n    this._result = null;\n    this._state = 0;\n  }\n\n  get error() {\n    return this._error;\n  }\n\n  set error(error: string) {\n    this._prompt = null;\n    this._error = error;\n    this._result = null;\n    this._state = -1;\n  }\n\n  get result() {\n    return this._result;\n  }\n\n  set result(result: T) {\n    this._prompt = null;\n    this._error = null;\n    this._result = result;\n    this._state = 1;\n  }\n\n  execute() {\n    this._state = null;\n  }\n}\n\nexport class DocumentDescriptionResponse {\n  message: string;\n  result: DocumentDescription;\n}\n\nexport class ParseByTemplateResponse {\n  message: string;\n  data: ParseResult[];\n}\n\nexport class SourceFile {\n  constructor(public guid: string, public password: string) {\n  }\n}\n\nexport class DocumentDescription extends SourceFile {\n  pages: DocumentPageDescription[];\n}\n\nexport class DocumentPageDescription {\n  number: number;\n  width: number;\n  height: number;\n  data: string;\n}\n\nexport class FileDescription {\n  pages: PageModel[];\n}\n\nexport class ParseResult {\n  name: string;\n  value: string;\n}\n\nexport class Point {\n  readonly x: number;\n  readonly y: number;\n\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n  }\n}\n\nexport class Size {\n  readonly width: number;\n  readonly height: number;\n\n  constructor(width: number, height: number) {\n    this.width = width;\n    this.height = height;\n  }\n}\n\nexport interface TemplateId {\n  readonly id: string;\n  readonly name: string;\n}\n\nexport class Template implements TemplateId {\n  static readonly NotSaved = \"NotSaved\";\n\n  private _id: string = null;\n  private _name = \"template name\";\n  private _fields: TemplateField[] = [];\n\n  private _addFieldSubject: Subject<TemplateField> = new Subject();\n  private _removeFieldSubject: Subject<TemplateField> = new Subject();\n  private _modifiedSubject: Subject<Template> = new Subject();\n\n  private _fieldChangedSubscriptions = new Map<TemplateField, Subscription>();\n\n  constructor() {\n    this._id = Template.NotSaved;\n  }\n\n  readonly addedField: Observable<TemplateField> = this._addFieldSubject.asObservable();\n  readonly removedField: Observable<TemplateField> = this._removeFieldSubject.asObservable();\n  readonly modified: Observable<Template> = this._modifiedSubject.asObservable();\n\n  get id() {\n    return this._id;\n  }\n\n  set id(id: string) {\n    this._id = id;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  set name(name: string) {\n    this._name = name;\n    this.notifyModified();\n  }\n\n  get fields(): TemplateField[] {\n    return this._fields;\n  }\n\n  get isStored() {\n    return this._id !== Template.NotSaved;\n  }\n\n  get isEmpty() {\n    return this._fields.length === 0;\n  }\n\n  addField(field: TemplateField) {\n    this._fieldChangedSubscriptions.set(\n      field,\n      field.changed.subscribe(p => this.notifyModified())\n    );\n\n    this._fields.push(field);\n    this._addFieldSubject.next(field);\n    this.notifyModified();\n  }\n\n  removeField(field: TemplateField) {\n    const index = this._fields.indexOf(field);\n    if (index > -1) {\n      this._fieldChangedSubscriptions.get(field).unsubscribe();\n      this._fieldChangedSubscriptions.delete(field);\n      this._fields.splice(index, 1);\n    }\n\n    this._removeFieldSubject.next(field);\n    this.notifyModified();\n  }\n\n  removeFieldByName(fieldName: string) {\n    const field = this.getFieldByName(fieldName);\n    if (field) {\n      this.removeField(field);\n    }\n  }\n\n  getFieldByName(fieldName: string) {\n    if (!fieldName) {\n      return null;\n    }\n\n    const name = fieldName.toLocaleLowerCase();\n    for (let i = 0; i < this._fields.length; i++) {\n      if (this._fields[i].name.toLocaleLowerCase() === name) {\n        return this._fields[i];\n      }\n    }\n\n    return null;\n  }\n\n  createField(baseName: string): TemplateField {\n    const field = new TemplateField(this);\n    field.name = this.getNextFieldName(baseName);\n    field.size = new Size(60, 20);\n    field.pageNumber = 1;\n    field.position = new Point(10, 10);\n\n    return field;\n  }\n\n  private getNextFieldName(baseName: string): string {\n    for (let i = 0; i < 1000; i++) {\n      const name = baseName + i.toString();\n      if (!this.getFieldByName(name)) {\n        return name;\n      }\n    }\n\n    return null;\n  }\n\n  private notifyModified() {\n    this._modifiedSubject.next(this);\n  }\n}\n\nexport class TemplateFieldTypes {\n  static readonly FIXED = \"FIXED\";\n  static readonly TABLE = \"TABLE\";\n}\n\nexport class TemplateField {\n  private _fieldType: string = TemplateFieldTypes.FIXED;\n\n  private _name: string;\n  private _pageNumber: number;\n  private _position: Point;\n  private _size: Size;\n  private _columns: TemplateFieldTableSeparator[];\n  private _changedSubject = new Subject<string>();\n\n  constructor(private _template: Template) {\n    this._columns = [];\n  }\n\n  readonly changed = this._changedSubject.asObservable();\n\n  get columns(): TemplateFieldTableSeparator[] {\n    return this._columns;\n  }\n\n  addColumn(columnName: string, columnValue: number) {\n    const column = new TemplateFieldTableSeparator(\n      columnName == null ? this.getNextColumnName() : columnName,\n      columnValue,\n      this._changedSubject);\n\n    this._columns.push(column);\n    this._changedSubject.next(\"columns\");\n  }\n\n  removeColumn(column: TemplateFieldTableSeparator) {\n    const index = this._columns.indexOf(column);\n    if (index > -1) {\n\n      this._columns.splice(index, 1);\n      this._changedSubject.next(\"columns\");\n    }\n  }\n\n  getColumnByName(columnName: string) {\n    if (!columnName) {\n      return null;\n    }\n\n    const name = columnName.toLocaleLowerCase();\n    for (let i = 0; i < this._columns.length; i++) {\n      if (this._columns[i].name.toLocaleLowerCase() === name) {\n        return this._columns[i];\n      }\n    }\n\n    return null;\n  }\n\n  get fieldType(): string {\n    return this._fieldType;\n  }\n\n  set fieldType(fieldType: string) {\n    this._fieldType = fieldType;\n    this._changedSubject.next(\"fieldType\");\n  }\n\n  get template(): Template {\n    return this._template;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  set name(name: string) {\n    this._name = name;\n    this._changedSubject.next(\"name\");\n  }\n\n  get pageNumber() {\n    return this._pageNumber;\n  }\n\n  set pageNumber(pageNumber: number) {\n    this._pageNumber = pageNumber;\n    this._changedSubject.next(\"pageNumber\");\n  }\n\n  get position() {\n    return this._position;\n  }\n\n  set position(position: Point) {\n    this._position = position;\n    this._changedSubject.next(\"position\");\n  }\n\n  get size() {\n    return this._size;\n  }\n\n  set size(size: Size) {\n    this._size = size;\n    this._changedSubject.next(\"size\");\n  }\n\n  toJSON() {\n    return {\n      fieldType: this.fieldType,\n      name: this.name,\n      pageNumber: this.pageNumber,\n      x: this.position.x,\n      y: this.position.y,\n      width: this.size.width,\n      height: this.size.height,\n      columns: this._columns\n    };\n  }\n\n  private getNextColumnName(): string {\n    for (let i = 0; i < 1000; i++) {\n      const name = \"TC:\" + i.toString();\n      if (!this.getColumnByName(name)) {\n        return name;\n      }\n    }\n\n    return null;\n  }\n}\n\nexport class TemplateFieldTableSeparator {\n  constructor(private _name: string, private _value: number, private _changedSubject: Subject<string>) {\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  set value(value: number) {\n    this._value = value;\n    this._changedSubject.next(\"table-separator\");\n  }\n\n  toJSON() {\n    return {\n      name: this.name,\n      value: this.value,\n    };\n  }\n}","import { Injectable, NgModuleFactoryLoader } from '@angular/core';\nimport { HttpClient, HttpHeaders } from \"@angular/common/http\";\n\nimport { Api, FileCredentials, FileUtil, ConfigService } from \"@groupdocs.examples.angular/common-components\";\nimport { DocumentDescription, ParseByTemplateResponse, SourceFile, Template } from './app-models';\nimport { timeout } from 'rxjs/operators';\nimport { Observable, Subject } from 'rxjs';\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ParserService {\n\n  constructor(private _http: HttpClient, private _config: ConfigService) { }\n\n  loadFiles(path: string) {\n    return this._http.post(this._config.getParserApiEndpoint() + Api.LOAD_FILE_TREE, {'path': path}, Api.httpOptionsJson);\n  }\n\n  upload(file: File, url: string, rewrite: boolean) {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append('rewrite', String(rewrite));\n    if (url) {\n       formData.append(\"url\", url);\n    }\n\n    return this._http.post(this._config.getParserApiEndpoint() + Api.UPLOAD_DOCUMENTS, formData);\n  }\n\n  loadDocumentDescription(sourceFile: SourceFile): Observable<DocumentDescription> {\n    const subject = new Subject<DocumentDescription>();\n\n    const observer = {\n      next: (response: DocumentDescription) => subject.next(response),\n      complete: () => subject.complete(),\n      error: (err: any) => {\n        this.logToServer(err);\n        console.error(err);\n        subject.error(err);\n      }\n    };\n\n    this._http.post(\n      this._config.getParserApiEndpoint() + Api.LOAD_DOCUMENT_DESCRIPTION,\n      sourceFile,\n      Api.httpOptionsJson)\n      .pipe(timeout(25000))\n      .subscribe(observer);\n\n    return subject;\n  }\n\n  parseByTemplate(sourceFile: SourceFile, password: string, template: Template): Observable<ParseByTemplateResponse> {\n    const subject = new Subject<ParseByTemplateResponse>();\n\n    const observer = {\n      next: (response: ParseByTemplateResponse) => subject.next(response),\n      complete: () => subject.complete(),\n      error: (err: any) => {\n        this.logToServer(err);\n        console.error(err);\n        subject.error(err);\n      }\n    };\n\n    this._http.post(\n      this._config.getParserApiEndpoint() + Api.PARSE,\n      {\n        guid: sourceFile.guid,\n        password: sourceFile.password,\n        fields: template.fields\n      },\n      Api.httpOptionsJson)\n      .pipe(timeout(25000))\n      .subscribe(observer);\n\n    return subject;\n  }\n\n  getErrorMessage(err: any): string {\n    let text: string;\n\n    if (err.status === 404) {\n      text = \"The requested file was not found.\"\n    } else if (err.error && typeof err.error.title === \"string\") {\n      text = err.error.title;\n    } else if (typeof err.error === \"string\") {\n      text = err.error;\n    } else if (typeof err.title === \"string\") {\n      text = err.title;\n    } else {\n      text = \"The error occured while opening the file.\"\n    }\n\n    return text;\n  }\n\n  private logToServer(error: any) {\n    const errorMessage = { error: JSON.stringify(error) };\n    const url = localStorage.getItem(\"parser.logclienterror\");\n    if (url) {\n      this._http.post(url, errorMessage, Api.httpOptionsJson).subscribe({\n        next: () => console.log(\"Sent to server\"),\n        error: () => console.log(\"Can't send to server\")\n      });\n    }\n  }\n}\n\n// class Api {\n//   // TODO: add configurable IP\n//   public static apiEndPoint: string = window['GROUPDOCS_PARSER_API_BASE'] != null ? window['GROUPDOCS_PARSER_API_BASE'] : 'https://localhost:44333/v1/';\n\n//   public static loadDocumentDescription = \"loadDocumentDescription\";\n\n//   public static parseByTemplate = \"parseByTemplate\";\n\n//   public static health = \"health\";\n\n\n//   public static httpOptionsJson = {\n//     headers: new HttpHeaders({\n//       'Content-Type': 'application/json',\n//     })\n//   };\n// }\n","import { Injectable, TemplateRef } from '@angular/core';\nimport { Point, Size, Template, TemplateField, TemplateId } from './app-models';\nimport { interval, Observable, Subject, Subscription } from 'rxjs';\nimport { throttle } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TemplateService {\n  private readonly _templatePattern = \"parser.template.\";\n\n  private _currentTemplate: Template;\n  private _currentTemplateModifiedSubscription: Subscription;\n  private _templates: Template[];\n\n  private _currentTemplateChangedSubject: Subject<Template> = new Subject();\n  private _templateAddedSubject: Subject<Template> = new Subject();\n  private _templateRemovedSubject: Subject<TemplateId> = new Subject();\n\n  constructor() {\n    this._templates = [];\n    this.loadTemplatesFromLocalStorage();\n\n    this.createTemplate();\n  }\n\n  readonly currentTemplateChanged: Observable<Template> = this._currentTemplateChangedSubject.asObservable();\n  readonly templateAddedSubject: Observable<Template> = this._templateAddedSubject.asObservable();\n  readonly templateRemovedSubject: Observable<TemplateId> = this._templateRemovedSubject.asObservable();\n\n  get currentTemplate() {\n    return this._currentTemplate;\n  }\n\n  get templateIds(): TemplateId[] {\n    return this._templates;\n  }\n\n  selectTemplate(templateId: TemplateId) {\n    const template = this.getTemplateById(templateId);\n    if (template) {\n      this.setCurrentTemplate(template);\n    }\n  }\n\n  createTemplate() {\n    const template = new Template();\n    template.name = this.getNextTemplateName(\"Template\");\n\n    this.setCurrentTemplate(template);\n  }\n\n  renameTemplate(templateId: TemplateId) {\n    if (!templateId) {\n      return;\n    }\n\n    const exTemplate = this.getTemplateByName(templateId.name);\n    if (exTemplate && exTemplate.id !== templateId.id) {\n      throw Error('Template with the same name already exists');\n    }\n\n    if (templateId.id === this.currentTemplate.id) {\n      this.currentTemplate.name = templateId.name;\n    }\n    else {\n      const template = this.getTemplateById(templateId);\n      template.name = templateId.name;\n\n      this.saveTemplate(template);\n    }\n  }\n\n  removeTemplate(templateId: TemplateId) {\n    const template = this.getTemplateById(templateId);\n    let index = this._templates.indexOf(template);\n\n    if (index > -1) {\n      this._templates.splice(index, 1);\n    }\n\n    this.onTemplateRemoved(template);\n\n    if (template !== this._currentTemplate) {\n      return;\n    }\n\n    if (this._templates.length === 0) {\n      // Create an empty template if list is empty\n      this.createTemplate();\n    } else {\n      // Select the upper template (or the first)\n      if (index > 0) {\n        index = index - 1;\n      }\n\n      this.setCurrentTemplate(this._templates[index]);\n    }\n  }\n\n  serialize(templateId: TemplateId): string {\n    if (!templateId) {\n      return;\n    }\n\n    const template = this.getTemplateById(templateId);\n    if (!template) {\n      return;\n    }\n\n    return JSON.stringify({\n      name: template.name,\n      fields: template.fields\n    });\n  }\n\n  deserialize(templateJson: string) {\n    if (!templateJson) {\n      return;\n    }\n    try {\n      const template = this.loadTemplateFromJson(templateJson);\n      template.id = Template.NotSaved;\n\n      this.saveTemplate(template);\n\n      this.selectTemplate(template);\n    }\n    catch (error) {\n      throw Error('Error while parsing template file');\n    }\n  }\n\n  private setCurrentTemplate(template: Template) {\n    if (this._currentTemplateModifiedSubscription) {\n      this._currentTemplateModifiedSubscription.unsubscribe();\n    }\n\n    this._currentTemplate = template;\n\n    this._currentTemplateModifiedSubscription = this._currentTemplate.modified\n      .pipe(throttle(v => interval(500)))\n      .subscribe(t => this.saveTemplate(t));\n\n    this._currentTemplateChangedSubject.next(this._currentTemplate);\n  }\n\n  private onTemplateAdded(template: Template) {\n    this._templateAddedSubject.next(template);\n  }\n\n  private onTemplateRemoved(template: Template) {\n    this._templateRemovedSubject.next(template);\n\n    // remove from local storage\n\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n\n      if (key === this._templatePattern + template.id) {\n        localStorage.removeItem(key);\n        return;\n      }\n    }\n  }\n\n  private loadTemplatesFromLocalStorage() {\n    for (let i = 0; i < localStorage.length; i++) {\n      const key = localStorage.key(i);\n\n      if (key.startsWith(this._templatePattern)) {\n        const template = this.loadTemplateFromJson(localStorage.getItem(key));\n\n        this._templates.push(template);\n        this.onTemplateAdded(template);\n      }\n    }\n  }\n\n  private loadTemplateFromJson(templateJson: string): Template {\n    const obj = JSON.parse(templateJson);\n\n    const templateName = this.getNextTemplateName(obj.name);\n\n    const template = new Template();\n    template.id = obj.id ? obj.id : this.getNextTemplateId();\n    template.name = templateName;\n    for (let i = 0; i < obj.fields.length; i++) {\n      const objField = obj.fields[i];\n\n      const field = new TemplateField(template);\n      if (objField.fieldType) {\n        field.fieldType = objField.fieldType;\n      }\n\n      field.name = objField.name;\n      field.pageNumber = objField.pageNumber;\n      field.position = new Point(objField.x, objField.y);\n      field.size = new Size(objField.width, objField.height);\n\n      if (objField.columns) {\n        for (let j = 0; j < objField.columns.length; j++) {\n          field.addColumn(objField.columns[j].name, objField.columns[j].value);\n        }\n      }\n\n      template.addField(field);\n    }\n\n    return template;\n  }\n\n  private saveTemplateToLocalStorage(template: Template) {\n    if (!template) {\n      return;\n    }\n\n    const key = this._templatePattern + template.id;\n\n    localStorage.setItem(key, JSON.stringify({\n      name: template.name,\n      id: template.id,\n      fields: template.fields\n    }));\n  }\n\n  private saveTemplate(template: Template) {\n    if (!template) {\n      return;\n    }\n\n    if (!template.isStored) {\n      template.id = this.getNextTemplateId();\n      this._templates.push(template);\n      this.onTemplateAdded(template);\n    }\n\n    // add to local storage\n    this.saveTemplateToLocalStorage(template);\n  }\n\n  private getTemplateById(templateId: TemplateId) {\n    if (!templateId) {\n      return null;\n    }\n\n    for (let i = 0; i < this._templates.length; i++) {\n      if (this._templates[i].id === templateId.id) {\n        return this._templates[i];\n      }\n    }\n\n    return null;\n  }\n\n  private getTemplateByName(templateName: string) {\n    if (!templateName) {\n      return null;\n    }\n\n    const name = templateName.toLocaleLowerCase();\n    for (let i = 0; i < this._templates.length; i++) {\n      if (this._templates[i].name.toLocaleLowerCase() === name) {\n        return this._templates[i];\n      }\n    }\n\n    return null;\n  }\n\n  private getNextTemplateId(): string {\n    const templateId = { id: \"\", name: \"\" };\n\n    for (let i = 0; i < 1000; i++) {\n      templateId.id = i.toString();\n      if (!this.getTemplateById(templateId)) {\n        return templateId.id;\n      }\n    }\n\n    return null;\n  }\n\n  private getNextTemplateName(baseName: string): string {\n    for (let i = 0; i < 1000; i++) {\n      const name = baseName + (i === 0 ? \"\" : \" \" + i.toString());\n      if (!this.getTemplateByName(name)) {\n        return name;\n      }\n    }\n\n    return null;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\nimport { SourceFile } from './app-models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SourceFileService {\n  private _sourceFile : SourceFile;\n  private _sourceFileChangedSubject = new Subject<SourceFile>();\n  \n  constructor() { }\n\n  readonly sourceFileChanged : Observable<SourceFile> = this._sourceFileChangedSubject.asObservable();\n\n  get sourceFile() {\n    return this._sourceFile;\n  }\n\n  set sourceFile(sourceFile: SourceFile) {\n    this._sourceFile = sourceFile;\n    this._sourceFileChangedSubject.next(sourceFile);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, Observer, Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PlaceholderService {\n  private _descriptionSubject = new Subject<string>();\n  private _stateSubject = new Subject<Observable<number>>();\n\n  constructor() { }\n\n  readonly descriptionChanged = this._descriptionSubject.asObservable();\n  readonly stateChanged = this._stateSubject.asObservable();\n\n  startOperation(description : string) : Observer<number> {\n    const subject = new Subject<number>();\n    \n    this._descriptionSubject.next(description);\n    this._stateSubject.next(subject);\n\n    return subject;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DocumentPageService {\n\n  private _activePageChangedSubject = new Subject<number>();\n  private _activePage: number = null;\n\n  constructor() { }\n\n  readonly activePageChanged = this._activePageChangedSubject.asObservable();\n\n  get activePage(): number {\n    return this._activePage;\n  }\n\n  setActivePage(activePage: number) {\n    this._activePage = activePage;\n    this._activePageChangedSubject.next(activePage);\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport {\n  CommonModals,\n  FileCredentials,\n  FileModel, ModalService,\n  NavigateService, PasswordService,\n  UploadFilesService,\n  WindowService,\n  ZoomService} from \"@groupdocs.examples.angular/common-components\";\nimport { DocumentDescription, SourceFile, Template, TemplateFieldTypes } from './app-models';\nimport { ParserService } from './parser.service';\nimport { ParserConfig } from './parser-config';\nimport { TemplateService } from './template.service';\nimport { SourceFileService } from './source-file.service';\nimport { PlaceholderService } from './placeholder.service';\nimport { DocumentPageService } from './document-page.service';\n\n@Component({\n  selector: 'gd-app-parser',\n  templateUrl: './parser-app.component.html',\n  styleUrls: ['./parser-app.component.less']\n})\nexport class ParserAppComponent implements OnInit {\n  @Input() sourceFile: string;\n\n  private readonly CREATE_FIELD_MODE = \"createFieldMode\";\n\n  readonly browseFilesModal = CommonModals.BrowseFiles;\n\n  private _document: DocumentDescription;\n  template: Template;\n  parserConfig: ParserConfig;\n  filePassword: string;\n\n  documentError: string = null;\n  isApiAvaible = true;\n\n  fileWasDropped = false;\n  files: FileModel[] = [];\n  parserService: ParserService;\n  sourceFileService: SourceFileService;\n  templateService: TemplateService;\n  placeholderService: PlaceholderService;\n  documentPageService: DocumentPageService;\n  public credentials: FileCredentials;\n\n  constructor(\n    private _modalService: ModalService,\n    parserService: ParserService,\n    sourceFileService: SourceFileService,\n    templateService: TemplateService,\n    private _zoomService: ZoomService,\n    private _navigateService: NavigateService,\n    placeholderService: PlaceholderService,\n    documentPageService: DocumentPageService,\n    private _uploadFilesService: UploadFilesService,\n    private _passwordService: PasswordService,\n    windowService: WindowService) {\n\n    this.parserService = parserService;\n    this.sourceFileService = sourceFileService;\n    this.templateService = templateService;\n    this.placeholderService = placeholderService;\n    this.documentPageService = documentPageService;\n\n    windowService.onResize.subscribe((w) => {\n      this.refreshZoom();\n    });\n\n    this.sourceFileService.sourceFileChanged.subscribe(sourceFile => this.loadDocumentDescription(sourceFile))\n\n    this._uploadFilesService.uploadsChange.subscribe((uploads) => {\n      if (uploads && uploads.length > 0) {\n        this.parserService.upload(uploads.item(0), '', this.rewriteConfig).subscribe((obj: FileCredentials) => {\n          this.fileWasDropped ? this.selectFile(obj.guid, '', '') : this.selectDir('');\n        });\n      }\n    });\n\n    this._passwordService.passChange.subscribe((pass: string) => {\n      this.selectFile(this.sourceFileService.sourceFile.guid, pass, CommonModals.PasswordRequired);\n    });\n  }\n\n  // Menu\n\n  zoomIn() {\n    const zoom = this._zoomService.zoom;\n\n    if (zoom < 490) {\n      this._zoomService.changeZoom(zoom + 10);\n    }\n  }\n\n  zoomOut() {\n    const zoom = this._zoomService.zoom;\n    if (zoom > 30) {\n      this._zoomService.changeZoom(zoom - 10);\n    }\n  }\n\n  addFieldClick() {\n    const template = this.templateService.currentTemplate;\n    if (!template) {\n      return;\n    }\n\n    const field = template.createField(\"Field\");\n    field.fieldType = TemplateFieldTypes.FIXED;\n    field.pageNumber = this.documentPageService.activePage;\n    template.addField(field);\n  }\n\n  addTableClick() {\n    const template = this.templateService.currentTemplate;\n    if (!template) {\n      return;\n    }\n\n    const field = template.createField(\"Table\");\n    field.fieldType = TemplateFieldTypes.TABLE;\n    field.pageNumber = this.documentPageService.activePage;\n    template.addField(field);\n  }\n\n  // end of Menu\n\n  isFileLoaded() {\n    return !this.documentError && this.document;\n  }\n\n  openModal(id: string, fileShouldBeLoaded: boolean) {\n    if (fileShouldBeLoaded && !this.isFileLoaded()) return;\n    this._modalService.open(id);\n  }\n\n  selectDir($event: string) {\n    this.parserService.loadFiles($event).subscribe((files: FileModel[]) => this.files = files || []);\n  }\n\n  upload($event: string) {\n    this.parserService.upload(null, $event, this.rewriteConfig).subscribe(() => {\n      this.selectDir('');\n    });\n  }\n\n  fileDropped($event) {\n    this.fileWasDropped = $event;\n  }\n\n  selectFile($event: string, password: string, modalId: string) {\n    this.credentials = new FileCredentials($event, password);\n    this.sourceFileService.sourceFile = new SourceFile($event, password);\n\n    if (modalId) {\n      this._modalService.close(modalId);\n    }\n  }\n\n  get rewriteConfig(): boolean {\n    return this.parserConfig ? this.parserConfig.rewrite : true;\n  }\n\n  get uploadConfig(): boolean {\n    return this.parserConfig ? this.parserConfig.upload : true;\n  }\n\n  get browseConfig(): boolean {\n    return this.parserConfig ? this.parserConfig.browse : true;\n  }\n\n  get returnUrl(): string {\n    return localStorage.getItem(\"returnUrl\");\n  }\n\n  ngOnInit(): void {\n  }\n\n  reloadCurrentPage() {\n    window.location.reload();\n  }\n\n  private loadDocumentDescription(sourceFile: SourceFile) {\n    this.isApiAvaible = true;\n    this.documentError = null;\n    this._document = null;\n\n    const operationState = this.placeholderService.startOperation(\"Loading document...\");\n\n    const observer = {\n      next: (response: DocumentDescription) => {\n        this.documentPageService.setActivePage(1);\n        this._document = response;\n\n        operationState.complete();\n\n        this.templateService.createTemplate();\n        this.refreshZoom();\n\n        this._navigateService.countPages = this.document.pages ? this.document.pages.length : 0;\n        this._navigateService.currentPage = 1;\n      },\n      error: (err: any) => {\n        this.documentError = this.parserService.getErrorMessage(err);\n        operationState.error(err);\n      },\n      complete: () => operationState.complete()\n    };\n\n    this.parserService.loadDocumentDescription(sourceFile).subscribe(observer);\n  }\n\n  get document() {\n    return this._document;\n  }\n\n  private refreshZoom() {\n    this._zoomService.changeZoom(this.getFitToWidth());\n  }\n\n  private getFitToWidth() {\n    if (!this.document) {\n      return 100;\n    }\n\n    const surfaceWidth = window.innerWidth;\n\n    // Images and Excel-related files receiving dimensions in px from server\n    const pageWidth = this.ptToPx(this.document.pages[0].width);\n    const pageHeight = this.ptToPx(this.document.pages[0].height);\n    const offsetWidth = pageWidth ? pageWidth : surfaceWidth;\n\n    return (pageHeight > pageWidth && Math.round(offsetWidth / surfaceWidth) < 2)\n      ? 200 - Math.round(offsetWidth * 100 / surfaceWidth)\n      : Math.round(surfaceWidth * 100 / offsetWidth);\n  }\n\n  private ptToPx(pt: number) {\n    //pt * 96 / 72 = px.\n    return pt * 96 / 72;\n  }\n}","import { ComponentFactoryResolver, OnDestroy, Renderer2 } from '@angular/core';\nimport { RendererFactory2 } from '@angular/core';\nimport { Injectable, HostListener } from '@angular/core';\nimport { Utils } from '@groupdocs.examples.angular/common-components';\nimport { fromEventPattern, Observable, Subject } from 'rxjs';\nimport { takeUntil, map } from 'rxjs/operators';\nimport { Point } from './app-models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FieldService implements OnDestroy {\n\n  private _destroy = new Subject();\n  private _isMoving = false;\n\n  private _mouseMoveSubject = new Subject<Point>();\n  private _mouseUpSubject = new Subject<Point>();\n  private _activeChangedSubject = new Subject<string>();\n\n  readonly mouseMove = this._mouseMoveSubject.asObservable();\n  readonly mouseUp = this._mouseUpSubject.asObservable();\n  readonly activeChanged = this._activeChangedSubject.asObservable();\n\n  constructor(private rendererFactory2: RendererFactory2) {\n    const renderer = this.rendererFactory2.createRenderer(null, null);\n\n    this.createMouseObservables(renderer);\n  }\n\n  private createMouseObservables(renderer: Renderer2) {\n    // MOUSE\n\n    let removeMouseMoveListener: () => void;\n    const createMouseMoveListener = (handler: (e: Event) => boolean | void) => {\n      removeMouseMoveListener = renderer.listen(\"document\", \"mousemove\", handler);\n    };\n\n    fromEventPattern<MouseEvent>(createMouseMoveListener, () => removeMouseMoveListener())\n      .pipe(takeUntil(this._destroy))\n      .subscribe(event => this.onMouseMove(event));\n\n    let removeMouseUpListener: () => void;\n    const createMouseUpListener = (handler: (e: Event) => boolean | void) => {\n      removeMouseUpListener = renderer.listen(\"document\", \"mouseup\", handler);\n    };\n\n    fromEventPattern<MouseEvent>(createMouseUpListener, () => removeMouseUpListener())\n      .pipe(takeUntil(this._destroy))\n      .subscribe(event => this.onMouseUp(event));\n\n    // TOUCH\n\n    let removePanMoveListener: () => void;\n    const createPanMoveListener = (handler: (e: Event) => boolean | void) => {\n      removePanMoveListener = renderer.listen(\"document\", \"panmove\", handler);\n    };\n\n    fromEventPattern<MouseEvent>(createPanMoveListener, () => removePanMoveListener())\n      .pipe(takeUntil(this._destroy))\n      .subscribe(event => this.onMouseMove(event));\n\n    let removePanEndListener: () => void;\n    const createPanEndListener = (handler: (e: Event) => boolean | void) => {\n      removePanEndListener = renderer.listen(\"document\", \"panend\", handler);\n    };\n\n    fromEventPattern<MouseEvent>(createPanEndListener, () => removePanEndListener())\n      .pipe(takeUntil(this._destroy))\n      .subscribe(event => this.onMouseUp(event));\n  }\n\n  ngOnDestroy() {\n    this._destroy.next();\n    this._destroy.complete();\n  }\n\n  get isMoving() {\n    return this._isMoving;\n  }\n\n  setActive(fieldName: string) {\n    this._activeChangedSubject.next(fieldName);\n  }\n\n  beginMove($event: MouseEvent): Point {\n    const mousePosition = Utils.getMousePosition($event);\n    this._isMoving = true;\n\n    return mousePosition;\n  }\n\n  private onMouseMove($event: MouseEvent) {\n    if (!this.isMoving) {\n      return;\n    }\n\n    const mousePosition = Utils.getMousePosition($event);\n    this._mouseMoveSubject.next(mousePosition);\n  }\n\n  private onMouseUp($event: MouseEvent) {\n    if (!this.isMoving) {\n      return;\n    }\n\n    const mousePosition = Utils.getMousePosition($event);\n    this._mouseUpSubject.next(mousePosition);\n    this._isMoving = false;\n  }\n}\n","import { Component, HostListener, OnDestroy, OnInit, Input, Output } from '@angular/core';\nimport { Utils, ZoomService, ModalService } from '@groupdocs.examples.angular/common-components';\nimport { Point, Size, TemplateField, TemplateFieldTableSeparator, TemplateFieldTypes } from '../app-models';\n\nimport * as jquery from 'jquery';\nimport { FieldService } from '../field.service';\nimport { from, Subject, Subscription } from 'rxjs';\nimport { EventEmitter } from '@angular/core'\nimport { filter, takeUntil } from 'rxjs/operators';\n\nconst $ = jquery;\n\nexport class FieldContextMenuClick {\n  constructor(public fieldName: string, public action: string) {\n\n  }\n}\n\n@Component({\n  selector: 'gd-field',\n  templateUrl: './field.component.html',\n  styleUrls: ['./field.component.less']\n})\nexport class FieldComponent implements OnInit, OnDestroy {\n  pageSize: Size;\n\n  private _left: number;\n  private _top: number;\n  private _right: number;\n  private _bottom: number;\n\n  private _field: TemplateField\n  private _destroy = new Subject();\n\n  isActive: boolean;\n\n  @Output() contextMenuClick = new EventEmitter<FieldContextMenuClick>()\n\n  constructor(\n    private _fieldService: FieldService,\n    private _zoomService: ZoomService) {\n    _fieldService.activeChanged.pipe(takeUntil(this._destroy))\n      .subscribe(name => {\n        this.isActive = this._field && this._field.name === name;\n      });\n  }\n\n  ngOnInit(): void {\n  }\n\n  ngOnDestroy(): void {\n    this._destroy.next();\n    this._destroy.complete();\n  }\n\n  get isFixed() {\n    return this.field.fieldType === TemplateFieldTypes.FIXED;\n  }\n\n  get isTable() {\n    return this.field.fieldType === TemplateFieldTypes.TABLE;\n  }\n\n  get left(): number {\n    return this._left;\n  }\n\n  set left(left: number) {\n    if (!this.pageSize) {\n      return;\n    }\n\n    this._left = Math.min(this.pageSize.width, Math.max(0, left));\n  }\n\n  get top(): number {\n    return this._top;\n  }\n\n  set top(top: number) {\n    if (!this.pageSize) {\n      return;\n    }\n\n    this._top = Math.min(this.pageSize.height, Math.max(0, top));\n  }\n\n  get right(): number {\n    return this._right;\n  }\n\n  set right(right: number) {\n    if (!this.pageSize) {\n      return;\n    }\n\n    this._right = Math.min(Math.max(0, right), this.pageSize.width);\n  }\n\n  get bottom(): number {\n    return this._bottom;\n  }\n\n  set bottom(bottom: number) {\n    if (!this.pageSize) {\n      return;\n    }\n\n    this._bottom = Math.min(Math.max(0, bottom), this.pageSize.height);\n  }\n\n  get width() {\n    const width = this.right - this.left;\n\n    return width ? width : 0;\n  }\n\n  get height() {\n    const height = this.bottom - this.top;\n\n    return height ? height : 0;\n  }\n\n  get scale() {\n    return this._zoomService.zoom / 100;\n  }\n\n  renameFieldClick() {\n    this.contextMenuClick.emit(new FieldContextMenuClick(this.field.name, \"rename\"));\n  }\n\n  deleteFieldClick() {\n    this.contextMenuClick.emit(new FieldContextMenuClick(this.field.name, \"remove\"));\n  }\n\n  addColumnLeft() {\n    this.field.addColumn(null, this.width * 0.1);\n  }\n\n  addColumnRight() {\n    this.field.addColumn(null, this.width * 0.9);\n  }\n\n  removeColumn(column: TemplateFieldTableSeparator) {\n    this.field.removeColumn(column);\n  }\n\n  set field(field: TemplateField) {\n    this._field = field;\n\n    this.left = this.field.position.x;\n    this.top = this.field.position.y;\n\n    this.right = this.field.position.x + this.field.size.width;\n    this.bottom = this.field.position.y + this.field.size.height;\n  }\n\n  get field() {\n    return this._field;\n  }\n\n  mouseDown($event: MouseEvent, mode: string) {\n    $event.preventDefault();\n\n    this._fieldService.setActive(this.field.name);\n    const startMousePos = this._fieldService.beginMove($event);\n\n    const left = this.left;\n    const top = this.top;\n    const right = this.right;\n    const bottom = this.bottom;\n\n    const column = this.field.getColumnByName(mode);\n    const columnInitialPos = column ? column.value : null;\n\n    //  let ppa = mode.startsWith('TC:');\n\n    const mouseUpSubscription = this._fieldService.mouseUp\n      .subscribe(mousePos => {\n        this._field.position = new Point(this.left, this.top);\n        this._field.size = new Size(this.width, this.height);\n\n        //    ppa = false;\n\n        mouseUpSubscription.unsubscribe();\n      });\n\n    this._fieldService.mouseMove\n      .pipe(takeUntil(this._fieldService.mouseUp))\n      .subscribe(mousePos => {\n        if (!mousePos || !this.pageSize) {\n          return;\n        }\n\n        const minWidth = 40;\n        const minHeight = 15;\n\n        const width = this.width;\n        const height = this.height;\n\n        const delta = new Point(\n          (mousePos.x - startMousePos.x) / this.scale,\n          (mousePos.y - startMousePos.y) / this.scale\n        );\n\n        if (columnInitialPos) {\n          const v = columnInitialPos + delta.x;\n          column.value = Math.max(0, Math.min(this.width, v));\n\n          return;\n        }\n\n        switch (mode) {\n          case 'Move':\n            this.left = Math.min(left + delta.x, this.pageSize.width - this.width);\n            this.top = Math.min(top + delta.y, this.pageSize.height - this.height);\n            this.right = this.left + width;\n            this.bottom = this.top + height;\n            break;\n\n          // Edges\n\n          case 'W':\n            this.left = left + delta.x;\n\n            if (this.width < minWidth) {\n              this.left = this.right - minWidth;\n            }\n\n            break;\n\n          case 'E':\n            this.right = right + delta.x;\n\n            if (this.width < minWidth) {\n              this.right = this.left + minWidth;\n            }\n\n            break;\n\n          case 'N':\n            this.top = top + delta.y;\n\n            if (this.height < minWidth) {\n              this.top = this.bottom - minHeight;\n            }\n\n            break;\n\n          case 'S':\n            this.bottom = bottom + delta.y;\n\n            if (this.height < minHeight) {\n              this.bottom = this.top + minHeight;\n            }\n\n            break;\n\n          // Corners\n\n          case 'NW':\n            this.left = left + delta.x;\n            this.top = top + delta.y;\n\n            if (this.width < minWidth) {\n              this.left = this.right - minWidth;\n            }\n\n            if (this.height < minWidth) {\n              this.top = this.bottom - minHeight;\n            }\n\n            break;\n\n          case 'SW':\n            this.left = left + delta.x;\n            this.bottom = bottom + delta.y;\n\n            if (this.width < minWidth) {\n              this.left = this.right - minWidth;\n            }\n\n            if (this.height < minHeight) {\n              this.bottom = this.top + minHeight;\n            }\n\n            break;\n\n          case 'NE':\n            this.right = right + delta.x;\n            this.top = top + delta.y;\n\n            if (this.width < minWidth) {\n              this.right = this.left + minWidth;\n            }\n\n            if (this.height < minHeight) {\n              this.top = this.bottom - minHeight;\n            }\n\n            break;\n\n          case 'SE':\n            this.right = right + delta.x;\n            this.bottom = bottom + delta.y;\n\n            if (this.width < minWidth) {\n              this.right = this.left + minWidth;\n            }\n\n            if (this.height < minHeight) {\n              this.bottom = this.top + minHeight;\n            }\n\n            break;\n        }\n      });\n  }\n\n  rightClick($event) {\n    $event.preventDefault();\n  }\n}","import { Component, Input, OnInit, Output, EventEmitter, ElementRef, ViewChild } from '@angular/core';\nimport {\n  ModalComponent\n} from \"@groupdocs.examples.angular/common-components\";\n\n@Component({\n  selector: 'gd-rename-modal',\n  templateUrl: './rename-modal.component.html',\n  styleUrls: ['./rename-modal.component.less']\n})\nexport class RenameModalComponent implements OnInit {\n  @Input() id: String;\n  @Input() title: String;\n  @Input() promptText: String;\n  @Input() acceptText: String;\n\n  @Input() operationId: String;\n  @Input() initialValue: String;\n\n  @Output() acceptEvent = new EventEmitter();\n  @Output() cancelEvent = new EventEmitter();\n\n  @ViewChild('modal', { static: true }) modalElement: ModalComponent;\n  @ViewChild('inputBox', { static: true }) inputBox: ElementRef;\n\n  private _error: String = null;\n  private _value: String;\n\n  get hasError() {\n    return this.error != null;\n  }\n\n  get error() {\n    return this._error;\n  }\n\n  @Input()\n  set error(newError: String) {\n    this._error = newError;\n  }\n\n  get value() {\n    return this._value;\n  }\n\n  set value(newValue: String) {\n    this._value = newValue;\n    if (this.hasError) {\n      this._error = null;\n    }\n  }\n\n  constructor() { }\n\n  ngOnInit() {\n    if (!this.initialValue) {\n      this.initialValue = \"\";\n    }\n\n    this.value = this.initialValue;\n  }\n\n  refresh($event) {\n    if ($event) {\n      this._error = null;\n      this._value = this.initialValue;\n      setTimeout(() => {\n        this.inputBox.nativeElement.focus();\n      }, 0);\n    }\n  }\n\n  acceptClick() {\n    // Check if value is not empty\n    if (this.value === null || this.value === \"\") {\n      this._error = \"A new value can't be empty\";\n    }\n\n    if (!this.hasError) {\n      this.acceptEvent.emit({ id: this.operationId, newValue: this.value });\n    }\n  }\n\n  cancelClick() {\n    if (this.modalElement) {\n      this.modalElement.cancelClose();\n    }\n  }\n}\n","import { AfterViewInit, Component, ComponentRef, ElementRef, HostListener, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport {\n  AddDynamicComponentService,\n  CommonModals,\n  FileCredentials,\n  FileModel, Formatting,\n  HostingDynamicComponentService,\n  LogoComponent,\n  ModalService,\n  NavigateService, PagePreloadService, PasswordService,\n  TopTabActivatorService, UploadFilesService,\n  Utils,\n  WindowService,\n  ZoomService\n} from \"@groupdocs.examples.angular/common-components\";\nimport { DocumentDescription, Point, Size, Template, TemplateId, TemplateField } from '../app-models';\nimport { FieldComponent, FieldContextMenuClick } from \"../field/field.component\";\nimport { RenameModalComponent } from '../rename-modal/rename-modal.component';\n\nimport * as jquery from 'jquery';\nimport { Subscription } from 'rxjs';\nimport { TemplateService } from '../template.service';\nimport { eventNames } from 'process';\nimport { DocumentPageService } from '../document-page.service';\n\nconst $ = jquery;\n\n\n@Component({\n  selector: 'gd-surface',\n  templateUrl: './surface.component.html',\n  styleUrls: ['./surface.component.less']\n})\nexport class SurfaceComponent implements OnInit, OnDestroy, AfterViewInit {\n  private _document: DocumentDescription;\n  private _template: Template;\n  private _zoom: number;\n  private _fieldAddedSubscription: Subscription;\n  private _fieldRemovedSubscription: Subscription;\n  private _currentTemplateChangedSubscription: Subscription;\n\n  //private fieldComponentRefs = new Map<TemplateField, ComponentRef<{}>>();\n\n  private fieldWrappers = new Map<TemplateField, FieldWrapper>();\n\n\n  @ViewChild('fieldNameModal', { static: true }) fieldNameModal: RenameModalComponent;\n  @ViewChild('surface', { static: true }) surface: ElementRef;\n\n  @Input() set document(document: DocumentDescription) {\n    this._document = document;\n  }\n\n  get document() {\n    return this._document;\n  }\n\n  get scale() {\n    return this._zoom / 100;\n  }\n\n  addField(field: TemplateField) {\n    const dynamicDirective = this.hostingComponentsService.find(field.pageNumber);\n    if (dynamicDirective) {\n\n      const viewContainerRef = dynamicDirective.viewContainerRef;\n      const fieldComponent = this.addDynamicComponentService.addDynamicComponent(viewContainerRef, FieldComponent);\n\n      const wrapper = new FieldWrapper(fieldComponent);\n      const pageModel = this.document.pages.find(function (p) {\n        return p.number === field.pageNumber;\n      });\n      wrapper.fieldComponent.pageSize = new Size(pageModel.width, pageModel.height);\n      wrapper.fieldComponent.field = field;\n      wrapper.contextMenuSubscription = wrapper.fieldComponent.contextMenuClick.subscribe(event => this.fieldContextMenuClick(event));\n\n      this.fieldWrappers.set(field, wrapper);\n    }\n  }\n\n  fieldContextMenuClick(event: FieldContextMenuClick) {\n    if (event.action === \"rename\") {\n      this.fieldNameModal.operationId = event.fieldName;\n      this.fieldNameModal.initialValue = event.fieldName;\n      this._modalService.open(\"FieldNameModal\");\n\n      return;\n    }\n\n    if (event.action === \"remove\") {\n      this._template.removeFieldByName(event.fieldName);\n\n      return;\n    }\n  }\n\n  fieldNameModalAccept(event) {\n    const oldFieldName = event.id;\n    const newFieldName = event.newValue;\n\n    if (oldFieldName !== newFieldName) {\n      const existFieldWithName = this._template.getFieldByName(newFieldName);\n      if (existFieldWithName) {\n        this.fieldNameModal.error = \"Field with the same name already exists\";\n        return;\n      }\n    }\n\n    this._modalService.close(\"FieldNameModal\");\n    const field = this._template.getFieldByName(oldFieldName);\n    if (field) {\n      field.name = newFieldName;\n    }\n  }\n\n  removeFields() {\n    this.fieldWrappers.forEach(wrapper => {\n      wrapper.destroy();\n    });\n\n    this.fieldWrappers.clear();\n  }\n\n  removeField(field: TemplateField) {\n    const wrapper = this.fieldWrappers.get(field);\n    if (wrapper) {\n      wrapper.destroy();\n    }\n    this.fieldWrappers.delete(field);\n  }\n\n  private getCurrentPosition(position, page) {\n    const x = (position.x - page.offset().left);\n    const y = (position.y - page.offset().top);\n    return new Point(x, y);\n  }\n\n  // @HostListener('document:mousedown', ['$event'])\n  // onMouseDown($event: MouseEvent) {\n  //   const pos = Utils.getMousePosition($event);\n\n  //   let e = document.elementFromPoint(pos.x, pos.y);\n  // }\n\n  ngOnInit(): void {\n  }\n\n  ngAfterViewInit(): void {\n    this.updateActivePage();\n  }\n\n  ngOnDestroy(): void {\n    if (this._fieldAddedSubscription) {\n      this._fieldAddedSubscription.unsubscribe();\n    }\n\n    if (this._fieldRemovedSubscription) {\n      this._fieldRemovedSubscription.unsubscribe();\n    }\n\n    if (this._currentTemplateChangedSubscription) {\n      this._currentTemplateChangedSubscription.unsubscribe();\n    }\n  }\n\n  constructor(\n    private _modalService: ModalService,\n    private hostingComponentsService: HostingDynamicComponentService,\n    private addDynamicComponentService: AddDynamicComponentService,\n    private _zoomService: ZoomService,\n    private _templateService: TemplateService,\n    private _documentPageService: DocumentPageService) {\n\n    this._zoom = _zoomService.zoom;\n    _zoomService.zoomChange.subscribe((zoom: number) => {\n      this._zoom = zoom;\n    });\n\n    this._currentTemplateChangedSubscription = _templateService.currentTemplateChanged\n      .subscribe(template => this.setTemplate(template));\n\n    this.setTemplate(this._templateService.currentTemplate);\n\n    this._documentPageService.activePageChanged.subscribe(_ => this.updateActivePage());\n  }\n\n  doubleTap($event: TouchEvent) {\n    //  $event.preventDefault();\n  }\n\n  setActivePage($event) {\n    $event.preventDefault();\n\n    const position = Utils.getMousePosition($event);\n\n    const elements = document.elementsFromPoint(position.x, position.y);\n    const currentPage = elements.find(x => x.id && x.id.startsWith(\"page-\"));\n    if (currentPage) {\n      this._documentPageService.setActivePage(parseInt(currentPage.id.substring(\"page-\".length), 10));\n    }\n  }\n\n  private updateActivePage() {\n    const activePage = \"page-\" + this._documentPageService.activePage;\n\n    const elements = this.surface.nativeElement.querySelectorAll('gd-page');\n    elements.forEach(element => {\n      const child = (element as HTMLElement).children[0];\n      if (child.id === activePage) {\n        (child as HTMLElement).style.opacity = '1';\n        (child as HTMLElement).parentElement.parentElement.style.background = '#FFFFFF';\n      } else {\n        (child as HTMLElement).style.opacity = '0.5';\n        (child as HTMLElement).parentElement.parentElement.style.background = '#688296';\n      }\n    });\n  }\n\n  private setTemplate(template: Template) {\n    this._template = template;\n\n    if (this._fieldAddedSubscription) {\n      this._fieldAddedSubscription.unsubscribe();\n    }\n\n    if (this._fieldRemovedSubscription) {\n      this._fieldRemovedSubscription.unsubscribe();\n    }\n\n    if (!this._template) {\n      return;\n    }\n\n    this._fieldAddedSubscription = this._template.addedField.subscribe(field => this.addField(field));\n    this._fieldRemovedSubscription = this._template.removedField.subscribe(field => this.removeField(field));\n\n    this.removeFields();\n    this._template = template;\n    this._template.fields.forEach(field => {\n      this.addField(field);\n    });\n  }\n}\n\nclass FieldWrapper {\n  fieldComponent: FieldComponent;\n  contextMenuSubscription: Subscription;\n\n  constructor(public ref: any) {\n    this.fieldComponent = <FieldComponent>ref.instance;\n  }\n\n  destroy() {\n    if (this.ref) {\n      this.ref.destroy();\n    }\n\n    if (this.contextMenuSubscription) {\n      this.contextMenuSubscription.unsubscribe();\n    }\n  }\n}","import { Component, Input, OnInit, Output, EventEmitter, ViewChild } from '@angular/core';\nimport {\n  ModalComponent\n} from \"@groupdocs.examples.angular/common-components\";\n\n@Component({\n  selector: 'gd-confirmation-modal',\n  templateUrl: './confirmation-modal.component.html',\n  styleUrls: ['./confirmation-modal.component.less']\n})\nexport class ConfirmationModalComponent implements OnInit {\n  @Input() id: String;\n  @Input() title: String;\n  @Input() promptText: String;\n  @Input() acceptText: String;\n\n  @Input() operationId: String;\n\n  @Output() acceptEvent = new EventEmitter();\n  @Output() cancelEvent = new EventEmitter();\n\n  @ViewChild('modal', { static: true }) modalElement: ModalComponent;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  acceptClick() {\n      this.acceptEvent.emit(this.operationId);\n  }\n\n  cancelClick() {\n    if (this.modalElement) {\n      this.modalElement.cancelClose();\n    }\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { ParseResult, TableValue } from './app-models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UtilsService {\n\n  constructor() { }\n\n  generateCsvForParseResults(results: ParseResult[]): string {\n    let r = \"field, value\";\n\n    for (let i = 0; i < results.length; i++) {\n      r += \"\\r\\n\";\n\n      if (Array.isArray(results[i].value)) {\n        const table = new TableValue(results[i].value);\n        for (let row = 0; row < table.rows.length; row++) {\n          r += this.prepareCsvItem(results[i].name) + \",\";\n          for (let col = 0; col < table.rows[row].length; col++) {\n            if (col > 0) {\n              r += \",\";\n            }\n\n            r += this.prepareCsvItem(table.rows[row][col]);\n          }\n\n          if (row < table.rows.length - 1) {\n            r += \"\\r\\n\";\n          }\n        }\n      }\n      else {\n        r += this.prepareCsvItem(results[i].name) + \",\" + this.prepareCsvItem(results[i].value);\n      }\n    }\n\n    return r;\n  }\n\n  prepareCsvItem(item: string) {\n    if (!item) {\n      return \"\";\n    }\n\n    const ci = item.replace(/\"/g, '\"\"');\n\n    if (ci.indexOf(',') > -1\n      || ci.indexOf('\\r') > -1\n      || ci.indexOf('\"') > -1\n      || ci.indexOf(\"'\") > -1\n    ) {\n      return '\"' + ci + '\"';\n    }\n    else {\n      return ci;\n    }\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { TableValue } from '../app-models';\n\n@Component({\n  selector: 'gd-table-viewer',\n  templateUrl: './table-viewer.component.html',\n  styleUrls: ['./table-viewer.component.less']\n})\nexport class TableViewerComponent implements OnInit {\n  table : TableValue;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, OnDestroy, OnInit, ViewChild, ElementRef, Input } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { OperationState, ParseByTemplateResponse, ParseResult, TableValue, Template, TemplateField, TemplateId } from '../app-models';\nimport { RenameModalComponent } from '../rename-modal/rename-modal.component';\nimport { ConfirmationModalComponent } from '../confirmation-modal/confirmation-modal.component';\n\nimport {\n  AddDynamicComponentService,\n  CommonModals,\n  FileCredentials,\n  FileModel, Formatting,\n  HostingDynamicComponentService,\n  ModalService,\n  NavigateService, PagePreloadService, PasswordService,\n  TopTabActivatorService, UploadFilesService,\n  Utils,\n  WindowService,\n  ZoomService,\n  ExceptionMessageService\n} from \"@groupdocs.examples.angular/common-components\";\n\nimport { ParserService } from '../parser.service';\nimport { TemplateService } from '../template.service';\nimport { Subject, Subscription } from 'rxjs';\nimport { SourceFileService } from '../source-file.service';\nimport { UtilsService } from '../utils.service';\nimport { PlaceholderService } from '../placeholder.service';\nimport { TableViewerComponent } from '../table-viewer/table-viewer.component';\n\n@Component({\n  selector: 'gd-parser-side-panel',\n  templateUrl: './side-panel.component.html',\n  styleUrls: ['./side-panel.component.less']\n})\nexport class SidePanelComponent implements OnInit, OnDestroy {\n  @Input() fileNameForCsv: string;\n  \n  private _currentTemplateChangedSubscription: Subscription;\n  private _templateAddedSubscription: Subscription;\n  private _templateRemovedSubscription: Subscription;\n\n  private _currentTemplate: Template;\n  private _currentTemplateModifiedSubscription: Subscription;\n  private _parseState = new OperationState<ParseResult[]>();\n\n  @ViewChild('templateNameModal', { static: true }) templateNameModal: RenameModalComponent;\n  @ViewChild('templateRemoveModal', { static: true }) templateRemoveModal: ConfirmationModalComponent;\n  @ViewChild('uploadTemplate', { static: true }) uploadTemplate: ElementRef;\n  @ViewChild('tableViewer', { static: true }) tableViewer: TableViewerComponent;\n\n  constructor(\n    private _modalService: ModalService,\n    private _parserService: ParserService,\n    private _sourceFileService: SourceFileService,\n    private _templateService: TemplateService,\n    private _utilsService: UtilsService,\n    private _placeholderService: PlaceholderService) {\n\n    this.isDataMode = true;\n    this.isTemplateMode = false;\n\n    this._currentTemplateChangedSubscription = this._templateService.currentTemplateChanged\n      .subscribe(template => this.currentTemplate = template);\n    this._templateAddedSubscription = this._templateService.templateAddedSubject\n      .subscribe(template => this.templateIds.push(template));\n    this._templateRemovedSubscription = this._templateService.templateRemovedSubject\n      .subscribe(templateId => this.removeTemplateId(templateId));\n\n    this.currentTemplate = this._templateService.currentTemplate;\n    this.templateIds = [];\n    this._templateService.templateIds.forEach(element => {\n      this.templateIds.push(element);\n    });\n  }\n\n  templateIds: TemplateId[];\n  isTemplateMode: boolean;\n  isDataMode: boolean;\n\n  get parseState() {\n    return this._parseState;\n  }\n\n  get currentTemplate() {\n    return this._currentTemplate;\n  }\n\n  set currentTemplate(template: Template) {\n    if (this._currentTemplateModifiedSubscription) {\n      this._currentTemplateModifiedSubscription.unsubscribe();\n    }\n\n    this._currentTemplate = template;\n    this._currentTemplateModifiedSubscription = this._currentTemplate.modified\n      .subscribe(t => this.parseState.prompt = \"Template was changed. Please parse data again.\");\n\n    this.parseState.prompt = \"Press Parser to extract data by this template\";\n  }\n\n  ngOnDestroy() {\n    if (this._currentTemplateChangedSubscription) {\n      this._currentTemplateChangedSubscription.unsubscribe();\n    }\n\n    if (this._templateAddedSubscription) {\n      this._templateAddedSubscription.unsubscribe();\n    }\n\n    if (this._templateRemovedSubscription) {\n      this._templateRemovedSubscription.unsubscribe();\n    }\n  }\n\n  ngOnInit() {\n  }\n\n  manageTemplates() {\n    this.isDataMode = false;\n    this.isTemplateMode = true;\n  }\n\n  isCurrentTemplate(templateId: TemplateId) {\n    return this.currentTemplate && this.currentTemplate.id === templateId.id;\n  }\n\n  selectTemplateClick(templateId: TemplateId) {\n    if (!templateId) {\n      return;\n    }\n\n    this._templateService.selectTemplate(templateId);\n    this.showData();\n  }\n\n  createTemplateClick() {\n    this._templateService.createTemplate();\n  }\n\n  renameTemplateClick(templateId: TemplateId, $event) {\n    $event.stopPropagation();\n    $event.preventDefault();\n    if (templateId && this.templateNameModal) {\n      this.templateNameModal.operationId = templateId.id;\n      this.templateNameModal.initialValue = templateId.name;\n\n      this._modalService.open(\"TemplateNameModal\");\n    }\n  }\n\n  templateNameModalAccept(event) {\n    const templateId = event.id;\n    const templateName = event.newValue;\n\n    try {\n      this._templateService.renameTemplate({ id: templateId, name: templateName });\n    } catch (error) {\n      this.templateNameModal.error = error;\n      return;\n    }\n\n    this._modalService.close(\"TemplateNameModal\");\n  }\n\n  removeTemplateClick(templateId: TemplateId, $event) {\n    $event.stopPropagation();\n    $event.preventDefault();\n    if (this.templateRemoveModal) {\n      this.templateRemoveModal.operationId = templateId.id;\n      this.templateRemoveModal.promptText = \"Remove template <b>\" + templateId.name + \"</b>?\";\n\n      this._modalService.open(\"TemplateRemoveModal\");\n    }\n  }\n\n  templateRemoveModalAccept(operationId: string) {\n    this._modalService.close(\"TemplateRemoveModal\");\n    this._templateService.removeTemplate({ id: operationId, name: \"\" });\n  }\n\n  downloadTemplateClick(templateId: TemplateId, $event) {\n    $event.stopPropagation();\n    $event.preventDefault();\n    const templateJson = this._templateService.serialize(templateId);\n\n    const f = new File([templateJson], templateId.name + \".json\", {\n      type: \"text/plain\"\n    });\n\n    const fileUrl = window.URL.createObjectURL(f);\n\n    const fileLink = document.createElement('a');\n    fileLink.href = fileUrl;\n    fileLink.download = f.name;\n    fileLink.click();\n\n    URL.revokeObjectURL(fileUrl);\n  }\n\n  onFileSelected(event) {\n    const file: File = event.target.files[0];\n\n    if (file) {\n      const reader = new FileReader();\n\n      reader.readAsText(file);\n      reader.onload = x => {\n        this._templateService.deserialize(reader.result.toString());\n        this.uploadTemplate.nativeElement.value = null;\n      };\n    }\n  }\n\n  showData() {\n    this.isTemplateMode = false;\n    this.isDataMode = true;\n  }\n\n  parse() {\n    this.parseState.execute();\n\n    const state = this._placeholderService.startOperation(\"Parsing data...\");\n\n    const observer = {\n      next: (response: ParseByTemplateResponse) => {\n        this.parseState.result = response.data;\n      },\n      error: (err: any) => {        \n        this.parseState.error = this._parserService.getErrorMessage(err);\n        state.error(err);\n      },\n      complete: () => state.complete()\n    };\n\n    this._parserService.parseByTemplate(\n      this._sourceFileService.sourceFile,\n      null,\n      this._templateService.currentTemplate\n    ).subscribe(observer);\n  }\n\n  downloadResultsAsCsv() {\n    if (!this.parseState.isCompleted || this.parseState.result.length === 0) {\n      return;\n    }\n\n    const csv = this._utilsService.generateCsvForParseResults(this.parseState.result);\n\n    const f = new File([csv], this.fileNameForCsv ? this.fileNameForCsv + \" - data.csv\" : this._sourceFileService.sourceFile.guid + \" - data.csv\", {\n      type: \"text/plain\"\n    });\n\n    const fileUrl = window.URL.createObjectURL(f);\n\n    const fileLink = document.createElement('a');\n    fileLink.href = fileUrl;\n    fileLink.download = f.name;\n    fileLink.click();\n\n    URL.revokeObjectURL(fileUrl);\n  }\n\n  isArray(obj: any) {\n    return Array.isArray(obj)\n  }\n\n  showTableValue(value: any) {\n    const table = new TableValue(value);\n\n    this.tableViewer.table = table;\n    this._modalService.open(\"TableViewer\");\n  }\n\n  private removeTemplateId(templateId: TemplateId) {\n    for (let i = 0; i < this.templateIds.length; i++) {\n      if (this.templateIds[i].id === templateId.id) {\n        this.templateIds.splice(i, 1);\n        return;\n      }\n    }\n  }\n}","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { PlaceholderService } from '../placeholder.service';\n\n@Component({\n  selector: 'gd-placeholder',\n  templateUrl: './placeholder.component.html',\n  styleUrls: ['./placeholder.component.less']\n})\nexport class PlaceholderComponent implements OnInit, OnDestroy {\n  private _destroy = new Subject();\n\n  constructor(placeholderService: PlaceholderService) {\n    placeholderService.descriptionChanged\n      .pipe(takeUntil(this._destroy))\n      .subscribe(d => {\n        this.description = d;\n        this.progress = null;\n        this.isVisible = true;\n      });\n\n    let stateSubscription: Subscription;\n    placeholderService.stateChanged\n      .pipe(takeUntil(this._destroy))\n      .subscribe(state => {\n        if (stateSubscription) {\n          stateSubscription.unsubscribe();\n        }\n\n        const observer = {\n          next: progress => this.progress = progress,\n          error: err => this.isVisible = false,\n          complete: () => this.isVisible = false\n        };\n\n        stateSubscription = state.subscribe(observer);\n      });\n  }\n\n  description: string;\n  progress: number = null;\n  isVisible: boolean;\n\n  ngOnInit() {\n  }\n\n  ngOnDestroy(): void {\n    this._destroy.next();\n    this._destroy.complete();\n  }\n\n}\n","export class ParserConfig {\n    upload: boolean;\n    browse: boolean;\n    rewrite: boolean;\n}","import { Injectable } from '@angular/core';\nimport { ParserConfig } from \"./parser-config\";\nimport { Api, ConfigService } from \"@groupdocs.examples.angular/common-components\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { BehaviorSubject, Observable } from \"rxjs\";\nimport { stringify } from '@angular/compiler/src/util';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ParserConfigService {\n  private _parserConfig: BehaviorSubject<ParserConfig> = new BehaviorSubject(new ParserConfig());\n  private _updatedConfig: Observable<ParserConfig> = this._parserConfig.asObservable();\n\n  constructor(private _http: HttpClient, private _config: ConfigService) {\n  }\n\n  get updatedConfig() {\n    return this._updatedConfig;\n  }\n\n  load() {\n    return new Promise<void>((resolve, reject) => {\n      const configEndpoint = this._config.getConfigEndpoint(Api.PARSER_APP);\n      this._http.get(configEndpoint, Api.httpOptionsJson).toPromise().then((response: ParserConfig) => {\n        const parserConfig = <ParserConfig>response;\n        this._parserConfig.next(parserConfig);\n        resolve();\n      }).catch((response: any) => {\n        reject(`Could not load parser config: ${JSON.stringify(response)}`);\n      });\n    });\n  }\n}","import {APP_INITIALIZER, ModuleWithProviders, NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {\n  CommonComponentsModule, ExceptionMessageService,\n  ErrorInterceptorService, LoadingMaskInterceptorService, LoadingMaskService,\n  Api, ConfigService \n} from \"@groupdocs.examples.angular/common-components\";\n\nimport {FontAwesomeModule} from '@fortawesome/angular-fontawesome';\nimport {library} from \"@fortawesome/fontawesome-svg-core\";\nimport {fas} from \"@fortawesome/free-solid-svg-icons\";\nimport {far} from \"@fortawesome/free-regular-svg-icons\";\nimport { BrowserModule } from '@angular/platform-browser';\nimport { ClickOutsideModule } from \"ng-click-outside\";\nimport { ParserAppComponent } from './parser-app.component';\nimport { SurfaceComponent } from './surface/surface.component';\nimport { FieldComponent } from './field/field.component';\nimport { ConfirmationModalComponent } from './confirmation-modal/confirmation-modal.component';\nimport { SidePanelComponent } from './side-panel/side-panel.component';\nimport { RenameModalComponent } from './rename-modal/rename-modal.component';\nimport { PlaceholderComponent } from './placeholder/placeholder.component';\nimport { TableViewerComponent } from './table-viewer/table-viewer.component';\nimport { ParserConfigService } from './parser-config.service';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { ParserService } from './parser.service';\n\nexport function initializeApp(parserConfigService: ParserConfigService) {\n  const result = () => parserConfigService.load();\n  return result;\n}\n\n// NOTE: this is required during library compilation see https://github.com/angular/angular/issues/23629#issuecomment-440942981\n// @dynamic\nexport function setupLoadingInterceptor(service: LoadingMaskService) {\n  return new LoadingMaskInterceptorService(service);\n}\n\n@NgModule({\n  declarations: [\n    ParserAppComponent,\n    SurfaceComponent,\n    FieldComponent,\n    ConfirmationModalComponent,\n    SidePanelComponent,\n    RenameModalComponent,\n    PlaceholderComponent,\n    TableViewerComponent  \n  ],\n  imports: [\n    BrowserModule,\n    CommonComponentsModule, \n    HttpClientModule,\n    ClickOutsideModule,\n    FontAwesomeModule\n  ],  \n  exports: [ \n    ParserAppComponent,\n    FieldComponent,\n    CommonComponentsModule,\n    SurfaceComponent,\n    SidePanelComponent\n  ],\n  providers: [ \n    ParserService,\n    ConfigService,\n    ExceptionMessageService,\n    ParserConfigService,\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: ErrorInterceptorService,\n      multi: true\n    },\n    {\n      provide: APP_INITIALIZER,\n      useFactory: initializeApp,\n      deps: [ParserConfigService], multi: true\n    },\n    LoadingMaskService,\n    {\n      provide: HTTP_INTERCEPTORS,\n      useFactory: setupLoadingInterceptor,\n      multi: true,\n      deps: [LoadingMaskService]\n    }\n  ],\n\n  entryComponents: [ FieldComponent ],\n})\nexport class ParserModule { \n  constructor() {\n    library.add(fas, far);\n  }\n\n  static forRoot(apiEndpoint: string): ModuleWithProviders {\n    Api.DEFAULT_API_ENDPOINT = apiEndpoint;\n    return {\n      ngModule: ParserModule\n    };\n  }\n\n}\n"]}