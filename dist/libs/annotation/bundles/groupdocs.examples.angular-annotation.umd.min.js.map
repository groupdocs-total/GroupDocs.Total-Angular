{"version":3,"sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@groupdocs.examples.angular/annotation/lib/annotation-config.ts","ng://@groupdocs.examples.angular/annotation/lib/annotation-config.service.ts","ng://@groupdocs.examples.angular/annotation/lib/annotation.service.ts","ng://@groupdocs.examples.angular/annotation/lib/annotation-models.ts","ng://@groupdocs.examples.angular/annotation/lib/active-annotation.service.ts","ng://@groupdocs.examples.angular/annotation/lib/remove-annotation.service.ts","ng://@groupdocs.examples.angular/annotation/lib/comment-annotation.service.ts","ng://@groupdocs.examples.angular/annotation/lib/annotation/annotation.component.ts","ng://@groupdocs.examples.angular/annotation/lib/annotation-app.component.ts","ng://@groupdocs.examples.angular/annotation/lib/comment-panel/comment-panel.component.ts","ng://@groupdocs.examples.angular/annotation/lib/comment/comment.component.ts","ng://@groupdocs.examples.angular/annotation/lib/create-comment/create-comment.component.ts","ng://@groupdocs.examples.angular/annotation/lib/annotation.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__values","o","m","Symbol","iterator","i","call","next","length","value","done","AnnotationConfig","AnnotationConfigService","_http","_config","this","_annotationConfig","BehaviorSubject","_updatedConfig","asObservable","defineProperty","prototype","load","_this","Promise","resolve","reject","configEndpoint","getConfigEndpoint","Api","ANNOTATION_APP","get","httpOptionsJson","toPromise","then","response","annotationConfig","catch","JSON","stringify","Injectable","args","providedIn","HttpClient","ConfigService","AnnotationService","loadFiles","path","post","getAnnotationApiEndpoint","LOAD_FILE_TREE","loadFile","credentials","LOAD_DOCUMENT_DESCRIPTION","upload","file","url","rewrite","formData","FormData","append","String","UPLOAD_DOCUMENTS","loadPage","page","LOAD_DOCUMENT_PAGE","guid","password","getDownloadUrl","DOWNLOAD_DOCUMENTS","annotate","annotationsData","print","data","documentType","FileUtil","find","format","ANNOTATE","AnnotationType","getAnnotationType","id","TEXT","AREA","POINT","TEXT_STRIKEOUT","POLYLINE","TEXT_FIELD","WATERMARK","TEXT_REPLACEMENT","ARROW","TEXT_REDACTION","TEXT_UNDERLINE","DISTANCE","name","icon","_super","PageAnnotationModel","__","constructor","create","tslib_1.__extends","PageModel","Position","left","top","clone","position","Dimension","width","height","isNone","AnnotationData","text","fontColor","CommentAnnotation","Comment","time","Date","now","userName","comment","ret","RemoveAnnotation","ActiveAnnotationService","_observer","Subject","_activeChange","changeActive","annId","RemoveAnnotationService","_removeAnnotation","remove","CommentAnnotationService","_commentAnnotation","_observerAddComment","_addCommentObserve","addComment","$","jquery","AnnotationComponent","_activeAnnotationService","_removeAnnotationService","_commentAnnotationService","_zoomService","active","dimension","textValue","distanceValue","pointsValue","svgPath","formatting","Formatting","default","points","activeChange","subscribe","setTextFocus","isOnPage","currentPage","document","elementFromPoint","x","y","parent","hasClass","ngOnInit","leftTop","isPolyline","parsedPoints","replace","split","x_1","parseFloat","y_1","comp_1","forEach","point","index","addPoint","isPath","type","end","setEndPosition","getDistance","initPoint","ngAfterViewInit","ngAfterViewChecked","changeZoom","zoom","activation","$event","checkDragging","correctPosition","refreshLeftTop","pageHeight","pageWidth","dragOver","preventDefault","stopPropagation","dragStart","oldPosition","Utils","getMousePosition","dataTransfer","setData","dragging","top_1","_b","tslib_1.__values","_c","endPosition","pathValue","getAnnotationClass","isStrikeoutOrUnderline","isTextReplacement","saveText","draw","onPage","calcPositionAndDimension","setStyles","stroke","stroke-width","fill-opacity","isDistance","class","Number","MAX_VALUE","rightBottom","MIN_VALUE","Math","min","max","calcDimensions","currentPosition","getHeight","undefined","abs","getWidth","isPoint","isSVG","distanceTextOptions","font-size","push","xs","ys","round","sqrt","bottom","window","location","head","getTextX","isText","getFormatting","f","fontSize","font","color","saveFormatting","getMenuShift","menuWidth","getMenuType","MenuType","FOR_ANNOTATION","setTimeout","element","focus","textAreaHeight","key","textarea","scrollHeight","scrollWidth","hideMenu","getAnnotationData","annotationData","parseInt","toHex","pageNumber","getSvgPath","previousX","previousY","Component","selector","template","ZoomService","AnnotationAppComponent","_annotationService","_modalService","_navigateService","_tabActivatorService","_hostingComponentsService","_addDynamicComponentService","uploadFilesService","pagePreloadService","passwordService","_windowService","configService","title","files","browseFilesModal","CommonModals","BrowseFiles","formatDisabled","annotationTypes","annotationTypeFirst","annotationTypeSecond","annotationTypeThird","countPages","comments","Map","_zoom","fileWasDropped","annotations","updatedConfig","isDesktop","onResize","w","refreshZoom","activeAnnotationId","commentOpenedId","commentAnnotation","set","addCommentObserve","removeAnnotation","componentRef","destroy","delete","uploadsChange","uploads","item","rewriteConfig","obj","selectFile","selectDir","checkPreload","preloadPageCountConfig","pages","preloadPages","passChange","pass","PasswordRequired","getComments","pageSelector","preloadPageCount","download","downloadOriginal","downloadAnnotated","defaultDocumentConfig","defaultDocument","browse","enableRightClick","textAnnotation","areaAnnotation","pointAnnotation","textStrikeoutAnnotation","polylineAnnotation","textFieldAnnotation","watermarkAnnotation","textReplacementAnnotation","arrowAnnotation","textRedactionAnnotation","textUnderlineAnnotation","distanceAnnotation","isLoading","ptToPx","pt","getFitToWidth","_pageWidth","_pageHeight","offsetWidth","innerWidth","zoomIn","zoomOut","openModal","open","closeModal","close","modalId","FileCredentials","cleanAnnotations","importAnnotations","clearData","start","this_1","annotations_1","annotations_1_1","annotation","addAnnotationComponent","onRightClick","enableRightClickConfig","downloadFile","assign","prepareAnnotationsData","OperationSuccess","values","isVisible","supported","supportedAnnotations","getAnnotationTypeConfig","activeTab","activeAnnotationTab","codesConfigFirst","checkConfig","codesConfigSecond","annotationList","annotationList_1","annotationList_1_1","annotationType","codesConfigThird","textAnnotationConfig","areaAnnotationConfig","pointAnnotationConfig","textStrikeoutAnnotationConfig","polylineAnnotationConfig","textFieldAnnotationConfig","watermarkAnnotationConfig","textReplacementAnnotationConfig","arrowAnnotationConfig","textRedactionAnnotationConfig","textUnderlineAnnotationConfig","distanceAnnotationConfig","fileDropped","createAnnotation","elementsFromPoint","startsWith","documentPage","getCurrentPosition","pageId","creatingAnnotationId","changeActiveTab","dynamicDirective","viewContainerRef","annotationComponent","addDynamicComponent","getNextId","toString","pageModel","number","resizingCreatingAnnotation","offset","finishCreatingAnnotation","closeComments","onPan","maxId","keys","ModalService","NavigateService","TopTabActivatorService","HostingDynamicComponentService","AddDynamicComponentService","UploadFilesService","PagePreloadService","PasswordService","WindowService","CommentPanelComponent","EventEmitter","closePanel","emit","newComment","currentComment","annotationId","clearComment","Input","Output","CommentComponent","getTime","hours","sec","CreateCommentComponent","removeComment","onAddComment","saveName","initializeApp","annotationConfigService","setupLoadingInterceptor","service","LoadingMaskInterceptorService","AnnotationModule","library","add","fas","far","forRoot","apiEndpoint","DEFAULT_API_ENDPOINT","ngModule","NgModule","declarations","exports","CommonComponentsModule","imports","CommonModule","HttpClientModule","FontAwesomeModule","ClickOutsideModule","providers","provide","HTTP_INTERCEPTORS","useClass","ErrorInterceptorService","multi","APP_INITIALIZER","useFactory","deps","LoadingMaskService","entryComponents"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","export class AnnotationConfig {\n  rewrite: boolean;\n  pageSelector: boolean;\n  download: boolean;\n  upload: boolean;\n  print: boolean;\n  browse: boolean;\n  enableRightClick: boolean;\n\n  filesDirectory: string;\n  fontsDirectory: string;\n  defaultDocument: string;\n  preloadPageCount: 0;\n\n  textAnnotation: boolean;\n  areaAnnotation: boolean;\n  pointAnnotation: boolean;\n  textStrikeoutAnnotation: boolean;\n  polylineAnnotation: boolean;\n  textFieldAnnotation: boolean;\n  watermarkAnnotation: boolean;\n  textReplacementAnnotation: boolean;\n  arrowAnnotation: boolean;\n  textRedactionAnnotation: boolean;\n  textUnderlineAnnotation: boolean;\n  distanceAnnotation: boolean;\n  downloadOriginal: boolean;\n  downloadAnnotated: boolean;\n\n  zoom: boolean;\n}\n","import {Injectable} from '@angular/core';\nimport {BehaviorSubject, Observable} from \"rxjs\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {Api, ConfigService} from \"@groupdocs.examples.angular/common-components\";\nimport {AnnotationConfig} from \"./annotation-config\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnnotationConfigService {\n\n  private _annotationConfig: BehaviorSubject<AnnotationConfig> = new BehaviorSubject(new AnnotationConfig());\n  private _updatedConfig: Observable<AnnotationConfig> = this._annotationConfig.asObservable();\n\n  constructor(private _http: HttpClient, private _config: ConfigService) {\n  }\n\n  get updatedConfig() {\n    return this._updatedConfig;\n  }\n\n  load() {\n    return new Promise<void>((resolve, reject) => {\n      const configEndpoint = this._config.getConfigEndpoint(Api.ANNOTATION_APP);\n      this._http.get(configEndpoint, Api.httpOptionsJson).toPromise().then((response: AnnotationConfig) => {\n        const annotationConfig = <AnnotationConfig>response;\n        this._annotationConfig.next(annotationConfig);\n        resolve();\n      }).catch((response: any) => {\n        reject(`Could not load annotation config: ${JSON.stringify(response)}`);\n      });\n    });\n  }\n}\n","import {Injectable} from '@angular/core';\nimport {HttpClient} from \"@angular/common/http\";\nimport {Api, ConfigService, FileCredentials, FileUtil} from \"@groupdocs.examples.angular/common-components\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnnotationService {\n\n  constructor(private _http: HttpClient, private _config: ConfigService) {\n  }\n\n  loadFiles(path: string) {\n    return this._http.post(this._config.getAnnotationApiEndpoint() + Api.LOAD_FILE_TREE, {'path': path}, Api.httpOptionsJson);\n  }\n\n  loadFile(credentials: FileCredentials) {\n    return this._http.post(this._config.getAnnotationApiEndpoint() + Api.LOAD_DOCUMENT_DESCRIPTION, credentials, Api.httpOptionsJson);\n  }\n\n  upload(file: File, url: string, rewrite: boolean) {\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    formData.append('rewrite', String(rewrite));\n    if (url) {\n      formData.append(\"url\", url);\n    }\n\n    return this._http.post(this._config.getAnnotationApiEndpoint() + Api.UPLOAD_DOCUMENTS, formData);\n  }\n\n  loadPage(credentials: FileCredentials, page: number) {\n    return this._http.post(this._config.getAnnotationApiEndpoint() + Api.LOAD_DOCUMENT_PAGE, {\n      'guid': credentials.guid,\n      'password': credentials.password,\n      'page': page\n    }, Api.httpOptionsJson);\n  }\n\n  getDownloadUrl(credentials: FileCredentials) {\n    return this._config.getAnnotationApiEndpoint() + Api.DOWNLOAD_DOCUMENTS + '/?path=' + credentials.guid;\n  }\n\n  annotate(credentials: FileCredentials, annotationsData: any, print: boolean) {\n    const data = {\n      'guid': credentials.guid,\n      'password': credentials.password,\n      'annotationsData': annotationsData,\n      'documentType': FileUtil.find(credentials.guid, false).format,\n      'print': print\n    };\n    return this._http.post(this._config.getAnnotationApiEndpoint() + Api.ANNOTATE, data, Api.httpOptionsJson);\n  }\n}\n","import {PageModel} from \"@groupdocs.examples.angular/common-components\";\n\nexport class AnnotationType {\n  public static TEXT = {id: 'textHighlight', name: 'Text', icon: 'highlighter'};\n  public static AREA = {id: 'area', name: 'Area', icon: 'vector-square'};\n  public static POINT = {id: 'point', name: 'Point', icon: 'thumbtack'};\n  public static TEXT_STRIKEOUT = {id: 'textStrikeout', name: 'Text strikeout', icon: 'strikethrough',};\n  public static POLYLINE = {id: 'polyline', name: 'Polyline', icon: 'signature'};\n  public static TEXT_FIELD = {id: 'textField', name: 'Text field', icon: 'i-cursor'};\n  public static WATERMARK = {id: 'watermark', name: 'Watermark', icon: 'tint'};\n  public static TEXT_REPLACEMENT = {id: 'textReplacement', name: 'Text replacement', icon: 'edit'};\n  public static ARROW = {id: 'arrow', name: 'Arrow', icon: 'mouse-pointer'};\n  public static TEXT_REDACTION = {id: 'textRedaction', name: 'Text redaction', icon: 'brush'};\n  public static TEXT_UNDERLINE = {id: 'textUnderline', name: 'Text underline', icon: 'underline'};\n  public static DISTANCE = {id: 'distance', name: 'Distance', icon: 'ruler'};\n\n  public static getAnnotationType(id: string) {\n    switch (id) {\n      case AnnotationType.TEXT.id:\n        return AnnotationType.TEXT;\n      case AnnotationType.AREA.id:\n        return AnnotationType.AREA;\n      case AnnotationType.POINT.id:\n        return AnnotationType.POINT;\n      case AnnotationType.TEXT_STRIKEOUT.id:\n        return AnnotationType.TEXT_STRIKEOUT;\n      case AnnotationType.POLYLINE.id:\n        return AnnotationType.POLYLINE;\n      case AnnotationType.TEXT_FIELD.id:\n        return AnnotationType.TEXT_FIELD;\n      case AnnotationType.WATERMARK.id:\n        return AnnotationType.WATERMARK;\n      case AnnotationType.TEXT_REPLACEMENT.id:\n        return AnnotationType.TEXT_REPLACEMENT;\n      case AnnotationType.ARROW.id:\n        return AnnotationType.ARROW;\n      case AnnotationType.TEXT_REDACTION.id:\n        return AnnotationType.TEXT_REDACTION;\n      case AnnotationType.TEXT_UNDERLINE.id:\n        return AnnotationType.TEXT_UNDERLINE;\n      case AnnotationType.DISTANCE.id:\n        return AnnotationType.DISTANCE;\n    }\n  }\n}\n\nexport class FileAnnotationDescription {\n  guid: string;\n  pages: PageAnnotationModel[];\n  supportedAnnotations: string[];\n}\n\nexport class PageAnnotationModel extends PageModel {\n  annotations: AnnotationData[];\n}\n\nexport class Position {\n  left: number;\n  top: number;\n\n  constructor(left: number, top: number) {\n    this.left = left;\n    this.top = top;\n  }\n\n  static clone(position: Position) {\n    return new Position(position.left, position.top);\n  }\n}\n\nexport class Dimension {\n  width: number;\n  height: number;\n\n  constructor(width: number, height: number) {\n    this.width = width;\n    this.height = height;\n  }\n\n  isNone() {\n    return this.width === 0 && this.height === 0;\n  }\n}\n\nexport class AnnotationData {\n\n  constructor() {\n    this.text = \"\";\n    this.fontColor = 8421375;\n  }\n\n  id: number;\n  comments: Comment[];\n  text: string;\n  font: string;\n  fontSize: number;\n  fontColor: number;\n  height: number;\n  width: number;\n  left: number;\n  top: number;\n  pageNumber: number;\n  svgPath: string;\n  type: string;\n}\n\nexport class CommentAnnotation {\n  constructor(id: number) {\n    this.id = id;\n  }\n\n  id: number;\n}\n\nexport class Comment {\n\n  id: number;\n  text: string;\n  userName: string;\n  time: number;\n\n  constructor(id: number) {\n    this.id = id;\n    this.time = Date.now();\n    this.text = \"\";\n    this.userName = \"\";\n  }\n\n  static create(comment) {\n    const ret = new Comment(comment.id);\n    ret.text = comment.text;\n    ret.userName = comment.userName;\n    ret.time = comment.time;\n    return ret;\n  }\n}\n\nexport class RemoveAnnotation {\n  constructor(id: number) {\n    this.id = id;\n  }\n\n  id: number;\n}\n","import {Observable, Subject} from \"rxjs\";\n\nexport class ActiveAnnotationService {\n  private _observer: Subject<number> = new Subject();\n  private readonly _activeChange: Observable<number> = this._observer.asObservable();\n\n  constructor() {\n  }\n\n  get activeChange(): Observable<number> {\n    return this._activeChange;\n  }\n\n  changeActive(annId: number) {\n    this._observer.next(annId);\n  }\n}\n\n","import {Observable, Subject} from \"rxjs\";\nimport {RemoveAnnotation} from \"./annotation-models\";\n\nexport class RemoveAnnotationService {\n  private _observer: Subject<RemoveAnnotation> = new Subject();\n  private readonly _removeAnnotation: Observable<RemoveAnnotation> = this._observer.asObservable();\n\n  constructor() {\n  }\n\n  get removeAnnotation(): Observable<RemoveAnnotation> {\n    return this._removeAnnotation;\n  }\n\n  remove(id: RemoveAnnotation): void {\n    this._observer.next(id);\n  }\n}\n","import {Observable, Subject} from \"rxjs\";\nimport {CommentAnnotation, Comment} from \"./annotation-models\";\n\nexport class CommentAnnotationService {\n  private _observer: Subject<CommentAnnotation> = new Subject();\n  private readonly _commentAnnotation: Observable<CommentAnnotation> = this._observer.asObservable();\n  private _observerAddComment: Subject<Comment> = new Subject();\n  private readonly _addCommentObserve: Observable<Comment> = this._observerAddComment.asObservable();\n\n  constructor() {\n  }\n\n  get commentAnnotation(): Observable<CommentAnnotation> {\n    return this._commentAnnotation;\n  }\n\n  comment(id: CommentAnnotation): void {\n    this._observer.next(id);\n  }\n\n  get addCommentObserve(): Observable<Comment> {\n    return this._addCommentObserve;\n  }\n\n  addComment(comment: Comment) {\n    this._observerAddComment.next(comment);\n  }\n\n}\n","import {AfterViewInit, Component, OnInit, AfterViewChecked} from '@angular/core';\nimport {\n  AnnotationData,\n  AnnotationType,\n  CommentAnnotation,\n  Dimension,\n  Position,\n  RemoveAnnotation\n} from \"../annotation-models\";\nimport {ActiveAnnotationService} from \"../active-annotation.service\";\nimport {Formatting, Utils, MenuType, ZoomService} from \"@groupdocs.examples.angular/common-components\";\nimport {RemoveAnnotationService} from \"../remove-annotation.service\";\nimport {CommentAnnotationService} from \"../comment-annotation.service\";\nimport * as jquery from 'jquery';\n\nconst $ = jquery;\n\n@Component({\n  selector: 'gd-annotation',\n  templateUrl: './annotation.component.html',\n  styleUrls: ['./annotation.component.less']\n})\nexport class AnnotationComponent implements OnInit, AfterViewInit, AfterViewChecked {\n\n  id: number;\n  position: Position;\n  leftTop: Position;\n  type: string;\n  pageWidth: number;\n  pageHeight: number;\n  active = true;\n  dimension = new Dimension(0, 0);\n  pageNumber: number;\n  textValue = \"\";\n  pathValue: string;\n  distanceValue = '0px';\n  pointsValue = \"\";\n  svgPath = \"\";\n  formatting = Formatting.default();\n\n  private oldPosition: { x: number; y: number };\n  private points = [];\n  private endPosition: Position;\n\n  constructor(private _activeAnnotationService: ActiveAnnotationService,\n              private _removeAnnotationService: RemoveAnnotationService,\n              private _commentAnnotationService: CommentAnnotationService,\n              private _zoomService: ZoomService) {\n    this._activeAnnotationService.activeChange.subscribe((id: number) => {\n      this.active = this.id === id;\n      if (this.active) {\n        this.setTextFocus();\n      }\n    });\n  }\n\n  static isOnPage(position) {\n    const currentPage = document.elementFromPoint(position.x, position.y);\n    return currentPage && $(currentPage).parent().parent() &&\n      ($(currentPage).parent().parent().parent().hasClass(\"page\") ||\n        $(currentPage).parent().parent().parent().parent().parent().hasClass(\"page\"));\n  }\n\n  ngOnInit() {\n    this.leftTop = Position.clone(this.position);\n    if (this.isPolyline()) {\n      if (this.svgPath) {\n        const parsedPoints = this.svgPath.replace(\"M\", \"\").split('L');\n        let x = parseFloat(parsedPoints[0].split(\",\")[0]);\n        let y = parseFloat(parsedPoints[0].split(\",\")[1]);\n        const comp = this;\n        parsedPoints.forEach(function (point, index) {\n          if (index !== 0) {\n            if (point !== \"\") {\n              comp.addPoint(new Position(x, y));\n              x = (x + parseFloat(point.split(\",\")[0]));\n              y = (y + parseFloat(point.split(\",\")[1]));\n            }\n          }\n        });\n      } else {\n        this.addPoint(this.position);\n      }\n    } else if (this.isPath()) {\n      if (this.svgPath || (this.type === AnnotationType.ARROW.id && !this.dimension.isNone())) {\n        const end = new Position(this.position.left + this.dimension.width, this.position.top + this.dimension.height);\n        this.setEndPosition(end);\n        if (this.dimension.height < 0) {\n          this.leftTop.top += this.dimension.height;\n          this.dimension.height = this.dimension.height * (-1);\n        }\n        if (this.dimension.width < 0) {\n          this.leftTop.left += this.dimension.width;\n          this.dimension.width = this.dimension.width * (-1);\n        }\n      } else {\n        this.setEndPosition(this.position);\n      }\n      this.distanceValue = this.getDistance() + \"px\";\n    } else if (this.type === AnnotationType.POINT.id) {\n      this.initPoint();\n    } else {\n      this.setEndPosition(this.position);\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.setTextFocus();\n  }\n\n  ngAfterViewChecked() {\n    this._zoomService.changeZoom(this._zoomService.zoom);\n  }\n\n  activation() {\n    this._activeAnnotationService.changeActive(this.id);\n  }\n\n  width($event) {\n    if (this.checkDragging($event, 0)) {\n      this.dimension.width += $event;\n    }\n  }\n\n  height($event) {\n    if (this.checkDragging(0, $event)) {\n      this.dimension.height += $event;\n    }\n  }\n\n  left($event) {\n    this.position.left += $event;\n    this.correctPosition();\n    this.refreshLeftTop();\n  }\n\n  top($event) {\n    this.position.top += $event;\n    this.correctPosition();\n    this.refreshLeftTop();\n  }\n\n  private refreshLeftTop() {\n    this.leftTop.left = this.position.left;\n    this.leftTop.top = this.position.top;\n  }\n\n  private correctPosition() {\n    if (this.position.left < 0) {\n      this.position.left = 0;\n    }\n    if (this.position.top < 0) {\n      this.position.top = 0;\n    }\n    if (this.position.top + this.dimension.height > this.pageHeight) {\n      this.position.top = this.pageHeight - this.dimension.height;\n    }\n    if (this.position.left + this.dimension.width > this.pageWidth) {\n      this.position.left = this.pageWidth - this.dimension.width;\n    }\n  }\n\n  dragOver($event: DragEvent) {\n    $event.preventDefault();\n    $event.stopPropagation();\n  }\n\n  dragStart($event: DragEvent) {\n    $event.preventDefault();\n    this.oldPosition = Utils.getMousePosition($event);\n    if ($event.dataTransfer) {\n      $event.dataTransfer.setData('text', 'foo');\n    }\n  }\n\n  initPoint() {\n    this.dimension = new Dimension(40, 40);\n    this.position.left = this.position.left - 20;\n    this.position.top = this.position.top - 20;\n    this.leftTop = Position.clone(this.position);\n  }\n\n  dragging($event) {\n    $event.preventDefault();\n    const position = Utils.getMousePosition($event);\n    if (position.x && position.y && AnnotationComponent.isOnPage(position)) {\n      const left = position.x - this.oldPosition.x;\n      const top = position.y - this.oldPosition.y;\n      if (this.isPolyline()) {\n        if (!this.checkDragging(left, top)) {\n          return;\n        }\n        this.pointsValue = \"\";\n        for (const point of this.points) {\n          point.left = point.left + left;\n          point.top = point.top + top;\n          this.pointsValue += point.left + \",\" + point.top + \" \";\n        }\n        this.leftTop.left += left;\n        this.leftTop.top += top;\n      } else if (this.isPath()) {\n        if (!this.checkDragging(left, top)) {\n          return;\n        }\n        this.position.left += left;\n        this.position.top += top;\n        this.endPosition.left += left;\n        this.endPosition.top += top;\n        this.pathValue = \"M\" + this.position.left + \",\" + this.position.top + \" L\" + this.endPosition.left + \",\" + this.endPosition.top;\n        this.distanceValue = this.getDistance() + \"px\";\n        this.leftTop.left += left;\n        this.leftTop.top += top;\n      } else {\n        this.position.left += left;\n        this.position.top += top;\n        this.correctPosition();\n        this.refreshLeftTop();\n      }\n      this.oldPosition = position;\n    }\n  }\n\n  getAnnotationClass() {\n    switch (this.type) {\n      case AnnotationType.TEXT.id:\n        return \"gd-annotation-wrapper-border gd-text-annotation\";\n      case AnnotationType.TEXT_STRIKEOUT.id:\n        return \"gd-annotation-wrapper-border gd-text-annotation gd-text-strikeout-annotation\";\n      case AnnotationType.TEXT_UNDERLINE.id:\n        return \"gd-annotation-wrapper-border gd-text-annotation gd-text-underline-annotation\";\n      case AnnotationType.TEXT_REDACTION.id:\n        return \"gd-annotation-wrapper-border gd-text-redaction-annotation\";\n      case AnnotationType.TEXT_REPLACEMENT.id:\n        return \"gd-annotation-wrapper-border gd-text-replacement-annotation\";\n      case AnnotationType.POINT.id:\n        return \"\";\n      default:\n        return \"gd-annotation-wrapper-border\";\n    }\n  }\n\n  isStrikeoutOrUnderline() {\n    return this.type === AnnotationType.TEXT_STRIKEOUT.id || this.type === AnnotationType.TEXT_UNDERLINE.id;\n  }\n\n  isTextReplacement() {\n    return this.type === AnnotationType.TEXT_REPLACEMENT.id;\n  }\n\n  saveText(value: string) {\n    this.textValue = value;\n  }\n\n  draw(position: Position) {\n    if (this.onPage(position)) {\n      if (this.isPolyline()) {\n        this.addPoint(position);\n      } else if (this.isPath()) {\n        this.setEndPosition(position);\n        this.distanceValue = this.getDistance() + \"px\";\n      }\n      this.calcPositionAndDimension();\n    }\n  }\n\n  setStyles() {\n    return {\n      'stroke': '#579AF0',\n      'stroke-width': 2,\n      'fill-opacity': 0,\n      'id': (this.isPolyline() ? 'gd-polyline-annotation-' : (this.isDistance() ? 'gd-distance-annotation-' : 'gd-arrow-annotation-')) + this.id,\n      'class': 'annotation-svg',\n    };\n  }\n\n  isPolyline() {\n    return this.type === AnnotationType.POLYLINE.id;\n  }\n\n  private calcPositionAndDimension() {\n    const leftTop = new Position(Number.MAX_VALUE, Number.MAX_VALUE);\n    const rightBottom = new Position(Number.MIN_VALUE, Number.MIN_VALUE);\n    if (this.isPolyline()) {\n      for (const point of this.points) {\n        leftTop.left = Math.min(point.left, leftTop.left);\n        leftTop.top = Math.min(point.top, leftTop.top);\n        rightBottom.left = Math.max(point.left, rightBottom.left);\n        rightBottom.top = Math.max(point.top, rightBottom.top);\n      }\n    } else {\n      leftTop.left = Math.min(this.position.left, this.endPosition.left);\n      leftTop.top = Math.min(this.position.top, this.endPosition.top);\n      rightBottom.left = Math.max(this.position.left, this.endPosition.left);\n      rightBottom.top = Math.max(this.position.top, this.endPosition.top);\n    }\n    this.dimension.width = rightBottom.left - leftTop.left;\n    this.dimension.height = rightBottom.top - leftTop.top;\n    this.leftTop = leftTop;\n  }\n\n  calcDimensions(currentPosition: Position) {\n    if (currentPosition.left <= this.pageWidth && currentPosition.left >= 0) {\n      this.dimension.width = currentPosition.left - this.position.left;\n    }\n    if (currentPosition.top <= this.pageHeight && currentPosition.top >= 0) {\n      this.dimension.height = currentPosition.top - this.position.top;\n    }\n  }\n\n  getHeight() {\n    return this.dimension.height === undefined ? undefined : Math.abs(this.dimension.height);\n  }\n\n  getWidth() {\n    return this.dimension.width === undefined ? undefined : Math.abs(this.dimension.width);\n  }\n\n  private checkDragging(left: number, top: number) {\n    return !(this.leftTop.left + left < 0 || this.leftTop.top + top < 0 ||\n      this.leftTop.top + top + this.dimension.height > this.pageHeight ||\n      this.leftTop.left + left + this.dimension.width > this.pageWidth);\n  }\n\n  isPoint() {\n    return this.type === AnnotationType.POINT.id;\n  }\n\n  isSVG() {\n    return this.type === AnnotationType.POLYLINE.id ||\n      this.type === AnnotationType.DISTANCE.id ||\n      this.type === AnnotationType.ARROW.id;\n  }\n\n  isDistance() {\n    return this.type === AnnotationType.DISTANCE.id;\n  }\n\n  distanceTextOptions() {\n    return {'font-size': \"12px\"}\n  }\n\n  isPath() {\n    return this.type === AnnotationType.DISTANCE.id ||\n      this.type === AnnotationType.ARROW.id;\n  }\n\n  private setEndPosition(position: Position) {\n    this.endPosition = Position.clone(position);\n    this.pathValue = \"M\" + this.position.left + \",\" + this.position.top + \" L\" + this.endPosition.left + \",\" + this.endPosition.top;\n  }\n\n  private addPoint(position: Position) {\n    this.points.push(position);\n    this.pointsValue += position.left + \",\" + position.top + \" \";\n  }\n\n  private getDistance() {\n    const xs = this.position.left - this.endPosition.left;\n    const ys = this.position.top - this.endPosition.top;\n    return Math.round(Math.sqrt(xs * xs + ys * ys));\n  }\n\n  bottom() {\n    return 'url(' + window.location + '#end)';\n  }\n\n  head() {\n    return this.isDistance() ? 'url(' + window.location + '#start)' : \"\";\n  }\n\n  getTextX() {\n    return this.getDistance() / 2;\n  }\n\n  isText() {\n    return this.type === AnnotationType.TEXT_FIELD.id || this.type === AnnotationType.WATERMARK.id;\n  }\n\n  getFormatting() {\n    const f = this.formatting;\n    const formatting = Formatting.default();\n    if (f) {\n      formatting.fontSize = f.fontSize;\n      formatting.font = f.font;\n      formatting.color = f.color;\n    }\n    return formatting;\n  }\n\n  saveFormatting($event: Formatting) {\n    this.formatting.fontSize = $event.fontSize;\n    this.formatting.font = $event.font;\n    this.formatting.color = $event.color;\n  }\n\n  remove() {\n    this._removeAnnotationService.remove(new RemoveAnnotation(this.id));\n  }\n\n  getMenuShift() {\n    const menuWidth = this.isText() ? 265 : 111;\n    return this.dimension.width > menuWidth ? 0 : (this.dimension.width - menuWidth) * 0.5;\n  }\n\n  getMenuType() {\n    return MenuType.FOR_ANNOTATION;\n  }\n\n  addComment() {\n    this._commentAnnotationService.comment(new CommentAnnotation(this.id));\n  }\n\n  private setTextFocus() {\n    if (this.isText() || this.isTextReplacement()) {\n      setTimeout(() => {\n        const element = $(\"#text-\" + this.id);\n        if (element) {\n          element.focus();\n        }\n      }, 100);\n    }\n  }\n\n  textAreaHeight(key: any, textarea: any) {\n    this.dimension.height = \"Enter\" === key ? textarea.scrollHeight + this.formatting.fontSize : textarea.scrollHeight;\n    this.dimension.width = textarea.scrollWidth;\n  }\n\n  hideMenu($event: Event) {\n    this._activeAnnotationService.changeActive(null);\n  }\n\n  getAnnotationData(): AnnotationData {\n    const annotationData = new AnnotationData();\n    annotationData.id = this.id;\n    annotationData.text = this.textValue;\n    annotationData.fontColor = parseInt(Utils.toHex(this.formatting.color).replace(\"#\", \"\"), 16);\n    annotationData.fontSize = this.formatting.fontSize;\n    annotationData.font = this.formatting.font;\n    if (this.type === AnnotationType.POINT.id) {\n      annotationData.left = this.leftTop.left + 20;\n      annotationData.top = this.leftTop.top + 20;\n      annotationData.height = 0;\n      annotationData.width = 0;\n    } else {\n      annotationData.left = this.leftTop.left;\n      annotationData.top = this.leftTop.top;\n      annotationData.height = this.dimension.height;\n      annotationData.width = this.dimension.width;\n    }\n    annotationData.pageNumber = this.pageNumber;\n    annotationData.type = this.type;\n    annotationData.svgPath = this.getSvgPath();\n    return annotationData;\n  }\n\n  private getSvgPath() {\n    let svgPath = \"M\";\n    if (this.type === AnnotationType.POLYLINE.id) {\n      let index = 0;\n      let previousX = 0, previousY = 0;\n      for (const point of this.points) {\n        if (index === 0) {\n          svgPath += point.left + \",\" + point.top + \"l\";\n          index = 1;\n        } else {\n          previousX = point.left - previousX;\n          previousY = point.top - previousY;\n          svgPath += previousX + \",\" + previousY + \"l\";\n        }\n        previousX = point.left;\n        previousY = point.top;\n      }\n    } else if (this.type === AnnotationType.DISTANCE.id || this.type === AnnotationType.ARROW.id) {\n      svgPath += this.position.left + \",\" + this.position.top + \" \";\n      svgPath += this.endPosition.left + \",\" + this.endPosition.top + \" \";\n    } else {\n      svgPath = \"\";\n    }\n    return svgPath;\n  }\n\n  private onPage(position: Position) {\n    return position.left <= this.pageWidth && position.top <= this.pageHeight &&\n      position.left >= 0 && position.top >= 0;\n  }\n}\n","import {Component, ComponentRef, OnInit} from '@angular/core';\nimport {AnnotationConfig} from \"./annotation-config\";\nimport {AnnotationService} from \"./annotation.service\";\nimport {\n  AddDynamicComponentService,\n  CommonModals,\n  FileCredentials,\n  FileModel, Formatting,\n  HostingDynamicComponentService,\n  ModalService,\n  NavigateService, PagePreloadService, PasswordService,\n  TopTabActivatorService, UploadFilesService,\n  Utils,\n  WindowService,\n  ZoomService\n} from \"@groupdocs.examples.angular/common-components\";\nimport {\n  AnnotationType,\n  CommentAnnotation,\n  Position,\n  RemoveAnnotation,\n  Comment,\n  FileAnnotationDescription, PageAnnotationModel, AnnotationData, Dimension\n} from \"./annotation-models\";\nimport {AnnotationComponent} from \"./annotation/annotation.component\";\nimport {ActiveAnnotationService} from \"./active-annotation.service\";\nimport * as jquery from 'jquery';\nimport {RemoveAnnotationService} from \"./remove-annotation.service\";\nimport {CommentAnnotationService} from \"./comment-annotation.service\";\nimport { AnnotationConfigService } from \"./annotation-config.service\";\n\nconst $ = jquery;\n\n@Component({\n  selector: 'gd-annotation-app',\n  templateUrl: './annotation-app.component.html',\n  styleUrls: ['./annotation-app.component.less']\n})\nexport class AnnotationAppComponent implements OnInit {\n  title = 'annotation';\n  files: FileModel[] = [];\n  file: FileAnnotationDescription;\n  isLoading: boolean;\n  annotationConfig: AnnotationConfig;\n  browseFilesModal = CommonModals.BrowseFiles;\n  formatDisabled = !this.file;\n   public credentials: FileCredentials;\n  annotationTypes = [\n    AnnotationType.TEXT,\n    AnnotationType.TEXT_STRIKEOUT,\n    AnnotationType.TEXT_UNDERLINE,\n    AnnotationType.TEXT_REPLACEMENT,\n    AnnotationType.TEXT_REDACTION,\n    AnnotationType.POLYLINE,\n    AnnotationType.ARROW,\n    AnnotationType.DISTANCE,\n    AnnotationType.AREA,\n    AnnotationType.TEXT_FIELD,\n    AnnotationType.WATERMARK,\n    AnnotationType.POINT,\n  ];\n  isDesktop: boolean;\n  annotationTypeFirst = [\n    AnnotationType.TEXT,\n    AnnotationType.TEXT_UNDERLINE,\n    AnnotationType.TEXT_REDACTION,\n    AnnotationType.TEXT_REPLACEMENT,\n    AnnotationType.TEXT_STRIKEOUT,\n  ];\n  annotationTypeSecond = [\n    AnnotationType.POLYLINE,\n    AnnotationType.ARROW,\n    AnnotationType.DISTANCE,\n    AnnotationType.AREA,\n    AnnotationType.POINT\n  ];\n  annotationTypeThird = [\n    AnnotationType.TEXT_FIELD,\n    AnnotationType.WATERMARK,\n  ];\n  countPages = 0;\n  commentOpenedId: number;\n  comments = new Map<number, Comment[]>();\n  _zoom = 100;\n  _pageWidth: number;\n  _pageHeight: number;\n\n  private activeAnnotationTab: string;\n  private fileWasDropped = false;\n  public annotations = new Map<number, ComponentRef<any>>();\n  private creatingAnnotationId: number;\n  private activeAnnotationId: number;\n\n  constructor(private _annotationService: AnnotationService,\n              private _modalService: ModalService,\n              private _navigateService: NavigateService,\n              private _tabActivatorService: TopTabActivatorService,\n              private _hostingComponentsService: HostingDynamicComponentService,\n              private _addDynamicComponentService: AddDynamicComponentService,\n              private _activeAnnotationService: ActiveAnnotationService,\n              private _removeAnnotationService: RemoveAnnotationService,\n              public _commentAnnotationService: CommentAnnotationService,\n              uploadFilesService: UploadFilesService,\n              pagePreloadService: PagePreloadService,\n              passwordService: PasswordService,\n              private _windowService: WindowService,\n              private _zoomService: ZoomService,\n              configService: AnnotationConfigService) {\n\n    configService.updatedConfig.subscribe((annotationConfig) => {\n      this.annotationConfig = annotationConfig;\n    });\n\n    this.isDesktop = _windowService.isDesktop();\n    _windowService.onResize.subscribe((w) => {\n      this.isDesktop = _windowService.isDesktop();\n      if (!this.isDesktop) {\n        this.refreshZoom();\n      }\n    });\n\n    this._activeAnnotationService.activeChange.subscribe((id: number) => {\n      if (this.activeAnnotationId !== id) {\n        this.commentOpenedId = null;\n        this.activeAnnotationId = id;\n      }\n    });\n\n    this._commentAnnotationService.commentAnnotation.subscribe((commentAnnotation: CommentAnnotation) => {\n      this.commentOpenedId = commentAnnotation.id;\n      if (!this.comments.get(this.commentOpenedId)) {\n        this.comments.set(this.commentOpenedId, []);\n      }\n    });\n\n    this._commentAnnotationService.addCommentObserve.subscribe((comment: Comment) => {\n      this.comments.get(this.commentOpenedId).push(comment);\n    });\n\n    this._removeAnnotationService.removeAnnotation.subscribe((removeAnnotation: RemoveAnnotation) => {\n      const componentRef = this.annotations.get(removeAnnotation.id);\n      if (componentRef) {\n        componentRef.destroy();\n      }\n      this.annotations.delete(removeAnnotation.id);\n      if (this.commentOpenedId === removeAnnotation.id) {\n        this.commentOpenedId = null;\n      }\n      this.comments.delete(removeAnnotation.id);\n    });\n\n    uploadFilesService.uploadsChange.subscribe((uploads) => {\n      if (uploads) {\n        let i: number;\n        for (i = 0; i < uploads.length; i++) {\n          this._annotationService.upload(uploads.item(i), '', this.rewriteConfig).subscribe((obj: FileCredentials) => {\n            this.fileWasDropped ? this.selectFile(obj.guid, '', '') : this.selectDir('');\n          });\n        }\n      }\n    });\n\n    pagePreloadService.checkPreload.subscribe((page: number) => {\n      if (this.preloadPageCountConfig !== 0) {\n        for (let i = page; i < page + 2; i++) {\n          if (i > 0 && i <= this.countPages && !this.file.pages[i - 1].data) {\n            this.preloadPages(i, i);\n          }\n        }\n      }\n    });\n\n    passwordService.passChange.subscribe((pass: string) => {\n      this.selectFile(this.credentials.guid, pass, CommonModals.PasswordRequired);\n    });\n\n    this.isDesktop = _windowService.isDesktop();\n    _windowService.onResize.subscribe((w) => {\n      this.isDesktop = _windowService.isDesktop();\n    });\n  }\n\n  getComments() {\n    return this.comments.get(this.commentOpenedId);\n  }\n\n  get rewriteConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.rewrite : true;\n  }\n\n  get zoomConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.zoom : false;\n  }\n\n  get pageSelectorConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.pageSelector : true;\n  }\n\n  get preloadPageCountConfig(): number {\n    return this.annotationConfig ? this.annotationConfig.preloadPageCount : 0;\n  }\n\n  get downloadConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.download : true;\n  }\n\n  get downloadOriginalConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.downloadOriginal : true;\n  }\n\n  get downloadAnnotatedConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.downloadAnnotated : true;\n  }\n\n  get uploadConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.upload : true;\n  }\n\n  private defaultDocumentConfig() {\n    return this.annotationConfig ? this.annotationConfig.defaultDocument : \"\";\n  }\n\n  get printConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.print : true;\n  }\n\n  get browseConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.browse : true;\n  }\n\n  get htmlModeConfig(): boolean {\n    return false;\n  }\n\n  get enableRightClickConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.enableRightClick : true;\n  }\n\n  get textAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.textAnnotation : true;\n  }\n\n  get areaAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.areaAnnotation : true;\n  }\n\n  get pointAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.pointAnnotation : true;\n  }\n\n  get textStrikeoutAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.textStrikeoutAnnotation : true;\n  }\n\n  get polylineAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.polylineAnnotation : true;\n  }\n\n  get textFieldAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.textFieldAnnotation : true;\n  }\n\n  get watermarkAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.watermarkAnnotation : true;\n  }\n\n  get textReplacementAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.textReplacementAnnotation : true;\n  }\n\n  get arrowAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.arrowAnnotation : true;\n  }\n\n  get textRedactionAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.textRedactionAnnotation : true;\n  }\n\n  get textUnderlineAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.textUnderlineAnnotation : true;\n  }\n\n  get distanceAnnotationConfig(): boolean {\n    return this.annotationConfig ? this.annotationConfig.distanceAnnotation : true;\n  }\n\n  ngOnInit() {\n    if (this.annotationConfig.defaultDocument !== \"\"){\n      this.isLoading = true;\n      this.selectFile(this.annotationConfig.defaultDocument, \"\", \"\");\n    }\n  }\n\n  private ptToPx(pt: number) {\n    //pt * 96 / 72 = px.\n    return pt * 96 / 72;\n  }\n\n  private getFitToWidth() {\n    // Images and Excel-related files receiving dimensions in px from server\n    const pageWidth = this.ptToPx(this._pageWidth);\n    const pageHeight = this.ptToPx(this._pageHeight);\n    const offsetWidth = pageWidth ? pageWidth : window.innerWidth;\n\n    return (pageHeight > pageWidth && Math.round(offsetWidth / window.innerWidth) < 2) ? 200 - Math.round(offsetWidth * 100 / window.innerWidth) : Math.round(window.innerWidth * 100 / offsetWidth);\n  }\n\n  set zoom(zoom) {\n    this._zoom = zoom;\n    this._zoomService.changeZoom(this._zoom);\n  }\n\n  get zoom() {\n    return this._zoom;\n  }\n\n  private refreshZoom() {\n    this.zoom = this._windowService.isDesktop() ? 100 : this.getFitToWidth();\n  }\n\n  zoomIn() {\n    if (this.formatDisabled)\n      return;\n    if (this._zoom < 490) {\n      this.zoom = this._zoom + 10;\n    }\n  }\n\n  zoomOut() {\n    if (this.formatDisabled)\n      return;\n    if (this._zoom > 30) {\n      this.zoom = this._zoom - 10;\n    }\n  }\n\n  openModal(id: string) {\n    this._modalService.open(id);\n  }\n\n  closeModal(id: string) {\n    this._modalService.close(id);\n  }\n\n  selectDir($event: string) {\n    this._annotationService.loadFiles($event).subscribe((files: FileModel[]) => this.files = files || []);\n  }\n\n  selectFile($event: string, password: string, modalId: string) {\n    this.credentials = new FileCredentials($event, password);\n    this.file = null;\n    this.commentOpenedId = null;\n    this._annotationService.loadFile(this.credentials).subscribe((file: FileAnnotationDescription) => {\n        this.cleanAnnotations();\n        this.file = file;\n        this.formatDisabled = !this.file;\n        if (file) {\n          if (!this.isDesktop && file.pages && file.pages[0]) {\n            this._pageHeight = file.pages[0].height;\n            this._pageWidth = file.pages[0].width;\n            this.refreshZoom();\n          }\n          const preloadPageCount = this.preloadPageCountConfig;\n          const countPages = file.pages ? file.pages.length : 0;\n          if (preloadPageCount > 0) {\n            this.preloadPages(1, preloadPageCount > countPages ? countPages : preloadPageCount);\n          } else {\n            setTimeout(() => {\n              for (const page of this.file.pages) {\n                this.importAnnotations(page.annotations ? page.annotations : []);\n              }\n            }, 100);\n          }\n          this._navigateService.countPages = countPages;\n          this._navigateService.currentPage = 1;\n          this.countPages = countPages;\n        }\n      }\n    );\n    if (modalId) {\n      this._modalService.close(modalId);\n    }\n    this.clearData();\n  }\n\n  preloadPages(start: number, end: number) {\n    for (let i = start; i <= end; i++) {\n      this._annotationService.loadPage(this.credentials, i).subscribe((page: PageAnnotationModel) => {\n        this.file.pages[i - 1] = page;\n        setTimeout(() => {\n          this.importAnnotations(page.annotations ? page.annotations : []);\n        }, 100);\n      });\n    }\n  }\n\n  private importAnnotations(annotations: AnnotationData[]) {\n    for (const annotation of annotations) {\n      const position = new Position(annotation.left, annotation.top);\n      const id = this.addAnnotationComponent(annotation.pageNumber, position, annotation);\n      this.comments.set(id, annotation.comments);\n      this._activeAnnotationService.changeActive(id);\n    }\n  }\n\n  upload($event: string) {\n    this._annotationService.upload(null, $event, this.rewriteConfig).subscribe(() => {\n      this.selectDir('');\n    });\n  }\n\n  onRightClick($event: MouseEvent) {\n    return this.enableRightClickConfig;\n  }\n\n  downloadFile() {\n    if (this.formatDisabled)\n      return;\n    window.location.assign(this._annotationService.getDownloadUrl(this.credentials));\n  }\n\n  annotate() {\n    const annotationsData = this.prepareAnnotationsData();\n\n    this._annotationService.annotate(this.credentials, annotationsData, false).subscribe((ret: any) => {\n      this._modalService.open(CommonModals.OperationSuccess);\n      this.selectFile(ret.guid, this.credentials.password, CommonModals.OperationSuccess);\n    });\n  }\n\n  public prepareAnnotationsData(){\n    const annotationsData = [];\n    for (const annotation of this.annotations.values()) {\n      const annotationData = (<AnnotationComponent>annotation.instance).getAnnotationData();\n      annotationData.comments = this.comments.get(annotationData.id);\n      annotationsData.push(annotationData);\n    }\n    return annotationsData;\n  }\n\n  isVisible(id: string) {\n    const supported = !this.file || (this.file && this.file.supportedAnnotations &&\n      this.file.supportedAnnotations.find(function (value: string) {\n      return id === value;\n    }));\n    return this.getAnnotationTypeConfig(id) && supported;\n  }\n\n  activeTab($event) {\n    this.activeAnnotationTab = $event;\n  }\n\n  codesConfigFirst() {\n    return this.checkConfig(this.annotationTypeFirst);\n  }\n\n  codesConfigSecond() {\n    return this.checkConfig(this.annotationTypeSecond);\n  }\n\n  private checkConfig(annotationList) {\n    for (const annotationType of annotationList) {\n      if (this.getAnnotationTypeConfig(annotationType.id)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  codesConfigThird() {\n    return this.getAnnotationTypeConfig(AnnotationType.TEXT_FIELD.id) && this.getAnnotationTypeConfig(AnnotationType.WATERMARK.id);\n  }\n\n  private getAnnotationTypeConfig(id: string) {\n    switch (id) {\n      case AnnotationType.TEXT.id:\n        return this.textAnnotationConfig;\n      case AnnotationType.AREA.id:\n        return this.areaAnnotationConfig;\n      case AnnotationType.POINT.id:\n        return this.pointAnnotationConfig;\n      case AnnotationType.TEXT_STRIKEOUT.id:\n        return this.textStrikeoutAnnotationConfig;\n      case AnnotationType.POLYLINE.id:\n        return this.polylineAnnotationConfig;\n      case AnnotationType.TEXT_FIELD.id:\n        return this.textFieldAnnotationConfig;\n      case AnnotationType.WATERMARK.id:\n        return this.watermarkAnnotationConfig;\n      case AnnotationType.TEXT_REPLACEMENT.id:\n        return this.textReplacementAnnotationConfig;\n      case AnnotationType.ARROW.id:\n        return this.arrowAnnotationConfig;\n      case AnnotationType.TEXT_REDACTION.id:\n        return this.textRedactionAnnotationConfig;\n      case AnnotationType.TEXT_UNDERLINE.id:\n        return this.textUnderlineAnnotationConfig;\n      case AnnotationType.DISTANCE.id:\n        return this.distanceAnnotationConfig;\n    }\n  }\n\n  fileDropped($event) {\n    this.fileWasDropped = $event;\n  }\n\n  private cleanAnnotations() {\n    for (const componentRef of this.annotations.values()) {\n      componentRef.destroy();\n    }\n    this.annotations = new Map<number, ComponentRef<any>>();\n    this.comments = new Map<number, Comment[]>();\n  }\n\n  private clearData() {\n    if (!this.file || !this.file.pages) {\n      return;\n    }\n    for (const page of this.file.pages) {\n      page.data = null;\n    }\n  }\n\n  createAnnotation($event: MouseEvent) {\n    if (this.activeAnnotationTab)\n    {\n        $event.preventDefault();\n    } \n\n    if (this.activeAnnotationTab) {\n      const position = Utils.getMousePosition($event);\n\n      const elements = document.elementsFromPoint(position.x, position.y);\n      const currentPage = elements.find(x => x.id && x.id.startsWith(\"page-\"));\n      if (currentPage) {\n        const documentPage = $(currentPage).parent().parent()[0];\n        const currentPosition = this.getCurrentPosition(position, $(documentPage));\n        const pageId = currentPage.id;\n        let pageNumber = 1;\n        if (pageId) {\n          const split = pageId.split('-');\n          pageNumber = split.length === 2 ? parseInt(split[1], 10) : pageNumber;\n        }\n        const id = this.addAnnotationComponent(pageNumber, currentPosition, null);\n        this._activeAnnotationService.changeActive(id);\n        this.creatingAnnotationId = id;\n        this._tabActivatorService.changeActiveTab(null);\n      }\n    }\n  }\n\n  private addAnnotationComponent(pageNumber: number, currentPosition: Position, data: AnnotationData) {\n    const dynamicDirective = this._hostingComponentsService.find(pageNumber);\n    if (dynamicDirective) {\n      const viewContainerRef = dynamicDirective.viewContainerRef;\n      const annotationComponent = this._addDynamicComponentService.addDynamicComponent(viewContainerRef, AnnotationComponent);\n      const id = this.getNextId();\n      (<AnnotationComponent>annotationComponent.instance).id = id;\n      (<AnnotationComponent>annotationComponent.instance).position = currentPosition;\n      (<AnnotationComponent>annotationComponent.instance).pageNumber = pageNumber;\n      if (data) {\n        const dimension = new Dimension(data.width, data.height);\n        const type = AnnotationType.getAnnotationType(data.type);\n        const formatting = Formatting.default();\n        formatting.fontSize = data.fontSize;\n        if (data.fontColor) {\n          formatting.color = \"#\" + data.fontColor.toString(16);\n        }\n        formatting.font = data.font;\n        (<AnnotationComponent>annotationComponent.instance).type = type ? type.id : data.type;\n        (<AnnotationComponent>annotationComponent.instance).dimension = dimension;\n        (<AnnotationComponent>annotationComponent.instance).svgPath = data.svgPath;\n        (<AnnotationComponent>annotationComponent.instance).textValue = data.text;\n        if (formatting) {\n          (<AnnotationComponent>annotationComponent.instance).saveFormatting(formatting);\n        }\n      } else {\n        (<AnnotationComponent>annotationComponent.instance).type = this.activeAnnotationTab;\n      }\n      const pageModel = this.file.pages.find(function (p) {\n        return p.number === pageNumber;\n      });\n      (<AnnotationComponent>annotationComponent.instance).pageWidth = pageModel.width;\n      (<AnnotationComponent>annotationComponent.instance).pageHeight = pageModel.height;\n      this.annotations.set(id, annotationComponent);\n      return id;\n    }\n    return null;\n  }\n\n  resizingCreatingAnnotation($event: MouseEvent) {\n    if (this.activeAnnotationTab)\n    {\n        $event.preventDefault();\n    } \n\n    if (this.creatingAnnotationId) {\n      const position = Utils.getMousePosition($event);\n      const annotationComponent = this.annotations.get(this.creatingAnnotationId);\n      const type = (<AnnotationComponent>annotationComponent.instance).type;\n      const pageNumber = (<AnnotationComponent>annotationComponent.instance).pageNumber;\n      const currentPosition = this.getCurrentPosition(position, $(\"#page-\" + pageNumber));\n      if (type === AnnotationType.POLYLINE.id || type === AnnotationType.DISTANCE.id || type === AnnotationType.ARROW.id) {\n        (<AnnotationComponent>annotationComponent.instance).draw(currentPosition);\n      } else if (type !== AnnotationType.POINT.id) {\n        (<AnnotationComponent>annotationComponent.instance).calcDimensions(currentPosition);\n      }\n    }\n  }\n\n  private getCurrentPosition(position, page) {\n    const left = (position.x - page.offset().left)/(this.zoom/100);\n    const top = (position.y - page.offset().top)/(this.zoom/100);\n    return new Position(left, top);\n  }\n\n  finishCreatingAnnotation($event: MouseEvent) {\n    if (this.activeAnnotationTab)\n    {\n        $event.preventDefault();\n    } \n\n    if (this.creatingAnnotationId) {\n      this._activeAnnotationService.changeActive(this.creatingAnnotationId);\n      this.creatingAnnotationId = null;\n    }\n  }\n\n  closeComments() {\n    this.commentOpenedId = null;\n  }\n\n  onPan($event)\n  {\n    this._zoomService.changeZoom(this._zoom);\n  }\n\n  private getNextId() {\n    let maxId = 0;\n    for (const annId of this.annotations.keys()) {\n      if (annId > maxId){\n        maxId = annId;\n      }\n    }\n    const id = maxId + 1;\n    return id;\n  }\n}\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {CommentAnnotationService} from \"../comment-annotation.service\";\nimport {Comment} from '../annotation-models'\n\n@Component({\n  selector: 'gd-comment-panel',\n  templateUrl: './comment-panel.component.html',\n  styleUrls: ['./comment-panel.component.less']\n})\nexport class CommentPanelComponent implements OnInit {\n  @Input() comments: [];\n  @Input() annotationId: number;\n\n  @Output() closeComments = new EventEmitter<boolean>();\n\n  currentComment: Comment;\n\n  constructor(private _commentAnnotationService: CommentAnnotationService) {\n  }\n\n  ngOnInit() {\n  }\n\n  closePanel() {\n    this.closeComments.emit(true);\n  }\n\n  newComment() {\n    this.currentComment = new Comment(this.annotationId);\n  }\n\n  clearComment() {\n    this.currentComment = null;\n  }\n\n  addComment() {\n    this._commentAnnotationService.addComment(Comment.create(this.currentComment));\n    this.currentComment = null;\n  }\n}\n","import {Component, Input, OnInit} from '@angular/core';\nimport {Comment} from '../annotation-models'\n\n@Component({\n  selector: 'gd-comment',\n  templateUrl: './comment.component.html',\n  styleUrls: ['./comment.component.less']\n})\nexport class CommentComponent implements OnInit {\n\n  @Input() comment: Comment;\n\n  constructor() {\n  }\n\n  ngOnInit() {\n  }\n\n  getTime() {\n    const time = Date.now() - this.comment.time;\n    const hours = Math.round(time / (60 * 60 * 1000));\n    if (hours > 1) {\n      return 'about ' + hours + ' hours ago';\n    }\n    const min = Math.round(time / (60 * 1000));\n    if (min > 1) {\n      return 'about ' + min + ' minutes ago';\n    }\n    const sec = Math.round(time / 1000);\n    if (sec > 1) {\n      return 'about ' + sec + ' seconds ago';\n    }\n    return this.comment.time;\n  }\n}\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {Comment} from '../annotation-models'\nimport * as jquery from 'jquery';\n\nconst $ = jquery;\n\n@Component({\n  selector: 'gd-create-comment',\n  templateUrl: './create-comment.component.html',\n  styleUrls: ['./create-comment.component.less']\n})\nexport class CreateCommentComponent implements OnInit {\n  @Input() comment: Comment;\n\n  @Output() addComment = new EventEmitter<Comment>();\n  @Output() removeComment = new EventEmitter<boolean>();\n\n  constructor() {\n  }\n\n  ngOnInit() {\n    setTimeout(() => {\n      const element = $(\"#name\");\n      if (element) {\n        element.focus();\n      }\n    }, 100);\n  }\n\n  onAddComment() {\n    this.addComment.emit(this.comment);\n  }\n\n  clearComment() {\n    this.removeComment.emit(true);\n  }\n\n  saveText(value: string) {\n    this.comment.text = value;\n  }\n\n  saveName(value: string) {\n    this.comment.userName = value;\n  }\n}\n","import {APP_INITIALIZER, ModuleWithProviders, NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {\n  Api,\n  CommonComponentsModule,\n  ConfigService,\n  ErrorInterceptorService, LoadingMaskInterceptorService, LoadingMaskService\n} from \"@groupdocs.examples.angular/common-components\";\nimport {AnnotationConfigService} from \"./annotation-config.service\";\nimport {HTTP_INTERCEPTORS, HttpClientModule} from \"@angular/common/http\";\nimport {FontAwesomeModule} from \"@fortawesome/angular-fontawesome\";\nimport {ClickOutsideModule} from \"ng-click-outside\";\nimport {AnnotationAppComponent} from './annotation-app.component';\nimport {library} from \"@fortawesome/fontawesome-svg-core\";\nimport {fas} from \"@fortawesome/free-solid-svg-icons\";\nimport {far} from \"@fortawesome/free-regular-svg-icons\";\nimport {AnnotationComponent} from './annotation/annotation.component';\nimport {ActiveAnnotationService} from \"./active-annotation.service\";\nimport {RemoveAnnotationService} from \"./remove-annotation.service\";\nimport {CommentAnnotationService} from \"./comment-annotation.service\";\nimport {CommentPanelComponent} from './comment-panel/comment-panel.component';\nimport {CommentComponent} from './comment/comment.component';\nimport {CreateCommentComponent} from './create-comment/create-comment.component';\n\nexport function initializeApp(annotationConfigService: AnnotationConfigService) {\n  const result = () => annotationConfigService.load();\n  return result;\n}\n\n// NOTE: this is required during library compilation see https://github.com/angular/angular/issues/23629#issuecomment-440942981\n// @dynamic\nexport function setupLoadingInterceptor(service: LoadingMaskService) {\n  return new LoadingMaskInterceptorService(service);\n}\n\n@NgModule({\n  declarations: [AnnotationAppComponent, AnnotationComponent, CommentPanelComponent, CommentComponent, CreateCommentComponent,\n  ],\n  exports: [CommonComponentsModule, AnnotationAppComponent, AnnotationComponent, CommentPanelComponent, CommentComponent, CreateCommentComponent],\n  imports:\n    [CommonModule,\n      CommonComponentsModule,\n      HttpClientModule,\n      FontAwesomeModule,\n      ClickOutsideModule],\n  providers:\n    [\n      ConfigService,\n      AnnotationConfigService,\n      ActiveAnnotationService,\n      RemoveAnnotationService,\n      CommentAnnotationService,\n      {\n        provide: HTTP_INTERCEPTORS,\n        useClass: ErrorInterceptorService,\n        multi: true\n      },\n      {\n        provide: APP_INITIALIZER,\n        useFactory: initializeApp,\n        deps: [AnnotationConfigService], multi: true\n      },\n      LoadingMaskService,\n      {\n        provide: HTTP_INTERCEPTORS,\n        useFactory: setupLoadingInterceptor,\n        multi: true,\n        deps: [LoadingMaskService]\n      }\n    ],\n  entryComponents: [AnnotationComponent],\n})\n\nexport class AnnotationModule {\n  constructor() {\n    library.add(fas, far);\n  }\n\n  static forRoot(apiEndpoint: string): ModuleWithProviders {\n    Api.DEFAULT_API_ENDPOINT = apiEndpoint;\n    return {\n      ngModule: AnnotationModule\n    };\n  }\n}\n"]}