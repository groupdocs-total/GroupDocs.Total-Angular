!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@angular/core"),require("@angular/common"),require("@groupdocs.examples.angular/common-components"),require("rxjs"),require("@angular/common/http"),require("@fortawesome/angular-fontawesome"),require("ng-click-outside"),require("jquery"),require("@fortawesome/fontawesome-svg-core"),require("@fortawesome/free-solid-svg-icons"),require("@fortawesome/free-regular-svg-icons")):"function"==typeof define&&define.amd?define("@groupdocs.examples.angular/annotation",["exports","@angular/core","@angular/common","@groupdocs.examples.angular/common-components","rxjs","@angular/common/http","@fortawesome/angular-fontawesome","ng-click-outside","jquery","@fortawesome/fontawesome-svg-core","@fortawesome/free-solid-svg-icons","@fortawesome/free-regular-svg-icons"],n):n(((t=t||self).groupdocs=t.groupdocs||{},t.groupdocs.examples=t.groupdocs.examples||{},t.groupdocs.examples.angular=t.groupdocs.examples.angular||{},t.groupdocs.examples.angular.annotation={}),t.ng.core,t.ng.common,t.commonComponents,t.rxjs,t.ng.common.http,t.angularFontawesome,t.ngClickOutside,t.jquery,t.fontawesomeSvgCore,t.freeSolidSvgIcons,t.freeRegularSvgIcons)}(this,(function(t,n,e,o,i,a,r,s,c,p,d,l){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var g=function(t,n){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function f(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}var u=function(){};var h=function(){function t(t,n){this._http=t,this._config=n,this._annotationConfig=new i.BehaviorSubject(new u),this._updatedConfig=this._annotationConfig.asObservable()}return Object.defineProperty(t.prototype,"updatedConfig",{get:function(){return this._updatedConfig},enumerable:!0,configurable:!0}),t.prototype.load=function(){var t=this;return new Promise((function(n,e){var i=t._config.getConfigEndpoint(o.Api.ANNOTATION_APP);t._http.get(i,o.Api.httpOptionsJson).toPromise().then((function(e){var o=e;t._annotationConfig.next(o),n()})).catch((function(t){e("Could not load annotation config: "+JSON.stringify(t))}))}))},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:a.HttpClient},{type:o.ConfigService}]},t.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new t(n.ɵɵinject(a.HttpClient),n.ɵɵinject(o.ConfigService))},token:t,providedIn:"root"}),t}();var m=function(){function t(t,n){this._http=t,this._config=n}return t.prototype.loadFiles=function(t){return this._http.post(this._config.getAnnotationApiEndpoint()+o.Api.LOAD_FILE_TREE,{path:t},o.Api.httpOptionsJson)},t.prototype.loadFile=function(t){return this._http.post(this._config.getAnnotationApiEndpoint()+o.Api.LOAD_DOCUMENT_DESCRIPTION,t,o.Api.httpOptionsJson)},t.prototype.upload=function(t,n,e){var i=new FormData;return i.append("file",t),i.append("rewrite",String(e)),n&&i.append("url",n),this._http.post(this._config.getAnnotationApiEndpoint()+o.Api.UPLOAD_DOCUMENTS,i)},t.prototype.loadPage=function(t,n){return this._http.post(this._config.getAnnotationApiEndpoint()+o.Api.LOAD_DOCUMENT_PAGE,{guid:t.guid,password:t.password,page:n},o.Api.httpOptionsJson)},t.prototype.getDownloadUrl=function(t){return this._config.getAnnotationApiEndpoint()+o.Api.DOWNLOAD_DOCUMENTS+"/?path="+t.guid},t.prototype.annotate=function(t,n,e){var i={guid:t.guid,password:t.password,annotationsData:n,documentType:o.FileUtil.find(t.guid,!1).format,print:e};return this._http.post(this._config.getAnnotationApiEndpoint()+o.Api.ANNOTATE,i,o.Api.httpOptionsJson)},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:a.HttpClient},{type:o.ConfigService}]},t.ngInjectableDef=n.ɵɵdefineInjectable({factory:function(){return new t(n.ɵɵinject(a.HttpClient),n.ɵɵinject(o.ConfigService))},token:t,providedIn:"root"}),t}();var y=function(){function t(){}return t.getAnnotationType=function(n){switch(n){case t.TEXT.id:return t.TEXT;case t.AREA.id:return t.AREA;case t.POINT.id:return t.POINT;case t.TEXT_STRIKEOUT.id:return t.TEXT_STRIKEOUT;case t.POLYLINE.id:return t.POLYLINE;case t.TEXT_FIELD.id:return t.TEXT_FIELD;case t.WATERMARK.id:return t.WATERMARK;case t.TEXT_REPLACEMENT.id:return t.TEXT_REPLACEMENT;case t.ARROW.id:return t.ARROW;case t.TEXT_REDACTION.id:return t.TEXT_REDACTION;case t.TEXT_UNDERLINE.id:return t.TEXT_UNDERLINE;case t.DISTANCE.id:return t.DISTANCE}},t.TEXT={id:"text",name:"Text",icon:"highlighter"},t.AREA={id:"area",name:"Area",icon:"vector-square"},t.POINT={id:"point",name:"Point",icon:"thumbtack"},t.TEXT_STRIKEOUT={id:"textStrikeout",name:"Text strikeout",icon:"strikethrough"},t.POLYLINE={id:"polyline",name:"Polyline",icon:"signature"},t.TEXT_FIELD={id:"textField",name:"Text field",icon:"i-cursor"},t.WATERMARK={id:"watermark",name:"Watermark",icon:"tint"},t.TEXT_REPLACEMENT={id:"textReplacement",name:"Text replacement",icon:"edit"},t.ARROW={id:"arrow",name:"Arrow",icon:"mouse-pointer"},t.TEXT_REDACTION={id:"textRedaction",name:"Text redaction",icon:"brush"},t.TEXT_UNDERLINE={id:"textUnderline",name:"Text underline",icon:"underline"},t.DISTANCE={id:"distance",name:"Distance",icon:"ruler"},t}();!function(t){function n(){return null!==t&&t.apply(this,arguments)||this}(function(t,n){function e(){this.constructor=t}g(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)})(n,t)}(o.PageModel);var v=function(){function t(t,n){this.left=t,this.top=n}return t.clone=function(n){return new t(n.left,n.top)},t}();var b=function(){function t(t,n){this.width=t,this.height=n}return t.prototype.isNone=function(){return 0===this.width&&0===this.height},t}();var x=function(){this.text="",this.fontColor=8421375};var T=function(t){this.id=t};var C=function(){function t(t){this.id=t,this.time=Date.now(),this.text="",this.userName=""}return t.create=function(n){var e=new t(n.id);return e.text=n.text,e.userName=n.userName,e.time=n.time,e},t}();var w=function(t){this.id=t};var A=function(){function t(){this._observer=new i.Subject,this._activeChange=this._observer.asObservable()}return Object.defineProperty(t.prototype,"activeChange",{get:function(){return this._activeChange},enumerable:!0,configurable:!0}),t.prototype.changeActive=function(t){this._observer.next(t)},t}();var E=function(){function t(){this._observer=new i.Subject,this._removeAnnotation=this._observer.asObservable()}return Object.defineProperty(t.prototype,"removeAnnotation",{get:function(){return this._removeAnnotation},enumerable:!0,configurable:!0}),t.prototype.remove=function(t){this._observer.next(t)},t}();var P=function(){function t(){this._observer=new i.Subject,this._commentAnnotation=this._observer.asObservable(),this._observerAddComment=new i.Subject,this._addCommentObserve=this._observerAddComment.asObservable()}return Object.defineProperty(t.prototype,"commentAnnotation",{get:function(){return this._commentAnnotation},enumerable:!0,configurable:!0}),t.prototype.comment=function(t){this._observer.next(t)},Object.defineProperty(t.prototype,"addCommentObserve",{get:function(){return this._addCommentObserve},enumerable:!0,configurable:!0}),t.prototype.addComment=function(t){this._observerAddComment.next(t)},t}();var O=c,I=function(){function t(t,n,e){var i=this;this._activeAnnotationService=t,this._removeAnnotationService=n,this._commentAnnotationService=e,this.active=!0,this.dimension=new b(0,0),this.textValue="",this.distanceValue="0px",this.pointsValue="",this.svgPath="",this.formatting=o.Formatting.default(),this.points=[],this._activeAnnotationService.activeChange.subscribe((function(t){i.active=i.id===t,i.active&&i.setTextFocus()}))}return t.isOnPage=function(t){var n=document.elementFromPoint(t.x,t.y);return n&&O(n).parent().parent()&&(O(n).parent().parent().parent().hasClass("page")||O(n).parent().parent().parent().parent().parent().hasClass("page"))},t.prototype.ngOnInit=function(){if(this.leftTop=v.clone(this.position),this.isPolyline())if(this.svgPath){var t=this.svgPath.replace("M","").split("L"),n=parseFloat(t[0].split(",")[0]),e=parseFloat(t[0].split(",")[1]),o=this;t.forEach((function(t,i){0!==i&&""!==t&&(o.addPoint(new v(n,e)),n+=parseFloat(t.split(",")[0]),e+=parseFloat(t.split(",")[1]))}))}else this.addPoint(this.position);else if(this.isPath()){if(this.svgPath||this.type===y.ARROW.id&&!this.dimension.isNone()){var i=new v(this.position.left+this.dimension.width,this.position.top+this.dimension.height);this.setEndPosition(i),this.dimension.height<0&&(this.leftTop.top+=this.dimension.height,this.dimension.height=-1*this.dimension.height),this.dimension.width<0&&(this.leftTop.left+=this.dimension.width,this.dimension.width=-1*this.dimension.width)}else this.setEndPosition(this.position);this.distanceValue=this.getDistance()+"px"}else this.type===y.POINT.id?this.initPoint():this.setEndPosition(this.position)},t.prototype.ngAfterViewInit=function(){this.setTextFocus()},t.prototype.activation=function(){this._activeAnnotationService.changeActive(this.id)},t.prototype.width=function(t){this.checkDragging(t,0)&&(this.dimension.width+=t)},t.prototype.height=function(t){this.checkDragging(0,t)&&(this.dimension.height+=t)},t.prototype.left=function(t){this.position.left+=t,this.correctPosition(),this.refreshLeftTop()},t.prototype.top=function(t){this.position.top+=t,this.correctPosition(),this.refreshLeftTop()},t.prototype.refreshLeftTop=function(){this.leftTop.left=this.position.left,this.leftTop.top=this.position.top},t.prototype.correctPosition=function(){this.position.left<0&&(this.position.left=0),this.position.top<0&&(this.position.top=0),this.position.top+this.dimension.height>this.pageHeight&&(this.position.top=this.pageHeight-this.dimension.height),this.position.left+this.dimension.width>this.pageWidth&&(this.position.left=this.pageWidth-this.dimension.width)},t.prototype.dragOver=function(t){t.preventDefault(),t.stopPropagation()},t.prototype.dragStart=function(t){t.preventDefault(),this.oldPosition=o.Utils.getMousePosition(t),t.dataTransfer&&t.dataTransfer.setData("text","foo")},t.prototype.initPoint=function(){this.dimension=new b(40,40),this.position.left=this.position.left-20,this.position.top=this.position.top-20,this.leftTop=v.clone(this.position)},t.prototype.dragging=function(n){var e,i;n.preventDefault();var a=o.Utils.getMousePosition(n);if(a.x&&a.y&&t.isOnPage(a)){var r=a.x-this.oldPosition.x,s=a.y-this.oldPosition.y;if(this.isPolyline()){if(!this.checkDragging(r,s))return;this.pointsValue="";try{for(var c=f(this.points),p=c.next();!p.done;p=c.next()){var d=p.value;d.left=d.left+r,d.top=d.top+s,this.pointsValue+=d.left+","+d.top+" "}}catch(t){e={error:t}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(e)throw e.error}}this.leftTop.left+=r,this.leftTop.top+=s}else if(this.isPath()){if(!this.checkDragging(r,s))return;this.position.left+=r,this.position.top+=s,this.endPosition.left+=r,this.endPosition.top+=s,this.pathValue="M"+this.position.left+","+this.position.top+" L"+this.endPosition.left+","+this.endPosition.top,this.distanceValue=this.getDistance()+"px",this.leftTop.left+=r,this.leftTop.top+=s}else this.position.left+=r,this.position.top+=s,this.correctPosition(),this.refreshLeftTop();this.oldPosition=a}},t.prototype.getAnnotationClass=function(){switch(this.type){case y.TEXT.id:return"gd-annotation-wrapper-border gd-text-annotation";case y.TEXT_STRIKEOUT.id:return"gd-annotation-wrapper-border gd-text-annotation gd-text-strikeout-annotation";case y.TEXT_UNDERLINE.id:return"gd-annotation-wrapper-border gd-text-annotation gd-text-underline-annotation";case y.TEXT_REDACTION.id:return"gd-annotation-wrapper-border gd-text-redaction-annotation";case y.TEXT_REPLACEMENT.id:return"gd-annotation-wrapper-border gd-text-replacement-annotation";case y.POINT.id:return"";default:return"gd-annotation-wrapper-border"}},t.prototype.isStrikeoutOrUnderline=function(){return this.type===y.TEXT_STRIKEOUT.id||this.type===y.TEXT_UNDERLINE.id},t.prototype.isTextReplacement=function(){return this.type===y.TEXT_REPLACEMENT.id},t.prototype.saveText=function(t){this.textValue=t},t.prototype.draw=function(t){this.onPage(t)&&(this.isPolyline()?this.addPoint(t):this.isPath()&&(this.setEndPosition(t),this.distanceValue=this.getDistance()+"px"),this.calcPositionAndDimension())},t.prototype.setStyles=function(){return{stroke:"#579AF0","stroke-width":2,"fill-opacity":0,id:(this.isPolyline()?"gd-polyline-annotation-":this.isDistance()?"gd-distance-annotation-":"gd-arrow-annotation-")+this.id,class:"annotation-svg"}},t.prototype.isPolyline=function(){return this.type===y.POLYLINE.id},t.prototype.calcPositionAndDimension=function(){var t,n,e=new v(Number.MAX_VALUE,Number.MAX_VALUE),o=new v(Number.MIN_VALUE,Number.MIN_VALUE);if(this.isPolyline())try{for(var i=f(this.points),a=i.next();!a.done;a=i.next()){var r=a.value;e.left=Math.min(r.left,e.left),e.top=Math.min(r.top,e.top),o.left=Math.max(r.left,o.left),o.top=Math.max(r.top,o.top)}}catch(n){t={error:n}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}else e.left=Math.min(this.position.left,this.endPosition.left),e.top=Math.min(this.position.top,this.endPosition.top),o.left=Math.max(this.position.left,this.endPosition.left),o.top=Math.max(this.position.top,this.endPosition.top);this.dimension.width=o.left-e.left,this.dimension.height=o.top-e.top,this.leftTop=e},t.prototype.calcDimensions=function(t){t.left<=this.pageWidth&&t.left>=0&&(this.dimension.width=t.left-this.position.left),t.top<=this.pageHeight&&t.top>=0&&(this.dimension.height=t.top-this.position.top)},t.prototype.getHeight=function(){return void 0===this.dimension.height?void 0:Math.abs(this.dimension.height)},t.prototype.getWidth=function(){return void 0===this.dimension.width?void 0:Math.abs(this.dimension.width)},t.prototype.checkDragging=function(t,n){return!(this.leftTop.left+t<0||this.leftTop.top+n<0||this.leftTop.top+n+this.dimension.height>this.pageHeight||this.leftTop.left+t+this.dimension.width>this.pageWidth)},t.prototype.isPoint=function(){return this.type===y.POINT.id},t.prototype.isSVG=function(){return this.type===y.POLYLINE.id||this.type===y.DISTANCE.id||this.type===y.ARROW.id},t.prototype.isDistance=function(){return this.type===y.DISTANCE.id},t.prototype.distanceTextOptions=function(){return{"font-size":"12px"}},t.prototype.isPath=function(){return this.type===y.DISTANCE.id||this.type===y.ARROW.id},t.prototype.setEndPosition=function(t){this.endPosition=v.clone(t),this.pathValue="M"+this.position.left+","+this.position.top+" L"+this.endPosition.left+","+this.endPosition.top},t.prototype.addPoint=function(t){this.points.push(t),this.pointsValue+=t.left+","+t.top+" "},t.prototype.getDistance=function(){var t=this.position.left-this.endPosition.left,n=this.position.top-this.endPosition.top;return Math.round(Math.sqrt(t*t+n*n))},t.prototype.bottom=function(){return"url("+window.location+"#end)"},t.prototype.head=function(){return this.isDistance()?"url("+window.location+"#start)":""},t.prototype.getTextX=function(){return this.getDistance()/2},t.prototype.isText=function(){return this.type===y.TEXT_FIELD.id||this.type===y.WATERMARK.id},t.prototype.getFormatting=function(){var t=this.formatting,n=o.Formatting.default();return t&&(n.fontSize=t.fontSize,n.font=t.font,n.color=t.color),n},t.prototype.saveFormatting=function(t){this.formatting.fontSize=t.fontSize,this.formatting.font=t.font,this.formatting.color=t.color},t.prototype.remove=function(){this._removeAnnotationService.remove(new w(this.id))},t.prototype.getMenuShift=function(){var t=this.isText()?265:111;return this.dimension.width>t?0:.5*(this.dimension.width-t)},t.prototype.getMenuType=function(){return o.MenuType.FOR_ANNOTATION},t.prototype.addComment=function(){this._commentAnnotationService.comment(new T(this.id))},t.prototype.setTextFocus=function(){var t=this;(this.isText()||this.isTextReplacement())&&setTimeout((function(){var n=O("#text-"+t.id);n&&n.focus()}),100)},t.prototype.textAreaHeight=function(t,n){this.dimension.height="Enter"===t?n.scrollHeight+this.formatting.fontSize:n.scrollHeight,this.dimension.width=n.scrollWidth},t.prototype.hideMenu=function(t){this._activeAnnotationService.changeActive(null)},t.prototype.getAnnotationData=function(){var t=new x;return t.id=this.id,t.text=this.textValue,t.fontColor=parseInt(o.Utils.toHex(this.formatting.color).replace("#",""),16),t.fontSize=this.formatting.fontSize,t.font=this.formatting.font,this.type===y.POINT.id?(t.left=this.leftTop.left+20,t.top=this.leftTop.top+20,t.height=0,t.width=0):(t.left=this.leftTop.left,t.top=this.leftTop.top,t.height=this.dimension.height,t.width=this.dimension.width),t.pageNumber=this.pageNumber,t.type=this.type,t.svgPath=this.getSvgPath(),t},t.prototype.getSvgPath=function(){var t,n,e="M";if(this.type===y.POLYLINE.id){var o=0,i=0,a=0;try{for(var r=f(this.points),s=r.next();!s.done;s=r.next()){var c=s.value;0===o?(e+=c.left+","+c.top+"l",o=1):e+=(i=c.left-i)+","+(a=c.top-a)+"l",i=c.left,a=c.top}}catch(n){t={error:n}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}else this.type===y.DISTANCE.id||this.type===y.ARROW.id?(e+=this.position.left+","+this.position.top+" ",e+=this.endPosition.left+","+this.endPosition.top+" "):e="";return e},t.prototype.onPage=function(t){return t.left<=this.pageWidth&&t.top<=this.pageHeight&&t.left>=0&&t.top>=0},t.decorators=[{type:n.Component,args:[{selector:"gd-annotation",template:'<div class="gd-annotation"\n     (clickOutside)="hideMenu($event)"\n     [exclude]="\'gd-context-menu,.ui-resizable-handle,.gd-comments-panel\'"\n     [excludeBeforeClick]="true"\n     [clickOutsideEvents]="\'mousedown\'"\n     [clickOutsideEnabled]="active"\n     [style.left.px]="leftTop.left" [style.top.px]="leftTop.top"\n     [style.width.px]="getWidth()"\n     [style.height.px]="getHeight()"\n     (click)="activation()"\n     (touchstart)="activation()">\n  <div [draggable]="true" (dragover)="dragOver($event)" (dragstart)="dragStart($event)"\n       (drag)="dragging($event)" (dragend)="dragging($event)" (drop)="dragOver($event)"\n       (panstart)="dragStart($event)" (panmove)="dragging($event)"\n       class="gd-annotation-wrapper" [ngClass]="getAnnotationClass()">\n    <gd-context-menu *ngIf="active" [topPosition]="position.top" [textMenu]="isText()" [formatting]="getFormatting()"\n                     (changeFormatting)="saveFormatting($event)" (removeItem)="remove()"\n                     [translation]="getMenuShift()" [menuType]="getMenuType()"\n                     (comment)="addComment()"></gd-context-menu>\n    <div class="gd-text-strikeout-line" *ngIf="isStrikeoutOrUnderline()"></div>\n    <textarea wrap="off" class="gd-text" *ngIf="isTextReplacement() || isText()" [value]="textValue"\n              id="{{\'text-\' + id}}" #text (keyup)="saveText(text.value)"\n              (keydown)="textAreaHeight($event.key, text)"\n              [style.color]="formatting?.color"\n              [style.font-family]="formatting?.font"\n              [style.font-size.px]="formatting?.fontSize"\n              [style.width.px]="getWidth()"\n              [style.height.px]="getHeight()"></textarea>\n    <div *ngIf="isPoint()" class="gd-point">\n      <fa-icon class="icon" [icon]="[\'fas\',\'thumbtack\']" [size]="\'lg\'"></fa-icon>\n    </div>\n  </div>\n\n  <gd-resizing [id]="id" *ngIf="active && !isSVG() && !isPoint()"\n               (offsetX)="width($event)" (offsetY)="height($event)"\n               (offsetTop)="top($event)" (offsetLeft)="left($event)"\n               [se]="true" [sw]="true" [ne]="true" [nw]="true"\n               [pageHeight]="pageHeight" [pageWidth]="pageWidth"></gd-resizing>\n</div>\n<svg *ngIf="isSVG()" class="svg" xmlns="http://www.w3.org/2000/svg">\n  <polyline *ngIf="isPolyline()" [attr.id]="id" [attr.points]="pointsValue" [ngStyle]="setStyles()">\n  </polyline>\n  <path id="{{\'gd-path-\' + id}}" *ngIf="isPath()" [attr.d]="pathValue" [attr.marker-end]="bottom()"\n        [attr.marker-start]="head()" [ngStyle]="setStyles()">\n    <title *ngIf="isDistance()" [ngStyle]="distanceTextOptions()">{{ distanceValue }}</title>\n  </path>\n  <text *ngIf="isDistance()" [ngStyle]="distanceTextOptions()" [attr.x]="getTextX()"\n        [attr.y]="0">\n    <textPath [attr.href]="\'#gd-path-\' + id">\n      {{ distanceValue }}\n    </textPath>\n  </text>\n</svg>\n',styles:[".gd-annotation{position:absolute!important;cursor:pointer;z-index:9}.gd-annotation .gd-annotation-wrapper-border{outline:#679ffa solid 1px;display:-webkit-box}.gd-annotation .gd-annotation-wrapper{height:inherit;z-index:9}.gd-annotation .gd-annotation-wrapper ::ng-deep .palette{width:0;height:37px}.gd-annotation .gd-annotation-wrapper .gd-text-strikeout-line{background-color:#e04e4e;height:2px;width:100%}.gd-annotation .gd-annotation-wrapper .gd-text{border:none;outline:0;margin:0;padding:0;overflow:hidden;background-color:transparent;min-width:1em;min-height:1em}.gd-annotation .gd-annotation-wrapper .gd-point{background-color:#7cbc46;width:41px;height:41px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;color:#fff;border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;-khtml-border-radius:50%;box-shadow:0 1px 1px 1px #bbb;-moz-box-shadow:0 1px 1px 1px #bbb;-webkit-box-shadow:0 1px 1px 1px #bbb}.gd-annotation .gd-text-annotation{background-color:rgba(151,151,240,.51)}.gd-annotation .gd-text-strikeout-annotation{align-items:center;-webkit-box-align:center}.gd-annotation .gd-text-underline-annotation{align-items:end;-webkit-box-align:end}.gd-annotation .gd-text-redaction-annotation{background-color:#000}.gd-annotation .gd-text-replacement-annotation{background-color:#fff}.svg{z-index:1;position:absolute;top:0;left:0;width:100%;height:100%}.annotation-svg{position:absolute;cursor:pointer;z-index:2}"]}]}],t.ctorParameters=function(){return[{type:A},{type:E},{type:P}]},t}();var _=c,S=function(){function t(t,n,e,i,a,r,s,c,p,d,l,g,f){var u=this;this._annotationService=t,this._modalService=n,this._navigateService=e,this._tabActivatorService=i,this._hostingComponentsService=a,this._addDynamicComponentService=r,this._activeAnnotationService=s,this._removeAnnotationService=c,this._commentAnnotationService=p,this._windowService=f,this.title="annotation",this.files=[],this.browseFilesModal=o.CommonModals.BrowseFiles,this.formatDisabled=!this.file,this.annotationTypes=[y.TEXT,y.TEXT_STRIKEOUT,y.TEXT_UNDERLINE,y.TEXT_REPLACEMENT,y.TEXT_REDACTION,y.POLYLINE,y.ARROW,y.DISTANCE,y.AREA,y.TEXT_FIELD,y.WATERMARK,y.POINT],this.annotationTypeFirst=[y.TEXT,y.TEXT_UNDERLINE,y.TEXT_REDACTION,y.TEXT_REPLACEMENT,y.TEXT_STRIKEOUT],this.annotationTypeSecond=[y.POLYLINE,y.ARROW,y.DISTANCE,y.AREA,y.POINT],this.annotationTypeThird=[y.TEXT_FIELD,y.WATERMARK],this.countPages=0,this.comments=new Map,this.fileWasDropped=!1,this.annotations=new Map,this._activeAnnotationService.activeChange.subscribe((function(t){u.activeAnnotationId!==t&&(u.commentOpenedId=null,u.activeAnnotationId=t)})),this._commentAnnotationService.commentAnnotation.subscribe((function(t){u.commentOpenedId=t.id,u.comments.get(u.commentOpenedId)||u.comments.set(u.commentOpenedId,[])})),this._commentAnnotationService.addCommentObserve.subscribe((function(t){u.comments.get(u.commentOpenedId).push(t)})),this._removeAnnotationService.removeAnnotation.subscribe((function(t){var n=u.annotations.get(t.id);n&&n.destroy(),u.annotations.delete(t.id),u.commentOpenedId===t.id&&(u.commentOpenedId=null),u.comments.delete(t.id)})),d.uploadsChange.subscribe((function(t){if(t){var n=void 0;for(n=0;n<t.length;n++)u._annotationService.upload(t.item(n),"",u.rewriteConfig).subscribe((function(t){u.fileWasDropped?u.selectFile(t.guid,"",""):u.selectDir("")}))}})),l.checkPreload.subscribe((function(t){if(0!==u.preloadPageCountConfig)for(var n=t;n<t+2;n++)n>0&&n<=u.countPages&&!u.file.pages[n-1].data&&u.preloadPages(n,n)})),g.passChange.subscribe((function(t){u.selectFile(u.credentials.guid,t,o.CommonModals.PasswordRequired)})),this.isDesktop=f.isDesktop(),f.onResize.subscribe((function(t){u.isDesktop=f.isDesktop()}))}return t.prototype.getComments=function(){return this.comments.get(this.commentOpenedId)},Object.defineProperty(t.prototype,"rewriteConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.rewrite},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomConfig",{get:function(){return!!this.annotationConfig&&this.annotationConfig.zoom},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageSelectorConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.pageSelector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preloadPageCountConfig",{get:function(){return this.annotationConfig?this.annotationConfig.preloadPageCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downloadConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.download},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downloadOriginalConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.downloadOriginal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downloadAnnotatedConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.downloadAnnotated},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uploadConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.upload},enumerable:!0,configurable:!0}),t.prototype.defaultDocumentConfig=function(){return this.annotationConfig?this.annotationConfig.defaultDocument:""},Object.defineProperty(t.prototype,"printConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.print},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"browseConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.browse},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"htmlModeConfig",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableRightClickConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.enableRightClick},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textAnnotationConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.textAnnotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"areaAnnotationConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.areaAnnotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointAnnotationConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.pointAnnotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textStrikeoutAnnotationConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.textStrikeoutAnnotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"polylineAnnotationConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.polylineAnnotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textFieldAnnotationConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.textFieldAnnotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"watermarkAnnotationConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.watermarkAnnotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textReplacementAnnotationConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.textReplacementAnnotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"arrowAnnotationConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.arrowAnnotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textRedactionAnnotationConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.textRedactionAnnotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textUnderlineAnnotationConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.textUnderlineAnnotation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"distanceAnnotationConfig",{get:function(){return!this.annotationConfig||this.annotationConfig.distanceAnnotation},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.openModal=function(t){this._modalService.open(t)},t.prototype.closeModal=function(t){this._modalService.close(t)},t.prototype.selectDir=function(t){var n=this;this._annotationService.loadFiles(t).subscribe((function(t){return n.files=t||[]}))},t.prototype.selectFile=function(t,n,e){var i=this;this.credentials=new o.FileCredentials(t,n),this.file=null,this.commentOpenedId=null,this._annotationService.loadFile(this.credentials).subscribe((function(t){if(i.cleanAnnotations(),i.file=t,i.formatDisabled=!i.file,t){var n=i.preloadPageCountConfig,e=t.pages?t.pages.length:0;n>0?i.preloadPages(1,n>e?e:n):setTimeout((function(){var t,n;try{for(var e=f(i.file.pages),o=e.next();!o.done;o=e.next()){var a=o.value;i.importAnnotations(a.annotations?a.annotations:[])}}catch(n){t={error:n}}finally{try{o&&!o.done&&(n=e.return)&&n.call(e)}finally{if(t)throw t.error}}}),100),i._navigateService.countPages=e,i._navigateService.currentPage=1,i.countPages=e}})),e&&this._modalService.close(e),this.clearData()},t.prototype.preloadPages=function(t,n){for(var e=this,o=function(t){i._annotationService.loadPage(i.credentials,t).subscribe((function(n){e.file.pages[t-1]=n,e.importAnnotations(n.annotations?n.annotations:[])}))},i=this,a=t;a<=n;a++)o(a)},t.prototype.importAnnotations=function(t){var n,e;try{for(var o=f(t),i=o.next();!i.done;i=o.next()){var a=i.value,r=new v(a.left,a.top),s=this.addAnnotationComponent(a.pageNumber,r,a);this.comments.set(s,a.comments),this._activeAnnotationService.changeActive(s)}}catch(t){n={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}},t.prototype.upload=function(t){var n=this;this._annotationService.upload(null,t,this.rewriteConfig).subscribe((function(){n.selectDir("")}))},t.prototype.onRightClick=function(t){return this.enableRightClickConfig},t.prototype.downloadFile=function(){this.formatDisabled||window.location.assign(this._annotationService.getDownloadUrl(this.credentials))},t.prototype.annotate=function(){var t=this,n=this.prepareAnnotationsData();this._annotationService.annotate(this.credentials,n,!1).subscribe((function(n){t._modalService.open(o.CommonModals.OperationSuccess),t.selectFile(n.guid,null,o.CommonModals.OperationSuccess)}))},t.prototype.prepareAnnotationsData=function(){var t,n,e=[];try{for(var o=f(this.annotations.values()),i=o.next();!i.done;i=o.next()){var a=i.value.instance.getAnnotationData();a.comments=this.comments.get(a.id),e.push(a)}}catch(n){t={error:n}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return e},t.prototype.isVisible=function(t){var n=!this.file||this.file&&this.file.supportedAnnotations&&this.file.supportedAnnotations.find((function(n){return t===n}));return this.getAnnotationTypeConfig(t)&&n},t.prototype.activeTab=function(t){this.activeAnnotationTab=t},t.prototype.codesConfigFirst=function(){return this.checkConfig(this.annotationTypeFirst)},t.prototype.codesConfigSecond=function(){return this.checkConfig(this.annotationTypeSecond)},t.prototype.checkConfig=function(t){var n,e;try{for(var o=f(t),i=o.next();!i.done;i=o.next()){var a=i.value;if(this.getAnnotationTypeConfig(a.id))return!0}}catch(t){n={error:t}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(n)throw n.error}}return!1},t.prototype.codesConfigThird=function(){return this.getAnnotationTypeConfig(y.TEXT_FIELD.id)&&this.getAnnotationTypeConfig(y.WATERMARK.id)},t.prototype.getAnnotationTypeConfig=function(t){switch(t){case y.TEXT.id:return this.textAnnotationConfig;case y.AREA.id:return this.areaAnnotationConfig;case y.POINT.id:return this.pointAnnotationConfig;case y.TEXT_STRIKEOUT.id:return this.textStrikeoutAnnotationConfig;case y.POLYLINE.id:return this.polylineAnnotationConfig;case y.TEXT_FIELD.id:return this.textFieldAnnotationConfig;case y.WATERMARK.id:return this.watermarkAnnotationConfig;case y.TEXT_REPLACEMENT.id:return this.textReplacementAnnotationConfig;case y.ARROW.id:return this.arrowAnnotationConfig;case y.TEXT_REDACTION.id:return this.textRedactionAnnotationConfig;case y.TEXT_UNDERLINE.id:return this.textUnderlineAnnotationConfig;case y.DISTANCE.id:return this.distanceAnnotationConfig}},t.prototype.fileDropped=function(t){this.fileWasDropped=t},t.prototype.cleanAnnotations=function(){var t,n;try{for(var e=f(this.annotations.values()),o=e.next();!o.done;o=e.next()){o.value.destroy()}}catch(n){t={error:n}}finally{try{o&&!o.done&&(n=e.return)&&n.call(e)}finally{if(t)throw t.error}}this.annotations=new Map,this.comments=new Map},t.prototype.clearData=function(){var t,n;if(this.file&&this.file.pages)try{for(var e=f(this.file.pages),o=e.next();!o.done;o=e.next()){o.value.data=null}}catch(n){t={error:n}}finally{try{o&&!o.done&&(n=e.return)&&n.call(e)}finally{if(t)throw t.error}}},t.prototype.createAnnotation=function(t){if(t.preventDefault(),this.activeAnnotationTab){var n=o.Utils.getMousePosition(t),e=document.elementsFromPoint(n.x,n.y).find((function(t){return t.id&&t.id.startsWith("page-")}));if(e){var i=_(e).parent().parent()[0],a=this.getCurrentPosition(n,_(i)),r=e.id,s=1;if(r){var c=r.split("-");s=2===c.length?parseInt(c[1],10):s}var p=this.addAnnotationComponent(s,a,null);this._activeAnnotationService.changeActive(p),this.creatingAnnotationId=p,this._tabActivatorService.changeActiveTab(null)}}},t.prototype.addAnnotationComponent=function(t,n,e){var i=this._hostingComponentsService.find(t);if(i){var a=i.viewContainerRef,r=this._addDynamicComponentService.addDynamicComponent(a,I),s=this.getNextId();if(r.instance.id=s,r.instance.position=n,r.instance.pageNumber=t,e){var c=new b(e.width,e.height),p=y.getAnnotationType(e.type),d=o.Formatting.default();d.fontSize=e.fontSize,e.fontColor&&(d.color="#"+e.fontColor.toString(16)),d.font=e.font,r.instance.type=p?p.id:e.type,r.instance.dimension=c,r.instance.svgPath=e.svgPath,r.instance.textValue=e.text,d&&r.instance.saveFormatting(d)}else r.instance.type=this.activeAnnotationTab;var l=this.file.pages.find((function(n){return n.number===t}));return r.instance.pageWidth=l.width,r.instance.pageHeight=l.height,this.annotations.set(s,r),s}return null},t.prototype.resizingCreatingAnnotation=function(t){if(t.preventDefault(),this.creatingAnnotationId){var n=o.Utils.getMousePosition(t),e=this.annotations.get(this.creatingAnnotationId),i=e.instance.type,a=e.instance.pageNumber,r=this.getCurrentPosition(n,_("#page-"+a));i===y.POLYLINE.id||i===y.DISTANCE.id||i===y.ARROW.id?e.instance.draw(r):i!==y.POINT.id&&e.instance.calcDimensions(r)}},t.prototype.getCurrentPosition=function(t,n){var e=t.x-n.offset().left,o=t.y-n.offset().top;return new v(e,o)},t.prototype.finishCreatingAnnotation=function(t){this.creatingAnnotationId&&(this._activeAnnotationService.changeActive(this.creatingAnnotationId),this.creatingAnnotationId=null)},t.prototype.closeComments=function(){this.commentOpenedId=null},t.prototype.getNextId=function(){var t,n,e=0;try{for(var o=f(this.annotations.keys()),i=o.next();!i.done;i=o.next()){var a=i.value;a>e&&(e=a)}}catch(n){t={error:n}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return e+1},t.decorators=[{type:n.Component,args:[{selector:"gd-annotation-app",template:'<gd-loading-mask [loadingMask]="isLoading"></gd-loading-mask>\n<div class="wrapper" (contextmenu)="onRightClick($event)">\n  <div class="annotation-wrapper wrapper">\n    <gd-tabbed-toolbars [logo]="\'annotation\'" [icon]="\'pen-square\'">\n      <gd-tabs>\n        <gd-tab [tabTitle]="\'File\'" [icon]="\'folder-open\'" [id]="\'1\'" [active]="true">\n          <div id="files-tools" class="toolbar-panel">\n            <gd-button [icon]="\'folder-open\'" [tooltip]="\'Browse files\'" (click)="openModal(browseFilesModal)"\n                       *ngIf="browseConfig"></gd-button>\n\n            <gd-button [disabled]="formatDisabled" [icon]="\'download\'" [tooltip]="\'Download\'"\n                       (click)="downloadFile()" *ngIf="downloadConfig"></gd-button>\n            <gd-button [disabled]="formatDisabled" [icon]="\'save\'" [tooltip]="\'Save\'" (click)="annotate()"></gd-button>\n\n          </div>\n        </gd-tab>\n        <gd-tab [tabTitle]="\'Annotations\'" [icon]="\'highlighter\'" [id]="\'2\'"\n                *ngIf="isDesktop || (!isDesktop && codesConfigFirst())">\n          <div class="toolbar-panel">\n            <div *ngFor="let annotationType of (isDesktop ? annotationTypes : annotationTypeFirst)">\n              <gd-top-tab [disabled]="!file" *ngIf="isVisible(annotationType.id)"\n                          [icon]="annotationType.icon" (activeTab)="activeTab($event)"\n                          [id]="annotationType.id" [tooltip]="annotationType.name">\n              </gd-top-tab>\n            </div>\n          </div>\n        </gd-tab>\n        <gd-tab [tabTitle]="\'\'" [icon]="\'vector-square\'" [id]="\'3\'" *ngIf="!isDesktop && codesConfigSecond()">\n          <div class="toolbar-panel">\n            <div *ngFor="let annotationType of annotationTypeSecond">\n              <gd-top-tab [disabled]="!file" *ngIf="isVisible(annotationType.id)"\n                          [icon]="annotationType.icon" (activeTab)="activeTab($event)"\n                          [id]="annotationType.id" [tooltip]="annotationType.name">\n              </gd-top-tab>\n            </div>\n          </div>\n        </gd-tab>\n        <gd-tab [tabTitle]="\'\'" [icon]="\'i-cursor\'" [id]="\'4\'" *ngIf="!isDesktop && codesConfigThird()">\n          <div class="toolbar-panel">\n            <div *ngFor="let annotationType of annotationTypeThird">\n              <gd-top-tab [disabled]="!file" *ngIf="isVisible(annotationType.id)"\n                          [icon]="annotationType.icon" (activeTab)="activeTab($event)"\n                          [id]="annotationType.id" [tooltip]="annotationType.name">\n              </gd-top-tab>\n            </div>\n          </div>\n        </gd-tab>\n      </gd-tabs>\n    </gd-tabbed-toolbars>\n    <div class="doc-panel" *ngIf="file" (mousedown)="createAnnotation($event)"\n         (mousemove)="resizingCreatingAnnotation($event)" (mouseup)="finishCreatingAnnotation($event)"\n         (touchstart)="createAnnotation($event)" (touchmove)="resizingCreatingAnnotation($event)"\n         (touchend)="finishCreatingAnnotation($event)"\n         (panstart)="createAnnotation($event)" (panmove)="resizingCreatingAnnotation($event)"\n         (panend)="finishCreatingAnnotation($event)">\n      <gd-document class="gd-document" *ngIf="file" [file]="file" [mode]="htmlModeConfig" gdScrollable\n                   [preloadPageCount]="preloadPageCountConfig" gdRenderPrint [htmlMode]="htmlModeConfig"></gd-document>\n    </div>\n    <gd-comment-panel *ngIf="commentOpenedId" [annotationId]="commentOpenedId"\n                      [comments]="getComments()" (closeComments)="closeComments()">\n    </gd-comment-panel>\n\n    <gd-init-state [icon]="\'highlighter\'" [text]="\'Drop file here to upload\'" *ngIf="!file"\n                   (fileDropped)="fileDropped($event)">\n      Click\n      <fa-icon [icon]="[\'fas\',\'folder-open\']"></fa-icon>\n      to open file<br>\n      Or drop file here\n    </gd-init-state>\n  </div>\n  <gd-browse-files-modal (urlForUpload)="upload($event)" [files]="files" (selectedDirectory)="selectDir($event)"\n                         (selectedFileGuid)="selectFile($event, null, browseFilesModal)"\n                         [uploadConfig]="uploadConfig"></gd-browse-files-modal>\n\n  <gd-error-modal></gd-error-modal>\n  <gd-password-required></gd-password-required>\n  <gd-success-modal></gd-success-modal>\n  <svg class="svg" xmlns="http://www.w3.org/2000/svg">\n    <defs xmlns="http://www.w3.org/2000/svg">\n      <marker id="end" orient=\'auto\' markerWidth=\'20\' markerHeight=\'20\'\n              refX="10" refY="10" markerUnits="strokeWidth">\n        <path d=\'M0,7 L0,13 L12,10 z\' fill=\'#579AF0\'></path>\n      </marker>\n      <marker id="start" orient=\'auto\' markerWidth=\'20\' markerHeight=\'20\'\n              refX="0" refY="10" markerUnits="strokeWidth">\n        <path d=\'M12,7 L12,13 L0,10 z\' fill=\'#579AF0\'></path>\n      </marker>\n    </defs>\n  </svg>\n</div>\n',styles:["@import url(https://fonts.googleapis.com/css?family=Open+Sans&display=swap);:host *{font-family:'Open Sans',Arial,Helvetica,sans-serif}::ng-deep .page{position:relative}::ng-deep .gd-page-image{width:unset;height:unset}::ng-deep .top-panel{align-content:flex-start}.wrapper{-webkit-box-align:stretch;align-items:stretch;height:100%;width:100%;position:fixed;top:0;bottom:0;left:0;right:0}.doc-panel{display:-webkit-box;display:flex;height:inherit}.gd-document{width:100%;height:calc(100% - 90px)}.toolbar-panel{width:100%;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.annotation-wrapper ::ng-deep .button{color:#3e4e5a!important}.annotation-wrapper ::ng-deep .button .text{padding:0!important}.annotation-wrapper ::ng-deep .select{color:#3e4e5a!important}@media (max-width:1037px){::ng-deep .panzoom{-webkit-box-pack:unset!important;justify-content:unset!important}::ng-deep .logo ::ng-deep .icon{font-size:24px!important}::ng-deep .top-panel{height:120px!important}}"]}]}],t.ctorParameters=function(){return[{type:m},{type:o.ModalService},{type:o.NavigateService},{type:o.TopTabActivatorService},{type:o.HostingDynamicComponentService},{type:o.AddDynamicComponentService},{type:A},{type:E},{type:P},{type:o.UploadFilesService},{type:o.PagePreloadService},{type:o.PasswordService},{type:o.WindowService}]},t}();var k=function(){function t(t){this._commentAnnotationService=t,this.closeComments=new n.EventEmitter}return t.prototype.ngOnInit=function(){},t.prototype.closePanel=function(){this.closeComments.emit(!0)},t.prototype.newComment=function(){this.currentComment=new C(this.annotationId)},t.prototype.clearComment=function(){this.currentComment=null},t.prototype.addComment=function(){this._commentAnnotationService.addComment(C.create(this.currentComment)),this.currentComment=null},t.decorators=[{type:n.Component,args:[{selector:"gd-comment-panel",template:'<div class="gd-comments-panel">\n  <div class="gd-comments-head">\n    <fa-icon [icon]="[\'fas\', \'plus\']" [class]="\'ng-fa-icon icon\'" (click)="newComment()"></fa-icon>\n    <span class="gd-comments-title">Comments</span>\n    <fa-icon [icon]="[\'fas\', \'times\']" [class]="\'ng-fa-icon icon\'" (click)="closePanel()"></fa-icon>\n  </div>\n  <div class="gd-comments-body">\n    <div *ngIf="comments.length != 0">\n      <div *ngFor="let comment of comments">\n        <gd-comment [comment]="comment"></gd-comment>\n      </div>\n    </div>\n    <gd-create-comment *ngIf="currentComment" [comment]="currentComment" (addComment)="addComment()"\n                       (removeComment)="clearComment()"></gd-create-comment>\n    <div class="gd-empty-comments-list" *ngIf="comments.length == 0 && !currentComment">\n      <fa-icon [icon]="[\'fas\',\'comments\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n      <span class="gd-empty-text">No comments yet. Be the first one, <br/>\n        </span>\n      <span class="gd-empty-text gd-empty-bold-text">add comment.</span>\n    </div>\n  </div>\n</div>\n',styles:[".gd-comments-panel{position:absolute;right:0;top:30px;overflow:auto!important;width:334px;display:-webkit-box;display:flex;height:100%;z-index:9;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.gd-comments-panel .gd-comments-head{height:60px;width:334px;display:-webkit-box;display:flex;background-color:#222e35;color:#959da5;-webkit-box-align:center;align-items:center}.gd-comments-panel .gd-comments-head .icon{-webkit-box-flex:0;flex:0 0 40px;margin-left:20px;cursor:pointer}.gd-comments-panel .gd-comments-head .gd-comments-title{-webkit-box-flex:1;flex:1;font-size:13px;font-weight:700}.gd-comments-panel .gd-comments-body{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;background-color:#f4f4f4;height:calc(100% - 90px)}.gd-comments-panel .gd-comments-body .gd-empty-comments-list{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;color:#959da5;width:250px;height:250px;margin-top:40px}.gd-comments-panel .gd-comments-body .gd-empty-comments-list .icon{font-size:65px;margin-bottom:40px}.gd-comments-panel .gd-comments-body .gd-empty-comments-list .gd-empty-text{font-size:15px}.gd-comments-panel .gd-comments-body .gd-empty-comments-list .gd-empty-bold-text{font-weight:700}"]}]}],t.ctorParameters=function(){return[{type:P}]},t.propDecorators={comments:[{type:n.Input}],annotationId:[{type:n.Input}],closeComments:[{type:n.Output}]},t}();var D=function(){function t(){}return t.prototype.ngOnInit=function(){},t.prototype.getTime=function(){var t=Date.now()-this.comment.time,n=Math.round(t/36e5);if(n>1)return"about "+n+" hours ago";var e=Math.round(t/6e4);if(e>1)return"about "+e+" minutes ago";var o=Math.round(t/1e3);return o>1?"about "+o+" seconds ago":this.comment.time},t.decorators=[{type:n.Component,args:[{selector:"gd-comment",template:'<div class="gd-comment">\n  <div class="gd-comment-head">\n    <fa-icon [icon]="[\'fas\', \'user-circle\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n    <span class="gd-name">{{comment.userName}}</span>\n  </div>\n  <span class="gd-message">{{comment.text}}</span>\n  <span class="gd-time">{{getTime()}}</span>\n</div>\n',styles:[".gd-comment{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:294px;font-size:13px;color:#3e4e5a;padding-top:20px}.gd-comment .gd-comment-head{display:-webkit-box;display:flex}.gd-comment .gd-comment-head .icon{-webkit-box-flex:0;flex:0 0 30px}.gd-comment .gd-comment-head .gd-name{font-weight:700}.gd-comment .gd-message{padding-top:5px}.gd-comment .gd-time{color:#acacac;padding-top:5px}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={comment:[{type:n.Input}]},t}();var N=c,R=function(){function t(){this.addComment=new n.EventEmitter,this.removeComment=new n.EventEmitter}return t.prototype.ngOnInit=function(){setTimeout((function(){var t=N("#name");t&&t.focus()}),100)},t.prototype.onAddComment=function(){this.addComment.emit(this.comment)},t.prototype.clearComment=function(){this.removeComment.emit(!0)},t.prototype.saveText=function(t){this.comment.text=t},t.prototype.saveName=function(t){this.comment.userName=t},t.decorators=[{type:n.Component,args:[{selector:"gd-create-comment",template:'<div class="gd-new-comment">\n  <input type="text" class="gd-name" id="name" [value]="comment.userName" #name autofocus (keyup)="saveName(name.value)" placeholder="Name"/>\n  <textarea class="gd-text" [value]="comment.text" #text (keyup)="saveText(text.value)" placeholder="Message"></textarea>\n  <div class="gd-buttons">\n    <gd-button (click)="clearComment()" [iconOnly]="false" class="gd-cancel-comment">\n      Cancel\n    </gd-button>\n    <gd-button (click)="onAddComment()" [icon]="\'share\'" class="gd-add-comment" [iconOnly]="false">\n      Reply\n    </gd-button>\n  </div>\n</div>\n',styles:[".gd-new-comment{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center;padding-top:20px;width:294px;font-size:14px}.gd-new-comment .gd-buttons{display:-webkit-box;display:flex;margin-top:20px;width:294px;-webkit-box-pack:end;justify-content:flex-end}.gd-new-comment .gd-buttons .gd-add-comment{background-color:#4b566c!important;margin-left:10px;border:1px solid #707070}.gd-new-comment .gd-buttons .gd-add-comment ::ng-deep .button{color:#fff!important}.gd-new-comment .gd-buttons .gd-cancel-comment{background-color:transparent;border:1px solid #707070}.gd-new-comment .gd-buttons .gd-cancel-comment ::ng-deep .button{color:#acacac!important}.gd-new-comment .gd-name{width:100%;height:37px;border:1px solid #6e6e6e}.gd-new-comment .gd-text{width:100%;height:100px;border:1px solid #6e6e6e;margin-top:20px}"]}]}],t.ctorParameters=function(){return[]},t.propDecorators={comment:[{type:n.Input}],addComment:[{type:n.Output}],removeComment:[{type:n.Output}]},t}();function M(t){return function(){return t.load()}}function L(t){return new o.LoadingMaskInterceptorService(t)}var F=function(){function t(){p.library.add(d.fas,l.far)}return t.forRoot=function(n){return o.Api.DEFAULT_API_ENDPOINT=n,{ngModule:t}},t.decorators=[{type:n.NgModule,args:[{declarations:[S,I,k,D,R],exports:[o.CommonComponentsModule,S,I,k,D,R],imports:[e.CommonModule,o.CommonComponentsModule,a.HttpClientModule,r.FontAwesomeModule,s.ClickOutsideModule],providers:[o.ConfigService,h,A,E,P,{provide:a.HTTP_INTERCEPTORS,useClass:o.ErrorInterceptorService,multi:!0},{provide:n.APP_INITIALIZER,useFactory:M,deps:[h],multi:!0},o.LoadingMaskService,{provide:a.HTTP_INTERCEPTORS,useFactory:L,multi:!0,deps:[o.LoadingMaskService]}],entryComponents:[I]}]}],t.ctorParameters=function(){return[]},t}();t.ActiveAnnotationService=A,t.AnnotationAppComponent=S,t.AnnotationConfigService=h,t.AnnotationModule=F,t.AnnotationService=m,t.CommentAnnotationService=P,t.RemoveAnnotationService=E,t.initializeApp=M,t.setupLoadingInterceptor=L,t.ɵa=I,t.ɵb=k,t.ɵc=D,t.ɵd=R,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=groupdocs.examples.angular-annotation.umd.min.js.map