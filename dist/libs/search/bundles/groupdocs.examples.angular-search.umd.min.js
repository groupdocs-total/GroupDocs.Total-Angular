!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/platform-browser"),require("@angular/core"),require("@angular/common/http"),require("@groupdocs.examples.angular/common-components"),require("rxjs"),require("@fortawesome/angular-fontawesome")):"function"==typeof define&&define.amd?define("@groupdocs.examples.angular/search",["exports","@angular/platform-browser","@angular/core","@angular/common/http","@groupdocs.examples.angular/common-components","rxjs","@fortawesome/angular-fontawesome"],t):t(((e=e||self).groupdocs=e.groupdocs||{},e.groupdocs.examples=e.groupdocs.examples||{},e.groupdocs.examples.angular=e.groupdocs.examples.angular||{},e.groupdocs.examples.angular.search={}),e.ng.platformBrowser,e.ng.core,e.ng.common.http,e.commonComponents,e.rxjs,e.angularFontawesome)}(this,(function(e,t,i,o,n,r,s){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function l(e,t){function i(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var a=function(){function e(e,t){this._http=e,this._config=t,this._itemToRemove=new r.BehaviorSubject(null),this.itemToRemove=this._itemToRemove.asObservable()}return e.prototype.addFilesToIndex=function(e){return this._http.post(this._config.getSearchApiEndpoint()+n.Api.ADD_FILES_TO_INDEX,e,n.Api.httpOptionsJson)},e.prototype.loadFiles=function(e){return this._http.post(this._config.getSearchApiEndpoint()+n.Api.LOAD_FILE_TREE,{path:e},n.Api.httpOptionsJson)},e.prototype.loadFile=function(e){return this._http.post(this._config.getSearchApiEndpoint()+n.Api.LOAD_DOCUMENT_DESCRIPTION,e,n.Api.httpOptionsJson)},e.prototype.upload=function(e,t,i){var o=new FormData;return o.append("file",e),o.append("rewrite",String(i)),t&&o.append("url",t),this._http.post(this._config.getSearchApiEndpoint()+n.Api.UPLOAD_DOCUMENTS,o)},e.prototype.search=function(e,t){return this._http.post(this._config.getSearchApiEndpoint()+n.Api.SEARCH,{query:t},n.Api.httpOptionsJson)},e.prototype.removeFile=function(e){return this._http.post(this._config.getSearchApiEndpoint()+n.Api.REMOVE_FROM_INDEX,e,n.Api.httpOptionsJson)},e.prototype.selectedItemToRemove=function(e){this._itemToRemove.next(e)},e.prototype.getDocumentStatus=function(e){return this._http.post(this._config.getSearchApiEndpoint()+n.Api.GET_FILE_STATUS,e,n.Api.httpOptionsJson)},e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:o.HttpClient},{type:n.ConfigService}]},e.ngInjectableDef=i.ɵɵdefineInjectable({factory:function(){return new e(i.ɵɵinject(o.HttpClient),i.ɵɵinject(n.ConfigService))},token:e,providedIn:"root"}),e}();var c=function(){};var p=function(){function e(e,t){this._http=e,this._config=t,this._searchConfig=new r.BehaviorSubject(new c),this._updatedConfig=this._searchConfig.asObservable()}return Object.defineProperty(e.prototype,"updatedConfig",{get:function(){return this._updatedConfig},enumerable:!0,configurable:!0}),e.prototype.load=function(){var e=this;return new Promise((function(t,i){var o=e._config.getConfigEndpoint(n.Api.SEARCH_APP);e._http.get(o,n.Api.httpOptionsJson).toPromise().then((function(i){var o=i;e._searchConfig.next(o),t()})).catch((function(e){i("Could not load search config: "+JSON.stringify(e))}))}))},e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:o.HttpClient},{type:n.ConfigService}]},e.ngInjectableDef=i.ɵɵdefineInjectable({factory:function(){return new e(i.ɵɵinject(o.HttpClient),i.ɵɵinject(n.ConfigService))},token:e,providedIn:"root"}),e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}l(t,e)}(n.FileModel);var f={Indexing:"Indexing",SuccessfullyProcessed:"SuccessfullyProcessed",Skipped:"Skipped",ProcessedWithError:"ProcessedWithError",PasswordRequired:"PasswordRequired"},g=function(){function e(e,t,i,o,r,s,d){var l=this;this._searchService=e,this._modalService=t,this._windowService=s,this._loadingMaskService=d,this.title="search",this.files=[],this.searchResultItems=[],this.indexedFiles=[],this.browseFilesModal=n.CommonModals.BrowseFiles,this.fileWasDropped=!1,i.updatedConfig.subscribe((function(e){l.searchConfig=e})),o.uploadsChange.subscribe((function(e){if(e){var t=void 0;for(t=0;t<e.length;t++)l._searchService.upload(e.item(t),"",l.searchConfig.rewrite).subscribe((function(e){l.fileWasDropped||l.selectDir("")}))}})),r.passChange.subscribe((function(e){l.closeModal(n.CommonModals.PasswordRequired);var t=l.indexedFiles.filter((function(e){return e.documentStatus===f.PasswordRequired}))[0];t.password=e,l._searchService.addFilesToIndex([t]).subscribe((function(){l.loadIndexedFiles(!0)}))})),this.isDesktop=s.isDesktop(),s.onResize.subscribe((function(e){l.isDesktop=s.isDesktop()})),e.itemToRemove.subscribe((function(e){e&&l._searchService.removeFile(e).subscribe((function(){l.removeFileFromList(e)}))}))}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var e=this;this._loadingMaskService.onLoadingChanged.subscribe((function(t){return e.isLoading=t}))},Object.defineProperty(e.prototype,"rewriteConfig",{get:function(){return!this.searchConfig||this.searchConfig.rewrite},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uploadConfig",{get:function(){return!this.searchConfig||this.searchConfig.upload},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseConfig",{get:function(){return!this.searchConfig||this.searchConfig.browse},enumerable:!0,configurable:!0}),e.prototype.openModal=function(e){this._modalService.open(e)},e.prototype.closeModal=function(e){this._modalService.close(e)},e.prototype.selectDir=function(e){var t=this;this._searchService.loadFiles(e).subscribe((function(e){return t.files=e||[]}))},e.prototype.clearSearchResult=function(){this.searchResult=null,this.firstSearchPerformed&&0===this.indexedFiles.length&&this.loadIndexedFiles(!0)},e.prototype.selectAllItems=function(e){this.files.forEach((function(t){t.isDirectory||t.directory||(t.selected=e)}))},e.prototype.loadIndexedFiles=function(e){var t=this;e&&this._searchService.loadFiles(this.searchConfig.indexedFilesDirectory).subscribe((function(e){if(e&&t.skipPasswordProtected&&e.filter((function(e){return e.documentStatus===f.PasswordRequired})).length>0&&(e.filter((function(e){return e.documentStatus===f.PasswordRequired}))[0].documentStatus=f.Skipped),t.indexedFiles=e||[],t.indexedFiles.filter((function(e){return e.documentStatus===f.Indexing})).length>0||!t.skipPasswordProtected&&t.indexedFiles.filter((function(e){return e.documentStatus===f.PasswordRequired})).length>0)var i=setInterval((function(){t._searchService.getDocumentStatus(t.indexedFiles.filter((function(e){return e.documentStatus===f.Indexing||!t.skipPasswordProtected&&e.documentStatus===f.PasswordRequired}))).toPromise().then((function(e){e.forEach((function(e){e.documentStatus!==f.Indexing&&(t.indexedFiles.filter((function(t){return t.guid===e.guid}))[0].documentStatus=e.documentStatus)})),0===t.indexedFiles.filter((function(e){return e.documentStatus===f.Indexing})).length&&clearInterval(i)})).catch((function(e){clearInterval(i)}))}),1e3)}))},e.prototype.cancel=function(e){this.indexedFiles.filter((function(e){return e.documentStatus===f.PasswordRequired}))[0].documentStatus=f.Skipped,this.skipPasswordProtected=!0,this.loadIndexedFiles(!0)},e.prototype.upload=function(e){var t=this;this._searchService.upload(null,e,this.rewriteConfig).subscribe((function(){t.selectDir("")}))},e.prototype.fileDropped=function(e,t){var i=this;void 0===t&&(t=!1),this.fileWasDropped=e,t&&this._searchService.loadFiles("").subscribe((function(e){return i.files=e||[]}))},e.prototype.removeFileFromList=function(e){var t=this;this.indexedFiles.length>0&&this.indexedFiles.forEach((function(i,o){i.guid===e.guid&&t.indexedFiles.splice(o,1)}))},e.prototype.search=function(e){var t=this;if(""!==e){var i=[];i.push(this.credentials),this._searchService.search(i,e).subscribe((function(e){t.searchResult=e,t.firstSearchPerformed=!0}))}},e.decorators=[{type:i.Component,args:[{selector:"gd-search-app",template:'<gd-loading-mask [loadingMask]="isLoading"></gd-loading-mask>\n<div class="wrapper">\n  <div class="top-panel">\n    <gd-logo [logo]="\'search\'" icon="search"></gd-logo>\n    <gd-top-toolbar class="toolbar-panel">\n      <gd-button [icon]="\'folder-open\'" [tooltip]="\'Browse files\'" (click)="openModal(browseFilesModal)"\n                 *ngIf="browseConfig" ></gd-button>\n    </gd-top-toolbar>\n    <gd-search-panel (searchText)="search($event)" (clearQuery)="clearSearchResult()"></gd-search-panel>\n  </div>\n\n  <gd-init-state [icon]="\'eye\'" [text]="\'Drop file here to upload\'" *ngIf="indexedFiles.length === 0" (fileDropped)="fileDropped($event)">\n    Click <fa-icon [icon]="[\'fas\',\'folder-open\']"></fa-icon> to open file<br>\n    Or drop file here\n  </gd-init-state>\n\n  <gd-indexed-files-list [files]="indexedFiles" *ngIf="indexedFiles.length > 0 && !searchResult"></gd-indexed-files-list>\n\n  <gd-search-result-summary [searchResult]="searchResult" *ngIf="searchResult"></gd-search-result-summary>\n\n  <gd-search-browse-files-modal (urlForUpload)="upload($event)" [files]="files" (selectedDirectory)="selectDir($event)"\n                         [uploadConfig]="uploadConfig" (selectAll)="selectAllItems($event)" (fileDropped)="fileDropped($event, true)"\n                         (filesAddedToIndex)="loadIndexedFiles($event)"></gd-search-browse-files-modal>\n\n  <gd-error-modal></gd-error-modal>\n  <gd-password-required (cancelEvent)="cancel($event)"></gd-password-required>\n</div>\n',styles:["@import url(https://fonts.googleapis.com/css?family=Open+Sans&display=swap);:host *{font-family:'Open Sans',Arial,Helvetica,sans-serif}.gd-document,/deep/ .document{-webkit-user-select:text!important;-moz-user-select:text!important;-ms-user-select:text!important;user-select:text!important}.current-page-number{margin-left:7px;font-size:14px;color:#959da5;width:37px;height:37px;line-height:37px;text-align:center}.current-page-number.active{color:#fff}.wrapper{-webkit-box-align:stretch;align-items:stretch;height:100%;width:100%;position:fixed;top:0;bottom:0;left:0;right:0}.doc-panel{display:-webkit-box;display:flex;height:calc(100vh - 60px);-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.thumbnails-button{position:absolute;right:3px}.top-panel{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;width:100%}.toolbar-panel{background-color:#3e4e5a;width:100%}::ng-deep .tools .button,::ng-deep .tools .nav-caret,::ng-deep .tools .selected-value{color:#fff!important}::ng-deep .tools .button.inactive,::ng-deep .tools .nav-caret.inactive,::ng-deep .tools .selected-value.inactive{color:#959da5!important}::ng-deep .tools .button{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column}::ng-deep .tools .dropdown-menu .option{color:#6e6e6e!important}::ng-deep .tools .dropdown-menu .option:hover{background-color:#4b566c!important}::ng-deep .tools .icon-button{margin:0 0 0 7px!important}::ng-deep .tools .select{width:65px;height:37px;margin-left:7px;line-height:37px;text-align:center}@media (max-width:1037px){.current-page-number,.mobile-hide{display:none}::ng-deep .tools gd-button:nth-child(1)>.icon-button{margin:0 0 0 10px!important}::ng-deep .tools .icon-button{height:60px;width:60px}::ng-deep .tools .gd-nav-search-btn .icon-button{height:37px;width:37px}::ng-deep .tools .gd-nav-search-btn .button{font-size:14px}}"]}]}],e.ctorParameters=function(){return[{type:a},{type:n.ModalService},{type:p},{type:n.UploadFilesService},{type:n.PasswordService},{type:n.WindowService},{type:n.LoadingMaskService}]},e}();var u=function(){function e(){this.text="",this.searchText=new i.EventEmitter,this.clearQuery=new i.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.search=function(){this.searchText.emit(this.text)},e.prototype.setText=function(e){this.text=e,""===e&&this.clearQueryString()},e.prototype.clearQueryString=function(){this.text="",this.textElement.nativeElement.value="",this.clearQuery.emit("")},e.decorators=[{type:i.Component,args:[{selector:"gd-search-panel",template:'<div class="gd-search-panel">\n  <input type="text" class="gd-search-input" (keydown.enter)="search()" #text (input)="setText(text.value)" placeholder="Search query"/>\n  <gd-button class="gd-clear-btn" [icon]="\'times\'" [tooltip]="\'Clear search query\'" (click)="clearQueryString()" *ngIf="text.value"></gd-button>\n  <gd-button class="gd-search-btn" [icon]="\'search\'" (click)="search()" [iconOnly]="false"></gd-button>\n</div>\n',styles:[".gd-search-panel{position:absolute;display:-webkit-box;display:flex;left:0;top:60px;width:100%;background-color:#e7e7e7;-webkit-box-align:center;align-items:center;height:60px}.gd-search-panel .gd-search-input{float:left;height:37px;width:100%;font-size:14px;border:1px solid #6e6e6e;box-sizing:border-box;padding:6px 0 5px 9px;margin-left:20px}.gd-search-panel .gd-search-btn{background-color:#3e4e5a;margin-right:20px;width:37px;height:37px;padding:0!important}.gd-search-panel .gd-search-btn ::ng-deep .button{padding:0!important}.gd-search-panel .gd-clear-btn{position:absolute;right:50px}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={textElement:[{type:i.ViewChild,args:["text",{static:!0}]}],searchText:[{type:i.Output}],clearQuery:[{type:i.Output}]},e}();var h=function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.getTotalOccurrencesMessage=function(){return this.searchResult?0===this.searchResult.totalOccurences?"Nothing found":"Found <b>"+this.searchResult.totalOccurences+"</b> occurrences <b>"+this.searchResult.totalFiles+"</b> files":"Nothing found"},e.prototype.getIndexedFilesMessage=function(){if(this.searchResult)return"<b>"+this.searchResult.indexedFiles+"</b> files indexed"},e.prototype.getSearchDuration=function(){if(this.searchResult)return this.searchResult.searchDuration},e.decorators=[{type:i.Component,args:[{selector:"gd-search-result-summary",template:'<div id="gd-search-result-summary">\n  <div class="gd-search-result-summary-status">\n    <fa-icon [icon]="[\'fas\',\'search\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n    <div class="gd-total-occurrences" [innerHTML]="getTotalOccurrencesMessage()"></div>\n    <fa-icon [icon]="[\'fas\',\'clock\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n    <div class="gd-search-duration">{{getSearchDuration()}} sec</div>\n    <div class="gd-indexed-files" [innerHTML]="getIndexedFilesMessage()"></div>\n  </div>\n  <div *ngIf="searchResult?.totalOccurences > 0" class="gd-search-result-summary-header">\n    <div>File</div>\n    <div>Occurrences</div>\n    <div>Size</div>\n  </div>\n  <div *ngIf="searchResult?.foundFiles" class="gd-search-result-summary-body">\n    <div *ngFor="let item of searchResult.foundFiles">\n        <gd-search-result-item [item]="item"></gd-search-result-item>\n    </div>\n  </div>\n</div>',styles:["#gd-search-result-summary{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;background-color:#e7e7e7;top:120px;position:absolute;width:100%}.gd-search-result-summary-header{display:-webkit-box;display:flex;font-size:13px;text-transform:uppercase;color:#6e6e6e;width:100%;height:60px;background-color:#f4f4f4;font-weight:700;-webkit-box-align:center;align-items:center}.gd-search-result-summary-status{display:-webkit-box;display:flex;font-size:12px;color:#fff;width:100%;height:30px;background-color:#25c2d4;-webkit-box-align:center;align-items:center;padding-left:17px}.gd-total-occurrences{padding-left:8px;padding-right:17px}.gd-search-duration{padding-left:8px}.gd-indexed-files{right:18px;position:absolute}.gd-search-result-summary-header div:nth-child(1){width:253px;text-align:left;display:-webkit-box;display:flex;padding-left:17px}.gd-search-result-summary-header div:nth-child(2){text-align:left;display:-webkit-box;display:flex}.gd-search-result-summary-header div:nth-child(3){width:30px;position:fixed;right:111px;text-align:left}.gd-search-result-summary-body{overflow-y:scroll;height:calc(100% - 210px)}.gd-search-result-last-placeholder{margin:0 52px}@media (max-width:1037px){.gd-indexed-files,.gd-search-result-header,.gd-search-result-summary-header div:nth-child(3){display:none}.gd-search-result-summary-header div:nth-child(2){position:absolute;right:18px}}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={searchResult:[{type:i.Input}]},e}();var x=function(){function e(){}return e.prototype.ngOnInit=function(){},e.prototype.getSizeString=function(e){var t=e/1024/1024;if(t>1)return Math.round(100*t)/100+" MB";var i=e/1024;return i>1?Math.round(100*i)/100+" KB":e+" Bytes"},e.prototype.getFormatIcon=function(e){return n.FileUtil.find(e.name,e.directory).icon},e.prototype.getFormatName=function(e){return n.FileUtil.find(e.name,e.directory).format},e.prototype.getOccurrencesMessage=function(e){return"Found <b>"+e+"</b> occurrences"},e.prototype.togglePhrases=function(e){e.showPhrases=!e.showPhrases},e.decorators=[{type:i.Component,args:[{selector:"gd-search-result-item",template:'<div *ngIf="item" class="gd-search-result-item">\n  <div class="gd-found-file-name">\n    <fa-icon [icon]="[\'fas\', getFormatIcon(item)]" [class]="\'ng-fa-icon\'" [ngClass]="[\'fa-\' + getFormatIcon(item)]"></fa-icon>\n    <div class="gd-file-name gd-search-result-name">{{item.name}}\n      <div class="gd-file-format">{{getFormatName(item)}}</div>\n    </div>\n  </div>\n  <div class="gd-file-occurrences gd-search-result-size">\n    <span class="gd-search-result-occurrences" [innerHTML]="getOccurrencesMessage(item.occurrences)" (click)="togglePhrases(item)"></span>\n  </div>\n  <div class="gd-file-size gd-search-result-size">{{getSizeString(item.size)}}</div>\n</div>\n<div class="gd-found-phrases-wrapper" *ngIf="item?.showPhrases">\n  <div class="gd-vertical-bar"></div>\n  <div class="gd-found-phrases-content-wrapper">\n    <div *ngIf="item" class="gd-found-phrases-title">\n      <div class="gd-found-file-name">Found phrases</div>\n      <gd-button class="gd-close-btn" [icon]="\'times\'" [tooltip]="\'Close\'" (click)="togglePhrases(item)"></gd-button>\n    </div>\n    <div *ngFor="let phrase of item.foundPhrases" class="gd-search-result-phrase">\n      <div [innerHTML]="phrase"></div>\n    </div>\n  </div>\n</div>',styles:[".gd-search-result-item{display:-webkit-box;display:flex;width:100%;height:98px;border-bottom:1px solid #e7e7e7;background-color:#fff;-webkit-box-align:center;align-items:center;position:relative}.gd-search-result-phrase{display:-webkit-box;display:flex;width:100%;height:40px;border-bottom:1px solid #e7e7e7;background-color:#fff;-webkit-box-align:center;align-items:center;font-size:13px;padding-left:17px;overflow:hidden}.gd-search-result-phrase ::ng-deep span{font-weight:700}.gd-found-phrases-title{display:-webkit-box;display:flex;font-size:13px;text-transform:uppercase;color:#3e4e5a;width:calc(100% + 17px);height:60px;background-color:#f4f4f4;font-weight:700;-webkit-box-align:center;align-items:center;position:relative}.gd-found-phrases-title .gd-close-btn{position:absolute;right:30px}.gd-vertical-bar{width:17px;background-color:#3e4e5a}.gd-found-phrases-content-wrapper{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:calc(100% - 34px)}.gd-found-phrases-wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.gd-found-file-name{display:-webkit-box;display:flex;width:253px;padding-left:17px}.gd-search-result-name{text-align:left;cursor:default;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%}.gd-search-result-size{text-align:left;font-size:12px}.gd-file-size{width:60px;color:#777;position:absolute;right:65px}.gd-file-format{font-size:10px;color:#acacac;padding-top:4px}.gd-file-format.mobile{display:none}.gd-file-occurrences{color:#777}.gd-search-result-item .ng-fa-icon.fa-file-pdf{color:#e21717}.gd-search-result-item .ng-fa-icon.fa-file-word{color:#6979b9}.gd-search-result-item .ng-fa-icon.fa-file-powerpoint{color:#e29417}.gd-search-result-item .ng-fa-icon.fa-file-excel{color:#3fa300}.gd-search-result-item .ng-fa-icon.fa-file-image{color:#e217da}.gd-search-result-item .ng-fa-icon.fa-file-text .fa-folder{color:#5d6a75}.gd-found-file-name .ng-fa-icon{font-size:33px}.gd-found-file-name fa-icon{font-size:32px;margin:0 11px 0 0}.gd-search-result-occurrences{text-decoration:underline;cursor:pointer}@media (max-width:1037px){.gd-file-size{display:none}.gd-file-format.mobile{display:block}.gd-file-format.mobile>fa-icon{color:#bebebe}.gd-file-format.mobile fa-icon{font-size:10px;margin-right:2.1px}.gd-file-format.mobile fa-icon:nth-child(1){margin-right:6px}.gd-file-format{font-size:11px}.gd-found-file-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%}.gd-file-occurrences{width:94px;position:absolute;right:15px}}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={item:[{type:i.Input}]},e}();var m=function(){function e(){this.files=[]}return e.prototype.ngOnInit=function(){},e.decorators=[{type:i.Component,args:[{selector:"gd-indexed-files-list",template:'<div id="gd-indexed-files-list">\n  <div class="gd-indexed-files-list-header">\n    <div class="gd-placeholder"></div>\n    <div>File</div>\n    <div class="gd-indexed-files-size">Size</div>\n    <div>State</div>\n  </div>\n  <div class="gd-indexed-files-list-body">\n    <div *ngFor="let file of files">\n        <gd-indexed-file [file]="file"></gd-indexed-file>\n    </div>\n  </div>\n</div>',styles:["#gd-indexed-files-list{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;height:100%;background-color:#e7e7e7;top:120px;position:absolute;width:100%}.gd-indexed-files-list-header{display:-webkit-box;display:flex;font-size:13px;text-transform:uppercase;color:#6e6e6e;width:100%;height:60px;background-color:#f4f4f4;font-weight:700;-webkit-box-align:center;align-items:center}.gd-placeholder{margin:0 42px}.gd-indexed-files-list-header div:nth-child(2){text-align:left;display:-webkit-box;display:flex}.gd-indexed-files-list-header div:nth-child(3){position:absolute;right:325px}.gd-indexed-files-list-header div:nth-child(4){position:absolute;right:153px}.gd-indexed-files-list-body{overflow-y:scroll;height:calc(100% - 180px)}.gd-last-placeholder{margin:0 52px}@media (max-width:1037px){.gd-indexed-files-size{display:none}.gd-placeholder{margin:0 34px}.gd-indexed-files-list-header div:nth-child(4){right:48px}}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={files:[{type:i.Input}]},e}();var b=function(){function e(e){this._searchService=e}return e.prototype.ngOnInit=function(){},e.prototype.removeFile=function(e,t){e.preventDefault(),e.stopPropagation(),this._searchService.selectedItemToRemove(t)},e.prototype.getSizeString=function(e){var t=e/1024/1024;if(t>1)return Math.round(100*t)/100+" MB";var i=e/1024;return i>1?Math.round(100*i)/100+" KB":e+" Bytes"},e.prototype.getFormatIcon=function(){return n.FileUtil.find(this.file.name,this.file.directory).icon},e.prototype.getFormatName=function(){return n.FileUtil.find(this.file.name,this.file.directory).format},e.prototype.getStatusIcon=function(){switch(this.file.documentStatus){case f.Indexing:case f.PasswordRequired:return"circle-notch";case f.SuccessfullyProcessed:return"check";case f.ProcessedWithError:return"times";case f.Skipped:return"forward";default:return"times"}},e.prototype.getStatusTitle=function(){switch(this.file.documentStatus){case f.Indexing:case f.PasswordRequired:return"Indexing";case f.SuccessfullyProcessed:return"Indexed";case f.ProcessedWithError:return"Error";case f.Skipped:return"Skipped";default:return"times"}},e.decorators=[{type:i.Component,args:[{selector:"gd-indexed-file",template:'<div *ngIf="file" class="gd-indexed-file">\n  <div class="gd-indexed-file-remove" (click)="removeFile($event, file)">\n    <span>&times;</span>\n  </div>\n  <div class="gd-indexed-file-name disabled">\n    <fa-icon [icon]="[\'fas\', getFormatIcon()]" [class]="\'ng-fa-icon\'" [ngClass]="[\'fa-\' + getFormatIcon()]"></fa-icon>\n    <div class="gd-file-name">{{file.name}}\n      <div class="gd-file-format">{{getFormatName()}}</div>\n    </div>\n  </div>\n  <div class="gd-file-size gd-indexed-file-size">{{getSizeString(file.size)}}</div>\n  <div class="gd-indexed-file-status-wrapper">\n    <div class="gd-indexed-file-status">\n      <fa-icon class="gd-indexed-file-successful" [icon]="[\'fas\',getStatusIcon()]" [spin]="getStatusIcon() === \'circle-notch\'"></fa-icon>\n      <span>{{getStatusTitle()}}</span>\n    </div>\n  </div>\n</div>',styles:[".gd-indexed-file{display:-webkit-box;display:flex;width:100%;height:98px;border-bottom:1px solid #e7e7e7;background-color:#fff;-webkit-box-align:center;align-items:center;position:relative}.gd-indexed-file-remove{font-size:18px;color:#6e6e6e;margin:0 24px;cursor:pointer}.gd-indexed-file-remove span{width:37px;height:37px;display:block;line-height:37px;text-align:center;font-weight:700}.gd-indexed-file-remove.disabled{color:#959da5;opacity:.4}.gd-indexed-file-name{display:-webkit-box;display:flex}.gd-indexed-file-name.disabled fa-icon{color:#6e6e6e}.gd-file-name{text-align:left;cursor:default}.gd-indexed-file-size{width:70px;color:#777;text-align:left;font-size:12px;right:265px;position:absolute}.gd-indexed-file-status-wrapper{color:#777;font-size:12px;right:104px;position:absolute;width:70px}.gd-indexed-file-status{display:-webkit-box;display:flex}.gd-indexed-file-status fa-icon{padding-right:7px}.gd-file-format{font-size:10px;color:#acacac;padding-top:4px}.gd-file-format.mobile{display:none}.disabled{cursor:not-allowed!important}.gd-indexed-file .ng-fa-icon.fa-file-pdf{color:#e21717}.gd-indexed-file .ng-fa-icon.fa-file-word{color:#6979b9}.gd-indexed-file .ng-fa-icon.fa-file-powerpoint{color:#e29417}.gd-indexed-file .ng-fa-icon.fa-file-excel{color:#3fa300}.gd-indexed-file .ng-fa-icon.fa-file-image{color:#e217da}.gd-indexed-file .ng-fa-icon.fa-file-text .fa-folder{color:#5d6a75}.gd-indexed-file-name .ng-fa-icon{font-size:33px}.gd-indexed-file-name fa-icon{font-size:32px;margin:0 11px 0 0}@media (max-width:1037px){.gd-indexed-file-size{display:none}.gd-file-format.mobile{display:block}.gd-file-format.mobile>fa-icon{color:#bebebe}.gd-file-format.mobile fa-icon{font-size:10px;margin-right:2.1px}.gd-file-format.mobile fa-icon:nth-child(1){margin-right:6px}.gd-file-format{font-size:11px}.gd-indexed-file-name{white-space:nowrap;overflow:hidden}.gd-indexed-file-status-wrapper{right:20px}.gd-indexed-file-remove{margin:0 16px 0 15px}}"]}]}],e.ctorParameters=function(){return[{type:a}]},e.propDecorators={file:[{type:i.Input}]},e}();var v=function(e){function t(t,o,n){var r=e.call(this,t)||this;return r._searchService=o,r._modalService=n,r.selectAll=new i.EventEmitter,r.filesAddedToIndex=new i.EventEmitter,r.fileDropped=new i.EventEmitter,r}return l(t,e),t.prototype.selectAllItems=function(e){this.selectAll.emit(e)},t.prototype.selectSingleItem=function(e,t){var i=this.files.filter((function(e){return e.guid===t.guid}));1===i.length&&(i[0].selected=e)},t.prototype.getLabelString=function(){if(this.files&&this.files.length>0){var e=this.files.filter((function(e){return e.selected})).length;return e>0?"Add "+e+" to index":"Add to index"}return"Add to index"},t.prototype.anyItemSelected=function(){return!!(this.files&&this.files.length>0)&&this.files.filter((function(e){return e.selected})).length>0},t.prototype.allItemsSelected=function(){return!!(this.files&&this.files.filter((function(e){return!e.isDirectory&&!e.directory})).length>0&&this.files.length>0)&&this.files.filter((function(e){return!e.isDirectory&&!e.directory&&e.selected})).length===this.files.filter((function(e){return!e.isDirectory&&!e.directory})).length},t.prototype.addSelectedToIndex=function(){var e=this,t=new Array;this.files.forEach((function(e){!e.selected||e.isDirectory||e.directory||t.push(e)})),this._searchService.addFilesToIndex(t).subscribe((function(){e.filesAddedToIndex.emit(!0)})),this._modalService.close(n.CommonModals.BrowseFiles)},t.prototype.dropped=function(e){e&&this.fileDropped.emit(e)},t.decorators=[{type:i.Component,args:[{selector:"gd-search-browse-files-modal",template:'<gd-modal id="gd-browse-files" [title]="\'Open document\'" (visible)="refresh($event)">\n  <div class="gd-dnd-wrap" *ngIf="showUploadFile" gdDnd (dropped)="dropped($event)" (opening)="showUploadFile=$event">\n    <div class="dnd-wrapper">\n      <fa-icon  class="icon" [icon]="[\'fas\',\'cloud-download-alt\']" aria-hidden="true"></fa-icon>\n      <span class="text">Drop file here to upload</span>\n    </div>\n  </div>\n  <div class="upload-panel" *ngIf="uploadConfig">\n    <input id="gd-upload-input" type="file" multiple style="display: none;"\n            (change)="handleFileInput($event.target.files)">\n    <div class="select-all">\n      <input type="checkbox" [disabled]="!(this.files && this.files.length > 0)" class="gd-checkbox" [checked]="allItemsSelected()"\n               (change)="selectAllItems($event.target.checked);">\n    </div>\n    <div class="context">\n      <div class="context-actions">\n          <gd-button [icon]="\'plus\'" [disabled]="!anyItemSelected()" [intent]="\'primary\'" [iconOnly]="false" (click)="addSelectedToIndex()">\n            {{getLabelString()}}\n          </gd-button>\n        <gd-drop-down>\n          <gd-drop-down-toggle>\n            <gd-button [icon]="\'upload\'" [intent]="\'brand\'" [iconOnly]="false">\n              Upload file\n            </gd-button>\n          </gd-drop-down-toggle>\n          <gd-drop-down-items>\n            <gd-drop-down-item (selected)="selectUpload(item.name)" *ngFor="let item of uploads">\n              <fa-icon [icon]="[\'fas\', item.icon]"></fa-icon>\n              <div class="text">{{item.name}}</div>\n            </gd-drop-down-item>\n          </gd-drop-down-items>\n        </gd-drop-down>\n      </div>\n      <div class="context-panel" *ngIf="showUploadUrl">\n        <div class="upload-url">\n          <input class="url-input" placeholder="https://" #url (keyup.enter)="uploadUrl(url.value)">\n          <div class="url-check" (click)="uploadUrl(url.value)">\n            <fa-icon [icon]="[\'fas\',\'check\']"></fa-icon>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="list-files-header" [ngClass]="{\'upload-url\': showUploadUrl}">\n    <div class="header-name">FILE</div>\n    <div class="header-size">SIZE</div>\n  </div>\n  <section id="gd-browse-section" (dragover)="showUploadFile = true;">\n    <div id="gd-modal-filebrowser" class="gd-modal-table">\n      <div class="list-files-body">\n        <div class="go-up" (click)="goUp()">\n          <div class="go-up-icon">\n            <fa-icon [icon]="[\'fas\',\'level-up-alt\']"></fa-icon>\n          </div>\n          <div class="go-up-dots">..</div>\n        </div>\n        <div class="list-files-lines" *ngFor="let file of files" (click)="choose(file);">\n          <div class="gd-file-checkbox" [ngClass]="{\'empty\': file && (file.isDirectory || file.directory)}">\n            <input type="checkbox" *ngIf="file && !file.isDirectory && !file.directory" [checked]="file.selected"\n                   (change)="selectSingleItem($event.target.checked, file);" class="gd-checkbox gd-checkbox-single">\n          </div>\n          <div class="file-description">\n            <fa-icon [icon]="[\'fas\',getFormatIcon(file)]" [class]="\'ng-fa-icon fa-\' + getFormatIcon(file)"></fa-icon>\n            <div class="file-name-format">\n              <div class="file-name" [ngClass]="{\'gd-folder-name\' : file.isDirectory || file.directory}">{{file?.name}}</div>\n              <div class="file-format">{{getFormatName(file)}}</div>\n            </div>\n          </div>\n          <div class="file-size">{{getSize(file?.size)}}</div>\n        </div>\n      </div>\n    </div>\n    <div id="gd-modal-spinner" class="gd-modal-spinner" *ngIf="showSpinner()">\n      <fa-icon [icon]="[\'fas\',\'circle-notch\']" [spin]="true"></fa-icon>\n      &nbsp;Loading... Please wait.\n    </div>\n  </section>\n</gd-modal>\n',styles:['.gd-modal-table{width:100%;text-align:left}#gd-browse-section{width:1036px;height:561px;overflow-y:auto}.list-files-header{height:60px;color:#6e6e6e;font-size:13px;font-weight:700;background-color:#f4f4f4;margin-top:24px}.list-files-header.upload-url{margin-top:20px}.header-name{padding-left:68px;width:90%;line-height:60px}.header-size{line-height:60px}.file-size,.header-size{width:7%;color:#777;text-align:left}.file-size{font-size:12px;width:7%;line-height:79px}.file-description{display:-webkit-box;display:flex;width:90%;padding:18px 0;font-size:14px;-webkit-box-flex:1;flex:1;cursor:pointer;overflow:hidden}.file-description .ng-fa-icon{font-size:32px}.gd-modal-spinner{background-color:#fff;width:100%;height:20px;text-align:center;font-size:16px}.gd-file-name{white-space:nowrap;overflow:hidden;width:100%;text-overflow:ellipsis}.upload-panel{display:-webkit-box;display:flex;position:relative;width:100%;margin-top:24px;margin-right:24px}.upload-panel .select-all{height:37px;margin:0 16px 0 15px;width:37px;line-height:44px;text-align:center}.upload-panel .context{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;width:100%;margin-right:24px}.upload-panel .context .context-actions{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;width:100%}.upload-panel .context .context-actions>gd-button{margin-right:10px}.upload-panel .context .context-actions :last-child{margin-right:0}.upload-panel .context .context-actions ::ng-deep .button{height:37px;width:96px;padding:0;-webkit-box-pack:center;justify-content:center;font-size:14px}.upload-panel .context .context-actions ::ng-deep .button ::ng-deep .text{font-size:10px}.upload-panel .context .context-actions ::ng-deep .button.primary{width:117px;background-color:#4b566c}.upload-panel .context .context-actions ::ng-deep .button.primary.inactive{width:106px;background-color:#959da5}.upload-panel .context .context-actions ::ng-deep .button.primary.inactive /deep/ .text{color:#3e4e5a}.upload-panel .context .context-actions ::ng-deep .button.primary.inactive /deep/ fa-icon{color:#3e4e5a}.upload-panel .context .context-panel{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;width:100%;margin-top:20px}.upload-panel .context .context-panel .upload-url{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;width:100%}.upload-panel .context .context-panel .upload-url .url-input{width:100%;height:27px;border:1px solid #25c2d4;font-size:14px;padding-left:6px}.upload-panel .context .context-panel .upload-url .url-check{width:31px;height:31px;color:#fff;font-size:15px;background-color:#25c2d4}.upload-panel .context .context-panel .upload-url .url-check .ng-fa-icon{display:block;padding:8px}.upload-panel gd-drop-down{margin-right:10px}.upload-panel gd-drop-down /deep/ .drop-down-item .text{margin-left:7px;text-transform:uppercase;color:#6e6e6e}.upload-panel gd-drop-down /deep/ .drop-down-item:hover{background-color:#4b566c}.upload-panel gd-drop-down /deep/ .drop-down-item:hover *{color:#fff}.list-files-header,.list-files-lines{display:-webkit-box;display:flex;width:100%;-webkit-box-pack:justify;justify-content:space-between}.file-description .ng-fa-icon.fa-file-pdf{color:#e04e4e}.file-description .ng-fa-icon.fa-file-word{color:#539cf0}.file-description .ng-fa-icon.fa-file-powerpoint{color:#e29e1e}.file-description .ng-fa-icon.fa-file-excel{color:#7cbc46}.file-description .ng-fa-icon.fa-file-image{color:#c375ed}.file-description .ng-fa-icon.fa-file,.file-description .ng-fa-icon.fa-file-alt,.file-description .ng-fa-icon.fa-file-text .fa-folder{color:#4b566c}.go-up{cursor:pointer;display:-webkit-box;display:flex;font-size:26px;color:#4b566c;height:79px}.go-up-dots{margin-left:20px;margin-top:22px;font-size:16px}.go-up-icon{display:block;padding:18px 0 18px 68px}.file-name{font-size:16px;color:#6e6e6e;overflow:hidden;text-overflow:ellipsis}.file-name-format{padding-left:11px;overflow:hidden}.file-format{font-size:10px;padding-top:3px;color:#acacac}.go-up,.list-files-lines{border-bottom:1px solid #e7e7e7}.list-files-lines:hover{background-color:#e5e5e5}.gd-dnd-wrap{background-color:#fff;cursor:default;position:absolute;width:100%;height:calc(100% - 60px);background:rgba(255,255,255,.7);z-index:1;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.gd-drag-n-drop-icon{margin-top:-50px}.gd-drag-n-drop-icon .fa-cloud-download-alt{color:#d1d1d1;font-size:110px}.gd-file-checkbox{height:37px;margin:21px 16px 21px 15px;width:37px;line-height:44px;text-align:center}.gd-file-checkbox.empty{width:37px}.file-format-select{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;width:36px;margin-right:24px}.file-format-select ::ng-deep .button{padding:0;width:36px;margin:0;font-size:14px}.file-format-select ::ng-deep .button .text{padding:0}.file-format-select ::ng-deep .show .button{color:#959da5}.file-format-select gd-drop-down /deep/ .drop-down-item{width:96px}.file-format-select gd-drop-down /deep/ .drop-down-item .text{padding-left:7px;text-transform:uppercase;color:#6e6e6e}.file-format-select gd-drop-down /deep/ .drop-down-item:hover{background-color:#4b566c}.file-format-select gd-drop-down /deep/ .drop-down-item:hover *{color:#fff}.gd-checkbox{width:19px;height:19px;margin:0}.gd-checkbox:before{position:relative;display:-webkit-box;display:flex;width:17px;height:17px;border:1px solid #707070;content:"";background:#fff;cursor:pointer}.gd-checkbox:after{position:relative;display:-webkit-box;display:flex;left:1px;top:-18px;width:16px;height:16px;content:"";cursor:pointer}.gd-checkbox:checked:after{font-family:"Font Awesome 5 Free";content:"\\f00c";font-weight:900;font-size:16px;color:#6e6e6e}.gd-add-selected.active{cursor:pointer;opacity:1}.gd-add-selected{width:140px;height:36px;background-color:#3e4e5a;color:#fff;margin:0 8px 0 0;border:0;cursor:not-allowed;opacity:.43}.gd-folder-name{margin-top:8px}.dnd-wrapper{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;top:259px;position:absolute}.dnd-wrapper .text{color:#6e6e6e;font-size:14px}.dnd-wrapper .icon{display:-webkit-box;display:flex;width:113px;height:90px;font-size:90px;color:#3e4e5a;margin-bottom:30px}@media (max-width:1037px){.file-size,.header-size{width:18%}.gd-dnd-wrap{width:95%}#gd-browse-section{width:100%;height:calc(100% - 146px)}}']}]}],t.ctorParameters=function(){return[{type:n.UploadFilesService},{type:a},{type:n.ModalService}]},t.propDecorators={files:[{type:i.Input}],selectAll:[{type:i.Output}],filesAddedToIndex:[{type:i.Output}],fileDropped:[{type:i.Output}]},t}(n.BrowseFilesModalComponent);function w(e){return function(){return e.load()}}function y(e){return new n.LoadingMaskInterceptorService(e)}var k=function(){function e(){}return e.forRoot=function(t){return n.Api.DEFAULT_API_ENDPOINT=t,{ngModule:e}},e.decorators=[{type:i.NgModule,args:[{declarations:[g,u,h,x,m,b,v],imports:[t.BrowserModule,n.CommonComponentsModule,o.HttpClientModule,s.FontAwesomeModule],exports:[g,n.CommonComponentsModule,u,h,x,m,b,v],providers:[a,n.ConfigService,p,{provide:o.HTTP_INTERCEPTORS,useClass:n.ErrorInterceptorService,multi:!0},{provide:i.APP_INITIALIZER,useFactory:w,deps:[p],multi:!0},n.LoadingMaskService,{provide:o.HTTP_INTERCEPTORS,useFactory:y,multi:!0,deps:[n.LoadingMaskService]}]}]}],e}();e.SearchAppComponent=g,e.SearchConfigService=p,e.SearchModule=k,e.SearchService=a,e.initializeApp=w,e.setupLoadingInterceptor=y,e.ɵa=u,e.ɵb=h,e.ɵc=x,e.ɵd=m,e.ɵe=b,e.ɵf=v,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=groupdocs.examples.angular-search.umd.min.js.map