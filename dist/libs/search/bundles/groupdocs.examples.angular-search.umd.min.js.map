{"version":3,"sources":["../../../../node_modules/tslib/tslib.es6.js","ng://@groupdocs.examples.angular/search/lib/search.service.ts","ng://@groupdocs.examples.angular/search/lib/search-config.ts","ng://@groupdocs.examples.angular/search/lib/search-config.service.ts","ng://@groupdocs.examples.angular/search/lib/search-models.ts","ng://@groupdocs.examples.angular/search/lib/search-app.component.ts","ng://@groupdocs.examples.angular/search/lib/search-panel/search-panel.component.ts","ng://@groupdocs.examples.angular/search/lib/search-result-summary/search-result-summary.component.ts","ng://@groupdocs.examples.angular/search/lib/search-result-item/search-result-item.component.ts","ng://@groupdocs.examples.angular/search/lib/indexed-files-list/indexed-files-list.component.ts","ng://@groupdocs.examples.angular/search/lib/indexed-file/indexed-file.component.ts","ng://@groupdocs.examples.angular/search/lib/search-browse-files-modal/search-browse-files-modal.component.ts","ng://@groupdocs.examples.angular/search/lib/search.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","SearchService","_http","_config","_itemToRemove","BehaviorSubject","itemToRemove","asObservable","addFilesToIndex","filesToIndex","post","getSearchApiEndpoint","Api","ADD_FILES_TO_INDEX","httpOptionsJson","loadFiles","path","LOAD_FILE_TREE","loadFile","credentials","LOAD_DOCUMENT_DESCRIPTION","upload","file","url","rewrite","formData","FormData","append","String","UPLOAD_DOCUMENTS","search","query","SEARCH","removeFile","REMOVE_FROM_INDEX","selectedItemToRemove","next","getDocumentStatus","files","GET_FILE_STATUS","Injectable","args","providedIn","HttpClient","ConfigService","SearchConfig","SearchConfigService","_searchConfig","_updatedConfig","defineProperty","load","_this","Promise","resolve","reject","configEndpoint","getConfigEndpoint","SEARCH_APP","get","toPromise","then","response","searchConfig","catch","JSON","stringify","_super","IndexedFileModel","tslib_1.__extends","FileModel","Indexing","SuccessfullyProcessed","Skipped","ProcessedWithError","PasswordRequired","SearchAppComponent","_searchService","_modalService","configService","uploadFilesService","passwordService","_windowService","_loadingMaskService","title","searchResultItems","indexedFiles","browseFilesModal","CommonModals","BrowseFiles","fileWasDropped","updatedConfig","subscribe","uploadsChange","uploads","i","length","item","obj","selectDir","passChange","pass","closeModal","passwordRequiredFile","filter","f","documentStatus","FileIndexingStatus","password","loadIndexedFiles","isDesktop","onResize","w","removeFileFromList","ngOnInit","ngAfterViewInit","onLoadingChanged","loading","isLoading","browse","openModal","id","open","close","$event","clearSearchResult","searchResult","firstSearchPerformed","selectAllItems","checked","forEach","isDirectory","directory","selected","indexedFilesDirectory","indexingFiles","skipPasswordProtected","timerId_1","setInterval","searchIndexFiles","searchFile","guid","clearInterval","cancel","rewriteConfig","fileDropped","reloadFiles","index","splice","creds","push","result","Component","selector","template","ModalService","UploadFilesService","PasswordService","WindowService","LoadingMaskService","SearchPanelComponent","text","searchText","EventEmitter","clearQuery","emit","setText","value","clearQueryString","textElement","nativeElement","ViewChild","static","Output","SearchResultSummaryComponent","getTotalOccurrencesMessage","totalOccurences","totalFiles","getIndexedFilesMessage","getSearchDuration","searchDuration","Input","SearchResultItemComponent","getSizeString","size","mb","Math","round","kb","getFormatIcon","FileUtil","find","name","icon","getFormatName","format","getOccurrencesMessage","occurrences","togglePhrases","showPhrases","IndexedFilesListComponent","IndexedFileComponent","preventDefault","stopPropagation","getStatusIcon","getStatusTitle","SearchBrowseFilesModalComponent","_uploadService","call","selectAll","filesAddedToIndex","selectSingleItem","selectedFiles","getLabelString","selectedCount","anyItemSelected","allItemsSelected","addSelectedToIndex","itemsToIndex","dropped","BrowseFilesModalComponent","initializeApp","searchConfigService","setupLoadingInterceptor","service","LoadingMaskInterceptorService","SearchModule","forRoot","apiEndpoint","DEFAULT_API_ENDPOINT","ngModule","NgModule","declarations","imports","BrowserModule","CommonComponentsModule","HttpClientModule","FontAwesomeModule","TranslateModule","exports","providers","provide","HTTP_INTERCEPTORS","useClass","ErrorInterceptorService","multi","APP_INITIALIZER","useFactory","deps"],"mappings":";;;;;;;;;;;;;;oFAgBA,IAAIA,EAAgB,SAASC,EAAGC,GAI5B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAGrB,SAASO,EAAUR,EAAGC,GAEzB,SAASQ,IAAOC,KAAKC,YAAcX,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEY,UAAkB,OAANX,EAAaC,OAAOW,OAAOZ,IAAMQ,EAAGG,UAAYX,EAAEW,UAAW,IAAIH,GC1BnF,IAAAK,EAAA,WAcE,SAAAA,EAAoBC,EAA2BC,GAA3BN,KAAAK,MAAAA,EAA2BL,KAAAM,QAAAA,EAHvCN,KAAAO,cAAgB,IAAIC,EAAAA,gBAA2B,MACvDR,KAAAS,aAAeT,KAAKO,cAAcG,sBAKlCN,EAAAF,UAAAS,gBAAA,SAAgBC,GACd,OAAOZ,KAAKK,MAAMQ,KAAKb,KAAKM,QAAQQ,uBAAyBC,EAAAA,IAAIC,mBAAoBJ,EAAcG,EAAAA,IAAIE,kBAGzGb,EAAAF,UAAAgB,UAAA,SAAUC,GACR,OAAOnB,KAAKK,MAAMQ,KAAKb,KAAKM,QAAQQ,uBAAyBC,EAAAA,IAAIK,eAAgB,CAACD,KAAQA,GAAOJ,EAAAA,IAAIE,kBAGvGb,EAAAF,UAAAmB,SAAA,SAASC,GACP,OAAOtB,KAAKK,MAAMQ,KAAKb,KAAKM,QAAQQ,uBAAyBC,EAAAA,IAAIQ,0BAA2BD,EAAaP,EAAAA,IAAIE,kBAG/Gb,EAAAF,UAAAsB,OAAA,SAAOC,EAAYC,EAAaC,OACxBC,EAAW,IAAIC,SAOrB,OANAD,EAASE,OAAO,OAAQL,GACxBG,EAASE,OAAO,UAAWC,OAAOJ,IAC9BD,GACFE,EAASE,OAAO,MAAOJ,GAGlB1B,KAAKK,MAAMQ,KAAKb,KAAKM,QAAQQ,uBAAyBC,EAAAA,IAAIiB,iBAAkBJ,IAGrFxB,EAAAF,UAAA+B,OAAA,SAAOX,EAAgCY,GACrC,OAAOlC,KAAKK,MAAMQ,KAAKb,KAAKM,QAAQQ,uBAAyBC,EAAAA,IAAIoB,OAAQ,CACvED,MAASA,GACRnB,EAAAA,IAAIE,kBAGTb,EAAAF,UAAAkC,WAAA,SAAWX,GACT,OAAOzB,KAAKK,MAAMQ,KAAKb,KAAKM,QAAQQ,uBAAyBC,EAAAA,IAAIsB,kBAAmBZ,EAAMV,EAAAA,IAAIE,kBAGhGb,EAAAF,UAAAoC,qBAAA,SAAqBb,GACnBzB,KAAKO,cAAcgC,KAAKd,IAG1BrB,EAAAF,UAAAsC,kBAAA,SAAkBC,GAChB,OAAOzC,KAAKK,MAAMQ,KAAKb,KAAKM,QAAQQ,uBAAyBC,EAAAA,IAAI2B,gBAAiBD,EAAO1B,EAAAA,IAAIE,sCAjDhG0B,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,oDANLC,EAAAA,kBACKC,EAAAA,8KAFd,GCAA,IAAAC,EAAA,aCAA,IAAAC,EAAA,WAaE,SAAAA,EAAoB5C,EAA2BC,GAA3BN,KAAAK,MAAAA,EAA2BL,KAAAM,QAAAA,EAHvCN,KAAAkD,cAA+C,IAAI1C,EAAAA,gBAAgB,IAAIwC,GACvEhD,KAAAmD,eAA2CnD,KAAKkD,cAAcxC,sBAKtElB,OAAA4D,eAAIH,EAAA/C,UAAA,gBAAa,KAAjB,WACE,OAAOF,KAAKmD,gDAGdF,EAAA/C,UAAAmD,KAAA,WAAA,IAAAC,EAAAtD,KACE,OAAO,IAAIuD,SAAO,SAAQC,EAASC,OAC3BC,EAAiBJ,EAAKhD,QAAQqD,kBAAkB5C,EAAAA,IAAI6C,YAC1DN,EAAKjD,MAAMwD,IAAIH,EAAgB3C,EAAAA,IAAIE,iBAAiB6C,YAAYC,MAAI,SAAEC,OAC9DC,EAAY,EAClBX,EAAKJ,cAAcX,KAAK0B,GACxBT,OACCU,OAAK,SAAEF,GACRP,EAAO,iCAAiCU,KAAKC,UAAUJ,+BAtB9DrB,EAAAA,WAAUC,KAAA,CAAC,CACVC,WAAY,oDAJNC,EAAAA,kBADKC,EAAAA,8KAFb,ICEA,SAAAsB,GAAA,SAAAC,mDAAsCC,EAAAA,EAAAA,GAAtC,CAAsCC,EAAAA,kBAmCpCC,SAAW,WACXC,sBAAwB,wBACxBC,QAAU,UACVC,mBAAqB,qBACrBC,iBAAmB,oBCzCrBC,EAAA,WAyCE,SAAAA,EAAoBC,EACAC,EACRC,EACAC,EACAC,EACQC,EACAC,GANpB,IAAA/B,EAAAtD,KAAoBA,KAAA+E,eAAAA,EACA/E,KAAAgF,cAAAA,EAIAhF,KAAAoF,eAAAA,EACApF,KAAAqF,oBAAAA,EArBpBrF,KAAAsF,MAAQ,SACRtF,KAAAyC,MAA6B,GAC7BzC,KAAAuF,kBAA6C,GAC7CvF,KAAAwF,aAAmC,GAGnCxF,KAAAyF,iBAAmBC,EAAAA,aAAaC,YAOhC3F,KAAA4F,gBAAiB,EAUfX,EAAcY,cAAcC,WAAS,SAAE7B,GACrCX,EAAKW,aAAeA,KAGtBiB,EAAmBa,cAAcD,WAAS,SAAEE,GAC1C,GAAIA,EAAS,KACPC,OAAC,EACL,IAAKA,EAAI,EAAGA,EAAID,EAAQE,OAAQD,IAC9B3C,EAAKyB,eAAevD,OAAOwE,EAAQG,KAAKF,GAAI,GAAI3C,EAAKW,aAAatC,SAASmE,WAAS,SAAEM,GAC/E9C,EAAKsC,gBAERtC,EAAK+C,UAAU,WAOzBlB,EAAgBmB,WAAWR,WAAS,SAAES,GACpCjD,EAAKkD,WAAWd,EAAAA,aAAab,sBAEvB4B,EAAuBnD,EAAKkC,aAAakB,QAAM,SAACC,GAAK,OAAAA,EAAEC,iBAAmBC,EAAmBhC,oBAAkB,GACrH4B,EAAqBK,SAAWP,EAChCjD,EAAKyB,eAAepE,gBAAgB,CAAC8F,IAAuBX,WAAS,WACnExC,EAAKyD,kBAAiB,SAI1B/G,KAAKgH,UAAY5B,EAAe4B,YAChC5B,EAAe6B,SAASnB,WAAS,SAAEoB,GACjC5D,EAAK0D,UAAY5B,EAAe4B,eAGlCjC,EAAetE,aAAaqF,WAAS,SAACrE,GAChCA,GACF6B,EAAKyB,eAAe3C,WAAWX,GAAMqE,WAAS,WAC5CxC,EAAK6D,mBAAmB1F,SAiIlC,OA3HEqD,EAAA5E,UAAAkH,SAAA,aAGAtC,EAAA5E,UAAAmH,gBAAA,WAAA,IAAA/D,EAAAtD,KACEA,KAAKqF,oBACFiC,iBACAxB,WAAS,SAAEyB,GAAqB,OAAAjE,EAAKkE,UAAYD,MAGtD/H,OAAA4D,eAAI0B,EAAA5E,UAAA,gBAAa,KAAjB,WACE,OAAOF,KAAKiE,cAAejE,KAAKiE,aAAatC,yCAG/CnC,OAAA4D,eAAI0B,EAAA5E,UAAA,eAAY,KAAhB,WACE,OAAOF,KAAKiE,cAAejE,KAAKiE,aAAazC,wCAG/ChC,OAAA4D,eAAI0B,EAAA5E,UAAA,eAAY,KAAhB,WACE,OAAOF,KAAKiE,cAAejE,KAAKiE,aAAawD,wCAG/C3C,EAAA5E,UAAAwH,UAAA,SAAUC,GACR3H,KAAKgF,cAAc4C,KAAKD,IAG1B7C,EAAA5E,UAAAsG,WAAA,SAAWmB,GACT3H,KAAKgF,cAAc6C,MAAMF,IAG3B7C,EAAA5E,UAAAmG,UAAA,SAAUyB,GAAV,IAAAxE,EAAAtD,KACEA,KAAK+E,eAAe7D,UAAU4G,GAAQhC,WAAS,SAAErD,GAA+B,OAAAa,EAAKb,MAAQA,GAAS,OAGxGqC,EAAA5E,UAAA6H,kBAAA,WACE/H,KAAKgI,aAAe,KAEhBhI,KAAKiI,sBAAqD,IAA7BjI,KAAKwF,aAAaU,QACjDlG,KAAK+G,kBAAiB,IAI1BjC,EAAA5E,UAAAgI,eAAA,SAAeC,GACbnI,KAAKyC,MAAM2F,SAAO,SAAGzB,GACdA,EAAE0B,aAAgB1B,EAAE2B,YAAW3B,EAAE4B,SAAWJ,OAIrDrD,EAAA5E,UAAA6G,iBAAA,SAAiBe,GAAjB,IAAAxE,EAAAtD,KACO8H,GAEL9H,KAAK+E,eAAe7D,UAAUlB,KAAKiE,aAAauE,uBAAuB1C,WAAS,SAAE2C,GAQhF,GANIA,GAAiBnF,EAAKoF,uBAAyBD,EAAc/B,QAAM,SAACC,GAAK,OAAAA,EAAEC,iBAAmBC,EAAmBhC,oBAAkBqB,OAAS,IAE9IuC,EAAc/B,QAAM,SAACC,GAAK,OAAAA,EAAEC,iBAAmBC,EAAmBhC,oBAAkB,GAAG+B,eAAiBC,EAAmBlC,SAG7HrB,EAAKkC,aAAeiD,GAAiB,GACjCnF,EAAKkC,aAAakB,QAAM,SAACC,GAAK,OAAAA,EAAEC,iBAAmBC,EAAmBpC,YAAUyB,OAAS,IACvF5C,EAAKoF,uBAAyBpF,EAAKkC,aAAakB,QAAM,SAACC,GAAK,OAAAA,EAAEC,iBAAmBC,EAAmBhC,oBAAkBqB,OAAS,MAE7HyC,EAAUC,aAAW,WAEzBtF,EAAKyB,eAAevC,kBAAkBc,EAAKkC,aAAakB,QAAM,SAACC,GAAK,OAAAA,EAAEC,iBAAmBC,EAAmBpC,WACxGnB,EAAKoF,uBAAyB/B,EAAEC,iBAAmBC,EAAmBhC,qBAAoBf,YAAYC,MAAI,SAAE8E,GAE9GA,EAAiBT,SAAO,SAAEU,GACpBA,EAAWlC,iBAAmBC,EAAmBpC,WAEnDnB,EAAKkC,aAAakB,QAAM,SAACC,GAAK,OAAAA,EAAEoC,OAASD,EAAWC,QAAM,GAAGnC,eAAiBkC,EAAWlC,mBAIE,IAA3FtD,EAAKkC,aAAakB,QAAM,SAACC,GAAK,OAAAA,EAAEC,iBAAmBC,EAAmBpC,YAAUyB,QAElF8C,cAAcL,MAEjBzE,OAAK,SAAEF,GACRgF,cAAcL,QAEb,SAKT7D,EAAA5E,UAAA+I,OAAA,SAAOnB,GACL9H,KAAKwF,aAAakB,QAAM,SAACC,GAAK,OAAAA,EAAEC,iBAAmBC,EAAmBhC,oBAAkB,GAAG+B,eAAiBC,EAAmBlC,QAC/H3E,KAAK0I,uBAAwB,EAC7B1I,KAAK+G,kBAAiB,IAGxBjC,EAAA5E,UAAAsB,OAAA,SAAOsG,GAAP,IAAAxE,EAAAtD,KACEA,KAAK+E,eAAevD,OAAO,KAAMsG,EAAQ9H,KAAKkJ,eAAepD,WAAS,WACpExC,EAAK+C,UAAU,QAInBvB,EAAA5E,UAAAiJ,YAAA,SAAYrB,EAAQsB,GAApB,IAAA9F,EAAAtD,UAAoB,IAAAoJ,IAAAA,GAAA,GAClBpJ,KAAK4F,eAAiBkC,EAElBsB,GAEFpJ,KAAK+E,eAAe7D,UAAU,IAAI4E,WAAS,SAAErD,GAA+B,OAAAa,EAAKb,MAAQA,GAAS,OAItGqC,EAAA5E,UAAAiH,mBAAA,SAAmB1F,GAAnB,IAAA6B,EAAAtD,KACMA,KAAKwF,aAAaU,OAAS,GAC7BlG,KAAKwF,aAAa4C,SAAO,SAAGzB,EAAG0C,GAC1B1C,EAAEoC,OAAStH,EAAKsH,MAAMzF,EAAKkC,aAAa8D,OAAOD,EAAO,OAK/DvE,EAAA5E,UAAA+B,OAAA,SAAO6F,GAAP,IAAAxE,EAAAtD,KACE,GAAe,KAAX8H,EAAJ,KACMyB,EAAQ,GACdA,EAAMC,KAAKxJ,KAAKsB,aAChBtB,KAAK+E,eAAe9C,OAAOsH,EAAOzB,GAAQhC,WAAS,SAAE2D,GACnDnG,EAAK0E,aAAeyB,EACpBnG,EAAK2E,sBAAuB,2BA/LjCyB,EAAAA,UAAS9G,KAAA,CAAC,CACT+G,SAAU,gBACVC,SAAA,68GArBMxJ,SAGNyJ,EAAAA,oBAMM5G,SALN6G,EAAAA,0BACAC,EAAAA,uBAKMC,EAAAA,qBAJyBC,EAAAA,sBA+MjCnF,EAtNA,GCAA,IAAAoF,EAAA,WAiBE,SAAAA,IAJQlK,KAAAmK,KAAO,GACLnK,KAAAoK,WAAa,IAAIC,EAAAA,aACjBrK,KAAAsK,WAAa,IAAID,EAAAA,aAyB7B,OApBEH,EAAAhK,UAAAkH,SAAA,aAGA8C,EAAAhK,UAAA+B,OAAA,WACEjC,KAAKoK,WAAWG,KAAKvK,KAAKmK,OAG5BD,EAAAhK,UAAAsK,QAAA,SAAQC,GACNzK,KAAKmK,KAAOM,EACE,KAAVA,GAEFzK,KAAK0K,oBAITR,EAAAhK,UAAAwK,iBAAA,WACE1K,KAAKmK,KAAO,GACZnK,KAAK2K,YAAYC,cAAcH,MAAQ,GACvCzK,KAAKsK,WAAWC,KAAK,yBApCxBb,EAAAA,UAAS9G,KAAA,CAAC,CACT+G,SAAU,kBACVC,SAAA,2mCAKCiB,EAAAA,UAASjI,KAAA,CAAC,OAAO,CAChBkI,QAAS,wBAIVC,EAAAA,2BACAA,EAAAA,UAyBHb,EAxCA,GCAA,IAAAc,EAAA,WAYE,SAAAA,KAgCF,OA7BEA,EAAA9K,UAAAkH,SAAA,aAGA4D,EAAA9K,UAAA+K,2BAAA,WAGE,OAAIjL,KAAKgI,aACmC,IAAtChI,KAAKgI,aAAakD,gBAHR,gBAQP,YAAclL,KAAKgI,aAAakD,gBAAkB,uBAAyBlL,KAAKgI,aAAamD,WAAa,aARnG,iBAclBH,EAAA9K,UAAAkL,uBAAA,WACE,GAAIpL,KAAKgI,aACP,MAAO,MAAQhI,KAAKgI,aAAaxC,aAAe,sBAIpDwF,EAAA9K,UAAAmL,kBAAA,WACE,GAAIrL,KAAKgI,aACP,OAAOhI,KAAKgI,aAAasD,oCAtC9B5B,EAAAA,UAAS9G,KAAA,CAAC,CACT+G,SAAU,2BACVC,SAAA,g6EAKC2B,EAAAA,SAkCHP,EA5CA,GCAA,IAAAQ,EAAA,WAaE,SAAAA,KAkCF,OA/BEA,EAAAtL,UAAAkH,SAAA,aAGAoE,EAAAtL,UAAAuL,cAAA,SAAcC,OACNC,EAAKD,EAAO,KAAO,KACzB,GAAIC,EAAK,EACP,OAAQC,KAAKC,MAAW,IAALF,GAAY,IAAO,UAEhCG,EAAKJ,EAAO,KAClB,OAAII,EAAK,EACCF,KAAKC,MAAW,IAALC,GAAY,IAAO,MAGnCJ,EAAO,UAGhBF,EAAAtL,UAAA6L,cAAA,SAActK,GACZ,OAAOuK,EAAAA,SAASC,KAAKxK,EAAKyK,KAAMzK,EAAK6G,WAAW6D,MAGlDX,EAAAtL,UAAAkM,cAAA,SAAc3K,GACZ,OAAOuK,EAAAA,SAASC,KAAKxK,EAAKyK,KAAMzK,EAAK6G,WAAW+D,QAGlDb,EAAAtL,UAAAoM,sBAAA,SAAsBC,GACpB,MAAO,YAAcA,EAAc,oBAGrCf,EAAAtL,UAAAsM,cAAA,SAAcrG,GACZA,EAAKsG,aAAetG,EAAKsG,iCAzC5B/C,EAAAA,UAAS9G,KAAA,CAAC,CACT+G,SAAU,wBACVC,SAAA,o5HAKC2B,EAAAA,SAoCHC,EA/CA,GCAA,IAAAkB,EAAA,WAYE,SAAAA,IAFS1M,KAAAyC,MAAqB,GAOhC,OAFEiK,EAAAxM,UAAAkH,SAAA,iCAZDsC,EAAAA,UAAS9G,KAAA,CAAC,CACT+G,SAAU,wBACVC,SAAA,i/CAKC2B,EAAAA,SAOHmB,EAjBA,GCAA,IAAAC,EAAA,WAcE,SAAAA,EAAoB5H,GAAA/E,KAAA+E,eAAAA,EAgEtB,OA7DE4H,EAAAzM,UAAAkH,SAAA,aAGAuF,EAAAzM,UAAAkC,WAAA,SAAW0F,EAAQrG,GACjBqG,EAAO8E,iBACP9E,EAAO+E,kBACP7M,KAAK+E,eAAezC,qBAAqBb,IAG3CkL,EAAAzM,UAAAuL,cAAA,SAAcC,OACNC,EAAKD,EAAO,KAAO,KACzB,GAAIC,EAAK,EACP,OAAQC,KAAKC,MAAW,IAALF,GAAY,IAAO,UAEhCG,EAAKJ,EAAO,KAClB,OAAII,EAAK,EACCF,KAAKC,MAAW,IAALC,GAAY,IAAO,MAGnCJ,EAAO,UAGhBiB,EAAAzM,UAAA6L,cAAA,WACE,OAAOC,EAAAA,SAASC,KAAKjM,KAAKyB,KAAKyK,KAAMlM,KAAKyB,KAAK6G,WAAW6D,MAG5DQ,EAAAzM,UAAAkM,cAAA,WACE,OAAOJ,EAAAA,SAASC,KAAKjM,KAAKyB,KAAKyK,KAAMlM,KAAKyB,KAAK6G,WAAW+D,QAG5DM,EAAAzM,UAAA4M,cAAA,WACE,OAAQ9M,KAAKyB,KAAKmF,gBAChB,KAAKC,EAAmBpC,SACxB,KAAKoC,EAAmBhC,iBACtB,MAAO,eACT,KAAKgC,EAAmBnC,sBACtB,MAAO,QACT,KAAKmC,EAAmBjC,mBACtB,MAAO,QACT,KAAKiC,EAAmBlC,QACtB,MAAO,UACT,QACE,MAAO,UAIbgI,EAAAzM,UAAA6M,eAAA,WACE,OAAQ/M,KAAKyB,KAAKmF,gBAChB,KAAKC,EAAmBpC,SACxB,KAAKoC,EAAmBhC,iBACtB,MAAO,WACT,KAAKgC,EAAmBnC,sBACtB,MAAO,UACT,KAAKmC,EAAmBjC,mBACtB,MAAO,QACT,KAAKiC,EAAmBlC,QACtB,MAAO,UACT,QACE,MAAO,8BAtEd+E,EAAAA,UAAS9G,KAAA,CAAC,CACT+G,SAAU,kBACVC,SAAA,ykGANOxJ,mCAWNmL,EAAAA,SAkEHoB,EA9EA,GCWA,IAAAK,EAAA,SAAA3I,GAYE,SAAA2I,EAAYC,EACFlI,EACAC,GAFV,IAAA1B,EAGEe,EAAA6I,KAAAlN,KAAMiN,IAAejN,YAFbsD,EAAAyB,eAAAA,EACAzB,EAAA0B,cAAAA,EANA1B,EAAA6J,UAAY,IAAI9C,EAAAA,aAChB/G,EAAA8J,kBAAoB,IAAI/C,EAAAA,aACxB/G,EAAA6F,YAAc,IAAIkB,EAAAA,eAoE9B,OAxEqD9F,EAAAA,EAAAA,GAYnDyI,EAAA9M,UAAAgI,eAAA,SAAeC,GACbnI,KAAKmN,UAAU5C,KAAKpC,IAGtB6E,EAAA9M,UAAAmN,iBAAA,SAAiBlF,EAAkB1G,OAC3B6L,EAAgBtN,KAAKyC,MAAMiE,QAAM,SAACC,GAAK,OAAAA,EAAEoC,OAAStH,EAAKsH,QAChC,IAAzBuE,EAAcpH,SAChBoH,EAAc,GAAG/E,SAAWJ,IAIhC6E,EAAA9M,UAAAqN,eAAA,WAGE,GAAIvN,KAAKyC,OAASzC,KAAKyC,MAAMyD,OAAS,EAAG,KACjCsH,EAAgBxN,KAAKyC,MAAMiE,QAAM,SAACjF,GAAQ,OAAAA,EAAK8G,YAAUrC,OAC/D,OAAOsH,EAAgB,EAAI,OAASA,EAAgB,YAJxC,eAQZ,MARY,gBAYhBR,EAAA9M,UAAAuN,gBAAA,WACE,SAAIzN,KAAKyC,OAASzC,KAAKyC,MAAMyD,OAAS,IAC7BlG,KAAKyC,MAAMiE,QAAM,SAACjF,GAAQ,OAAAA,EAAK8G,YAAUrC,OAAS,GAK7D8G,EAAA9M,UAAAwN,iBAAA,WACE,SAAI1N,KAAKyC,OAASzC,KAAKyC,MAAMiE,QAAM,SAACjF,GAAQ,OAACA,EAAK4G,cAAgB5G,EAAK6G,aAAWpC,OAAS,GAAKlG,KAAKyC,MAAMyD,OAAS,IAC3GlG,KAAKyC,MAAMiE,QAAM,SAACjF,GAAQ,OAACA,EAAK4G,cAAgB5G,EAAK6G,WAAa7G,EAAK8G,YAAUrC,SACjFlG,KAAKyC,MAAMiE,QAAM,SAACjF,GAAQ,OAACA,EAAK4G,cAAgB5G,EAAK6G,aAAWpC,QAK3E8G,EAAA9M,UAAAyN,mBAAA,WAAA,IAAArK,EAAAtD,KACQ4N,EAAe,IAAIjO,MAEzBK,KAAKyC,MAAM2F,SAAO,SAAEzB,IACdA,EAAE4B,UAAa5B,EAAE0B,aAAgB1B,EAAE2B,WACrCsF,EAAapE,KAAK7C,MAItB3G,KAAK+E,eAAepE,gBAAgBiN,GAAc9H,WAAS,WACzDxC,EAAK8J,kBAAkB7C,MAAK,MAG9BvK,KAAKgF,cAAc6C,MAAMnC,EAAAA,aAAaC,cAGxCqH,EAAA9M,UAAA2N,QAAA,SAAQ/F,GACFA,GACF9H,KAAKmJ,YAAYoB,KAAKzC,wBA3E3B4B,EAAAA,UAAS9G,KAAA,CAAC,CACT+G,SAAU,+BACVC,SAAA,+kVAZkCE,EAAAA,0BAC3B1J,SAD+CyJ,EAAAA,+CAiBrD0B,EAAAA,yBACAR,EAAAA,kCACAA,EAAAA,4BACAA,EAAAA,UAoEHiC,EA9EA,CAMqDc,EAAAA,2BCKrD,SAAgBC,EAAcC,GAE5B,OADY,WAAS,OAAAA,EAAoB3K,QAM3C,SAAgB4K,EAAwBC,GACtC,OAAO,IAAIC,EAAAA,8BAA8BD,GAG3C,IAAAE,EAAA,WAAA,SAAAA,KAyDA,OANSA,EAAAC,QAAP,SAAeC,GAEb,OADAvN,EAAAA,IAAIwN,qBAAuBD,EACpB,CACLE,SAAUJ,wBAtDfK,EAAAA,SAAQ7L,KAAA,CAAC,CACR8L,aAAc,CACZ5J,EACAoF,EACAc,EACAQ,EACAkB,EACAC,EACAK,GAEF2B,QAAS,CACPC,EAAAA,cACAC,EAAAA,uBACAC,EAAAA,iBACAC,EAAAA,kBACAC,EAAAA,gBAAgBX,WAElBY,QAAS,CACPnK,EACA+J,EAAAA,uBACA3E,EACAc,EACAQ,EACAkB,EACAC,EACAK,GAEFkC,UAAW,CACT9O,EACA2C,EAAAA,cACAE,EACA,CACEkM,QAASC,EAAAA,kBACTC,SAAUC,EAAAA,wBACVC,OAAO,GAET,CACEJ,QAASK,EAAAA,gBACTC,WAAY1B,EACZ2B,KAAM,CAACzM,GAAsBsM,OAAO,GAEtCtF,EAAAA,mBACA,CACEkF,QAASC,EAAAA,kBACTK,WAAYxB,EACZsB,OAAO,EACPG,KAAM,CAACzF,EAAAA,0BAWbmE,EAzDA","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from \"@angular/common/http\";\r\nimport { Api, ConfigService, FileCredentials, FileModel } from \"@groupdocs.examples.angular/common-components\";\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { IndexedFileModel } from './search-models';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class SearchService {\r\n  private _itemToRemove = new BehaviorSubject<FileModel>(null);\r\n  itemToRemove = this._itemToRemove.asObservable();\r\n\r\n  constructor(private _http: HttpClient, private _config: ConfigService) {\r\n  }\r\n\r\n  addFilesToIndex(filesToIndex: FileModel[]) {\r\n    return this._http.post(this._config.getSearchApiEndpoint() + Api.ADD_FILES_TO_INDEX, filesToIndex, Api.httpOptionsJson);\r\n  }\r\n\r\n  loadFiles(path: string) {\r\n    return this._http.post(this._config.getSearchApiEndpoint() + Api.LOAD_FILE_TREE, {'path': path}, Api.httpOptionsJson);\r\n  }\r\n\r\n  loadFile(credentials: FileCredentials) {\r\n    return this._http.post(this._config.getSearchApiEndpoint() + Api.LOAD_DOCUMENT_DESCRIPTION, credentials, Api.httpOptionsJson);\r\n  }\r\n\r\n  upload(file: File, url: string, rewrite: boolean) {\r\n    const formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    formData.append('rewrite', String(rewrite));\r\n    if (url) {\r\n      formData.append(\"url\", url);\r\n    }\r\n\r\n    return this._http.post(this._config.getSearchApiEndpoint() + Api.UPLOAD_DOCUMENTS, formData);\r\n  }\r\n\r\n  search(credentials: FileCredentials[], query: string) {\r\n    return this._http.post(this._config.getSearchApiEndpoint() + Api.SEARCH, {\r\n      'query': query\r\n    }, Api.httpOptionsJson);\r\n  }\r\n\r\n  removeFile(file: FileModel) {\r\n    return this._http.post(this._config.getSearchApiEndpoint() + Api.REMOVE_FROM_INDEX, file, Api.httpOptionsJson);\r\n  }\r\n\r\n  selectedItemToRemove(file: FileModel) {\r\n    this._itemToRemove.next(file);\r\n  }\r\n\r\n  getDocumentStatus(files: IndexedFileModel[]) {\r\n    return this._http.post(this._config.getSearchApiEndpoint() + Api.GET_FILE_STATUS, files, Api.httpOptionsJson);\r\n  }\r\n}\r\n","export class SearchConfig {\r\n  rewrite: boolean;\r\n  upload: boolean;\r\n  browse: boolean;\r\n  filesDirectory: string;\r\n  indexedFilesDirectory: string;\r\n  defaultDocument: string;\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {SearchConfig} from \"./search-config\";\r\nimport {Api, ConfigService} from \"@groupdocs.examples.angular/common-components\";\r\nimport {HttpClient} from \"@angular/common/http\";\r\nimport {BehaviorSubject, Observable} from \"rxjs\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SearchConfigService {\r\n  private _searchConfig: BehaviorSubject<SearchConfig> = new BehaviorSubject(new SearchConfig());\r\n  private _updatedConfig: Observable<SearchConfig> = this._searchConfig.asObservable();\r\n\r\n  constructor(private _http: HttpClient, private _config: ConfigService) {\r\n  }\r\n\r\n  get updatedConfig() {\r\n    return this._updatedConfig;\r\n  }\r\n\r\n  load() {\r\n    return new Promise<void>((resolve, reject) => {\r\n      const configEndpoint = this._config.getConfigEndpoint(Api.SEARCH_APP);\r\n      this._http.get(configEndpoint, Api.httpOptionsJson).toPromise().then((response: SearchConfig) => {\r\n        const searchConfig = <SearchConfig>response;\r\n        this._searchConfig.next(searchConfig);\r\n        resolve();\r\n      }).catch((response: any) => {\r\n        reject(`Could not load search config: ${JSON.stringify(response)}`);\r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n","import { FileModel } from \"@groupdocs.examples.angular/common-components\";\r\n\r\nexport class IndexedFileModel extends FileModel {\r\n  documentStatus: string;\r\n  password: string;\r\n}\r\n\r\nexport class SearchResult {\r\n  foundFiles: SearchResultItemModel[];\r\n  filePath: string;\r\n  searchDuration: string;\r\n  totalFiles: number;\r\n  totalOccurences: number;\r\n  indexedFiles: number;\r\n}\r\n\r\nexport class SearchResultItemModel implements FileModel {\r\n  directory: boolean;\r\n  occurrences: number;\r\n  size: number;\r\n  guid: string;\r\n  name: string;\r\n  isDirectory: boolean;\r\n  showPhrases: boolean;\r\n  foundPhrases: string;\r\n}\r\n\r\nexport class ExtendedFileModel implements FileModel {\r\n  guid: string;\r\n  directory: boolean;\r\n  isDirectory: boolean;\r\n  size: number;\r\n  name: string;\r\n  selected: boolean;\r\n}\r\n\r\nexport enum FileIndexingStatus {\r\n  Indexing = \"Indexing\",\r\n  SuccessfullyProcessed = \"SuccessfullyProcessed\",\r\n  Skipped = \"Skipped\",\r\n  ProcessedWithError = \"ProcessedWithError\",\r\n  PasswordRequired = \"PasswordRequired\"\r\n}","import {AfterViewInit, Component, OnInit} from '@angular/core';\r\nimport {SearchService} from \"./search.service\";\r\nimport {\r\n  FileModel,\r\n  ModalService,\r\n  UploadFilesService,\r\n  PasswordService,\r\n  FileCredentials, CommonModals, LoadingMaskService\r\n} from \"@groupdocs.examples.angular/common-components\";\r\nimport {SearchConfig} from \"./search-config\";\r\nimport {SearchConfigService} from \"./search-config.service\";\r\nimport {WindowService} from \"@groupdocs.examples.angular/common-components\";\r\nimport {\r\n  IndexedFileModel,\r\n  SearchResult,\r\n  SearchResultItemModel,\r\n  ExtendedFileModel,\r\n  FileIndexingStatus\r\n} from \"./search-models\";\r\n\r\n@Component({\r\n  selector: 'gd-search-app',\r\n  templateUrl: './search-app.component.html',\r\n  styleUrls: ['./search-app.component.less']\r\n})\r\nexport class SearchAppComponent implements OnInit, AfterViewInit {\r\n  title = 'search';\r\n  files: ExtendedFileModel[] = [];\r\n  searchResultItems: SearchResultItemModel[] = [];\r\n  indexedFiles: IndexedFileModel[] = [];\r\n  searchConfig: SearchConfig;\r\n  credentials: FileCredentials;\r\n  browseFilesModal = CommonModals.BrowseFiles;\r\n  isDesktop: boolean;\r\n  isLoading: boolean;\r\n  skipPasswordProtected: boolean;\r\n  firstSearchPerformed: boolean;\r\n  searchResult: SearchResult;\r\n\r\n  fileWasDropped = false;\r\n\r\n  constructor(private _searchService: SearchService,\r\n              private _modalService: ModalService,\r\n              configService: SearchConfigService,\r\n              uploadFilesService: UploadFilesService,\r\n              passwordService: PasswordService,\r\n              private _windowService: WindowService,\r\n              private _loadingMaskService: LoadingMaskService) {\r\n\r\n    configService.updatedConfig.subscribe((searchConfig) => {\r\n      this.searchConfig = searchConfig;\r\n    });\r\n\r\n    uploadFilesService.uploadsChange.subscribe((uploads) => {\r\n      if (uploads) {\r\n        let i: number;\r\n        for (i = 0; i < uploads.length; i++) {\r\n          this._searchService.upload(uploads.item(i), '', this.searchConfig.rewrite).subscribe((obj: FileCredentials) => {\r\n            if (!this.fileWasDropped) \r\n            {\r\n              this.selectDir('');\r\n            }\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    passwordService.passChange.subscribe((pass: string) => {\r\n      this.closeModal(CommonModals.PasswordRequired);\r\n\r\n      const passwordRequiredFile = this.indexedFiles.filter(f => f.documentStatus === FileIndexingStatus.PasswordRequired)[0];\r\n      passwordRequiredFile.password = pass;\r\n      this._searchService.addFilesToIndex([passwordRequiredFile]).subscribe(() => {\r\n        this.loadIndexedFiles(true);\r\n      });\r\n    });\r\n\r\n    this.isDesktop = _windowService.isDesktop();\r\n    _windowService.onResize.subscribe((w) => {\r\n      this.isDesktop = _windowService.isDesktop();\r\n    });\r\n\r\n    _searchService.itemToRemove.subscribe(file => {\r\n      if (file) {\r\n        this._searchService.removeFile(file).subscribe(() => {\r\n          this.removeFileFromList(file);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this._loadingMaskService\r\n      .onLoadingChanged\r\n      .subscribe((loading: boolean) => this.isLoading = loading);\r\n  }\r\n\r\n  get rewriteConfig(): boolean {\r\n    return this.searchConfig ? this.searchConfig.rewrite : true;\r\n  }\r\n\r\n  get uploadConfig(): boolean {\r\n    return this.searchConfig ? this.searchConfig.upload : true;\r\n  }\r\n\r\n  get browseConfig(): boolean {\r\n    return this.searchConfig ? this.searchConfig.browse : true;\r\n  }\r\n\r\n  openModal(id: string) {\r\n    this._modalService.open(id);\r\n  }\r\n\r\n  closeModal(id: string) {\r\n    this._modalService.close(id);\r\n  }\r\n\r\n  selectDir($event: string) {\r\n    this._searchService.loadFiles($event).subscribe((files: ExtendedFileModel[]) => this.files = files || []);\r\n  }\r\n\r\n  clearSearchResult() {\r\n    this.searchResult = null;\r\n\r\n    if (this.firstSearchPerformed && this.indexedFiles.length === 0) {\r\n      this.loadIndexedFiles(true);\r\n    }\r\n  }\r\n\r\n  selectAllItems(checked: boolean) {\r\n    this.files.forEach( (f) => {\r\n      if (!f.isDirectory && !f.directory) f.selected = checked;\r\n    });\r\n  }\r\n\r\n  loadIndexedFiles($event) {\r\n    if (!$event) return;\r\n\r\n    this._searchService.loadFiles(this.searchConfig.indexedFilesDirectory).subscribe((indexingFiles: IndexedFileModel[]) => \r\n    {\r\n      if (indexingFiles && this.skipPasswordProtected && indexingFiles.filter(f => f.documentStatus === FileIndexingStatus.PasswordRequired).length > 0)\r\n      {\r\n        indexingFiles.filter(f => f.documentStatus === FileIndexingStatus.PasswordRequired)[0].documentStatus = FileIndexingStatus.Skipped;\r\n      }\r\n\r\n      this.indexedFiles = indexingFiles || [];\r\n      if (this.indexedFiles.filter(f => f.documentStatus === FileIndexingStatus.Indexing).length > 0 ||\r\n          (!this.skipPasswordProtected && this.indexedFiles.filter(f => f.documentStatus === FileIndexingStatus.PasswordRequired).length > 0))\r\n      {\r\n        const timerId = setInterval(() => \r\n        {\r\n          this._searchService.getDocumentStatus(this.indexedFiles.filter(f => f.documentStatus === FileIndexingStatus.Indexing ||\r\n            (!this.skipPasswordProtected && f.documentStatus === FileIndexingStatus.PasswordRequired))).toPromise().then((searchIndexFiles: IndexedFileModel[]) => \r\n          {\r\n            searchIndexFiles.forEach((searchFile) => {\r\n              if (searchFile.documentStatus !== FileIndexingStatus.Indexing)\r\n              {\r\n                this.indexedFiles.filter(f => f.guid === searchFile.guid)[0].documentStatus = searchFile.documentStatus;\r\n              }\r\n            });\r\n\r\n            if (this.indexedFiles.filter(f => f.documentStatus === FileIndexingStatus.Indexing).length === 0)\r\n            {\r\n              clearInterval(timerId);\r\n            }\r\n        }).catch((response: any) => {\r\n          clearInterval(timerId);\r\n        });\r\n        }, 1000);\r\n      }\r\n    });\r\n  }\r\n\r\n  cancel($event) {\r\n    this.indexedFiles.filter(f => f.documentStatus === FileIndexingStatus.PasswordRequired)[0].documentStatus = FileIndexingStatus.Skipped;\r\n    this.skipPasswordProtected = true;\r\n    this.loadIndexedFiles(true);\r\n  }\r\n\r\n  upload($event: string) {\r\n    this._searchService.upload(null, $event, this.rewriteConfig).subscribe(() => {\r\n      this.selectDir('');\r\n    });\r\n  }\r\n\r\n  fileDropped($event, reloadFiles = false) {\r\n    this.fileWasDropped = $event;\r\n\r\n    if (reloadFiles)\r\n    {\r\n      this._searchService.loadFiles('').subscribe((files: ExtendedFileModel[]) => this.files = files || []);\r\n    }\r\n  }\r\n\r\n  removeFileFromList(file: FileModel) {\r\n    if (this.indexedFiles.length > 0) {\r\n      this.indexedFiles.forEach( (f, index) => {\r\n        if(f.guid === file.guid) this.indexedFiles.splice(index, 1);\r\n      });\r\n    }\r\n  }\r\n\r\n  search($event: string) {\r\n    if ($event === \"\") return;\r\n    const creds = [];\r\n    creds.push(this.credentials);\r\n    this._searchService.search(creds, $event).subscribe((result: SearchResult) => {\r\n      this.searchResult = result;\r\n      this.firstSearchPerformed = true;\r\n    });\r\n  }\r\n}\r\n","import {Component, EventEmitter, OnInit, Output, ElementRef, ViewChild} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'gd-search-panel',\r\n  templateUrl: './search-panel.component.html',\r\n  styleUrls: ['./search-panel.component.less']\r\n})\r\nexport class SearchPanelComponent implements OnInit {\r\n\r\n  @ViewChild('text',{\r\n    static : true\r\n  }) textElement: ElementRef;\r\n\r\n  private text = \"\";\r\n  @Output() searchText = new EventEmitter();\r\n  @Output() clearQuery = new EventEmitter();\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  search() {\r\n    this.searchText.emit(this.text);\r\n  }\r\n\r\n  setText(value: string) {\r\n    this.text = value;\r\n    if (value === \"\")\r\n    {\r\n      this.clearQueryString();\r\n    }\r\n  }\r\n\r\n  clearQueryString() {\r\n    this.text = \"\"\r\n    this.textElement.nativeElement.value = '';\r\n    this.clearQuery.emit(\"\");\r\n  }\r\n}\r\n","import { Component, EventEmitter, Input, Output, OnInit } from '@angular/core';\r\nimport { SearchResultItemModel, SearchResult } from '../search-models';\r\n\r\n@Component({\r\n  selector: 'gd-search-result-summary',\r\n  templateUrl: './search-result-summary.component.html',\r\n  styleUrls: ['./search-result-summary.component.less']\r\n})\r\n\r\nexport class SearchResultSummaryComponent implements OnInit {\r\n  @Input() searchResult: SearchResult;\r\n\r\n  constructor() {\r\n  }\r\n  \r\n  ngOnInit(): void {\r\n  }\r\n\r\n  getTotalOccurrencesMessage() {\r\n    const message = \"Nothing found\";\r\n\r\n    if (this.searchResult) {\r\n      if (this.searchResult.totalOccurences === 0)\r\n      {\r\n        return message;\r\n      }\r\n\r\n      return \"Found <b>\" + this.searchResult.totalOccurences + \"</b> occurrences <b>\" + this.searchResult.totalFiles + \"</b> files\";\r\n    }\r\n\r\n    return message;\r\n  }\r\n\r\n  getIndexedFilesMessage() {\r\n    if (this.searchResult) {\r\n      return \"<b>\" + this.searchResult.indexedFiles + \"</b> files indexed\";\r\n    }\r\n  }\r\n\r\n  getSearchDuration() {\r\n    if (this.searchResult) {\r\n      return this.searchResult.searchDuration;\r\n    }\r\n  }\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { SearchResultItemModel } from '../search-models';\r\nimport { FileModel, FileUtil } from \"@groupdocs.examples.angular/common-components\";\r\n\r\n@Component({\r\n  selector: 'gd-search-result-item',\r\n  templateUrl: './search-result-item.component.html',\r\n  styleUrls: ['./search-result-item.component.less']\r\n})\r\n\r\nexport class SearchResultItemComponent implements OnInit {\r\n  @Input() item: SearchResultItemModel;\r\n\r\n  constructor() {\r\n  }\r\n  \r\n  ngOnInit(): void {\r\n  }\r\n\r\n  getSizeString(size: number) {\r\n    const mb = size / 1024 / 1024;\r\n    if (mb > 1) {\r\n      return (Math.round(mb * 100) / 100) + ' MB';\r\n    } else {\r\n      const kb = size / 1024;\r\n      if (kb > 1) {\r\n        return (Math.round(kb * 100) / 100) + ' KB';\r\n      }\r\n    }\r\n    return size + ' Bytes';\r\n  }\r\n\r\n  getFormatIcon(file: FileModel) {\r\n    return FileUtil.find(file.name, file.directory).icon;\r\n  }\r\n\r\n  getFormatName(file: FileModel) {\r\n    return FileUtil.find(file.name, file.directory).format;\r\n  }\r\n\r\n  getOccurrencesMessage(occurrences: number) {\r\n    return \"Found <b>\" + occurrences + \"</b> occurrences\"\r\n  }\r\n\r\n  togglePhrases(item) {\r\n    item.showPhrases = !item.showPhrases;\r\n  }\r\n}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { FileModel } from '@groupdocs.examples.angular/common-components';\r\n\r\n@Component({\r\n  selector: 'gd-indexed-files-list',\r\n  templateUrl: './indexed-files-list.component.html',\r\n  styleUrls: ['./indexed-files-list.component.less']\r\n})\r\n\r\nexport class IndexedFilesListComponent implements OnInit {\r\n  @Input() files: FileModel[] = [];\r\n\r\n  constructor() {\r\n  }\r\n  \r\n  ngOnInit(): void {\r\n  }\r\n}","import { Component, Input, OnInit } from '@angular/core';\r\nimport { SearchService } from \"../search.service\";\r\nimport { FileModel, FileUtil } from '@groupdocs.examples.angular/common-components';\r\nimport { IndexedFileModel, FileIndexingStatus } from '../search-models';\r\n\r\n@Component({\r\n  selector: 'gd-indexed-file',\r\n  templateUrl: './indexed-file.component.html',\r\n  styleUrls: ['./indexed-file.component.less']\r\n})\r\n\r\nexport class IndexedFileComponent implements OnInit {\r\n  @Input() file: IndexedFileModel;\r\n\r\n  constructor(private _searchService: SearchService) {\r\n  }\r\n  \r\n  ngOnInit(): void {\r\n  }\r\n\r\n  removeFile($event, file: FileModel) {\r\n    $event.preventDefault();\r\n    $event.stopPropagation();\r\n    this._searchService.selectedItemToRemove(file);\r\n  }\r\n\r\n  getSizeString(size: number) {\r\n    const mb = size / 1024 / 1024;\r\n    if (mb > 1) {\r\n      return (Math.round(mb * 100) / 100) + ' MB';\r\n    } else {\r\n      const kb = size / 1024;\r\n      if (kb > 1) {\r\n        return (Math.round(kb * 100) / 100) + ' KB';\r\n      }\r\n    }\r\n    return size + ' Bytes';\r\n  }\r\n\r\n  getFormatIcon() {\r\n    return FileUtil.find(this.file.name, this.file.directory).icon;\r\n  }\r\n\r\n  getFormatName() {\r\n    return FileUtil.find(this.file.name, this.file.directory).format;\r\n  }\r\n\r\n  getStatusIcon() {\r\n    switch (this.file.documentStatus) {\r\n      case FileIndexingStatus.Indexing:\r\n      case FileIndexingStatus.PasswordRequired:\r\n        return \"circle-notch\";\r\n      case FileIndexingStatus.SuccessfullyProcessed:\r\n        return \"check\";\r\n      case FileIndexingStatus.ProcessedWithError:\r\n        return \"times\";\r\n      case FileIndexingStatus.Skipped:\r\n        return \"forward\";\r\n      default:\r\n        return \"times\";\r\n    }\r\n  }\r\n\r\n  getStatusTitle() {\r\n    switch (this.file.documentStatus) {\r\n      case FileIndexingStatus.Indexing:\r\n      case FileIndexingStatus.PasswordRequired:\r\n        return \"Indexing\";\r\n      case FileIndexingStatus.SuccessfullyProcessed:\r\n        return \"Indexed\";\r\n      case FileIndexingStatus.ProcessedWithError:\r\n        return \"Error\"\r\n      case FileIndexingStatus.Skipped:\r\n        return \"Skipped\";\r\n      default:\r\n        return \"times\";\r\n    }\r\n  }\r\n}\r\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { BrowseFilesModalComponent, UploadFilesService, ModalService, CommonModals } from '@groupdocs.examples.angular/common-components';\r\nimport { SearchService } from '../search.service';\r\nimport { ExtendedFileModel } from \"../search-models\";\r\n\r\nexport interface Option {\r\n  name: string;\r\n  value: any;\r\n  warning: boolean;\r\n}\r\n\r\n@Component({\r\n  selector: 'gd-search-browse-files-modal',\r\n  templateUrl: './search-browse-files-modal.component.html',\r\n  styleUrls: ['./search-browse-files-modal.component.less']\r\n})\r\n\r\nexport class SearchBrowseFilesModalComponent extends BrowseFilesModalComponent implements OnInit {\r\n  @Input() files: ExtendedFileModel[];\r\n  @Output() selectAll = new EventEmitter<boolean>();\r\n  @Output() filesAddedToIndex = new EventEmitter<boolean>();\r\n  @Output() fileDropped = new EventEmitter<boolean>();\r\n\r\n  constructor(_uploadService: UploadFilesService,\r\n    private _searchService: SearchService,\r\n    private _modalService: ModalService) {\r\n    super(_uploadService);\r\n  }\r\n\r\n  selectAllItems(checked: boolean){\r\n    this.selectAll.emit(checked);\r\n  }\r\n\r\n  selectSingleItem(checked: boolean, file: ExtendedFileModel){\r\n    const selectedFiles = this.files.filter(f => f.guid === file.guid);\r\n    if (selectedFiles.length === 1){\r\n      selectedFiles[0].selected = checked;\r\n    }\r\n  }\r\n\r\n  getLabelString(){\r\n    const label = 'Add to index'\r\n\r\n    if (this.files && this.files.length > 0) {\r\n      const selectedCount = this.files.filter(file => file.selected).length;\r\n      return selectedCount > 0 ? 'Add ' + selectedCount + ' to index' : label;\r\n    }\r\n    else\r\n    {\r\n      return label;\r\n    }\r\n  }\r\n\r\n  anyItemSelected() {\r\n    if (this.files && this.files.length > 0) {\r\n      return this.files.filter(file => file.selected).length > 0;\r\n    }\r\n    else return false;\r\n  }\r\n\r\n  allItemsSelected() {\r\n    if (this.files && this.files.filter(file => !file.isDirectory && !file.directory).length > 0 && this.files.length > 0) {\r\n      return this.files.filter(file => !file.isDirectory && !file.directory && file.selected).length \r\n         === this.files.filter(file => !file.isDirectory && !file.directory).length;\r\n    }\r\n    else return false;\r\n  }\r\n\r\n  addSelectedToIndex() {\r\n    const itemsToIndex = new Array<ExtendedFileModel>();\r\n\r\n    this.files.forEach((f) => {\r\n      if (f.selected && !f.isDirectory && !f.directory){\r\n        itemsToIndex.push(f);\r\n      }\r\n    });\r\n\r\n    this._searchService.addFilesToIndex(itemsToIndex).subscribe(() => {\r\n      this.filesAddedToIndex.emit(true);\r\n    });\r\n\r\n    this._modalService.close(CommonModals.BrowseFiles);\r\n  }\r\n\r\n  dropped($event) {\r\n    if ($event) {\r\n      this.fileDropped.emit($event);\r\n    }\r\n  }\r\n}\r\n","import {BrowserModule} from '@angular/platform-browser';\r\nimport {APP_INITIALIZER, ModuleWithProviders, NgModule} from '@angular/core';\r\nimport {HTTP_INTERCEPTORS, HttpClientModule} from '@angular/common/http';\r\nimport {SearchAppComponent} from './search-app.component';\r\nimport {\r\n  Api,\r\n  CommonComponentsModule,\r\n  ErrorInterceptorService, LoadingMaskInterceptorService,\r\n  LoadingMaskService\r\n} from '@groupdocs.examples.angular/common-components';\r\nimport {SearchService} from \"./search.service\";\r\nimport {ConfigService} from \"@groupdocs.examples.angular/common-components\";\r\nimport {SearchConfigService} from \"./search-config.service\";\r\nimport {FontAwesomeModule} from '@fortawesome/angular-fontawesome';\r\nimport {SearchPanelComponent} from './search-panel/search-panel.component';\r\nimport {SearchResultSummaryComponent} from './search-result-summary/search-result-summary.component';\r\nimport {SearchResultItemComponent} from './search-result-item/search-result-item.component';\r\nimport {IndexedFilesListComponent} from './indexed-files-list/indexed-files-list.component';\r\nimport {IndexedFileComponent} from './indexed-file/indexed-file.component';\r\nimport {SearchBrowseFilesModalComponent} from './search-browse-files-modal/search-browse-files-modal.component';\r\nimport {TranslateModule} from '@ngx-translate/core';\r\n\r\nexport function initializeApp(searchConfigService: SearchConfigService) {\r\n  const result = () => searchConfigService.load();\r\n  return result;\r\n}\r\n\r\n// NOTE: this is required during library compilation see https://github.com/angular/angular/issues/23629#issuecomment-440942981\r\n// @dynamic\r\nexport function setupLoadingInterceptor(service: LoadingMaskService) {\r\n  return new LoadingMaskInterceptorService(service);\r\n}\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SearchAppComponent,\r\n    SearchPanelComponent,\r\n    SearchResultSummaryComponent,\r\n    SearchResultItemComponent,\r\n    IndexedFilesListComponent,\r\n    IndexedFileComponent,\r\n    SearchBrowseFilesModalComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    CommonComponentsModule,\r\n    HttpClientModule,\r\n    FontAwesomeModule,\r\n    TranslateModule.forRoot()\r\n  ],\r\n  exports: [\r\n    SearchAppComponent,\r\n    CommonComponentsModule,\r\n    SearchPanelComponent,\r\n    SearchResultSummaryComponent,\r\n    SearchResultItemComponent,\r\n    IndexedFilesListComponent,\r\n    IndexedFileComponent,\r\n    SearchBrowseFilesModalComponent\r\n  ],\r\n  providers: [\r\n    SearchService,\r\n    ConfigService,\r\n    SearchConfigService,\r\n    {\r\n      provide: HTTP_INTERCEPTORS,\r\n      useClass: ErrorInterceptorService,\r\n      multi: true\r\n    },\r\n    {\r\n      provide: APP_INITIALIZER,\r\n      useFactory: initializeApp,\r\n      deps: [SearchConfigService], multi: true\r\n    },\r\n    LoadingMaskService,\r\n    {\r\n      provide: HTTP_INTERCEPTORS,\r\n      useFactory: setupLoadingInterceptor,\r\n      multi: true,\r\n      deps: [LoadingMaskService]\r\n    }\r\n  ]\r\n})\r\nexport class SearchModule {\r\n  static forRoot(apiEndpoint: string): ModuleWithProviders {\r\n    Api.DEFAULT_API_ENDPOINT = apiEndpoint;\r\n    return {\r\n      ngModule: SearchModule\r\n    };\r\n  }\r\n}\r\n"]}