!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@groupdocs.examples.angular/common-components"),require("@angular/common/http"),require("rxjs/operators"),require("rxjs"),require("jquery"),require("hammerjs"),require("@fortawesome/angular-fontawesome"),require("@fortawesome/fontawesome-svg-core"),require("@fortawesome/free-solid-svg-icons"),require("@fortawesome/free-regular-svg-icons"),require("ng-click-outside")):"function"==typeof define&&define.amd?define("@groupdocs.examples.angular/signature",["exports","@angular/core","@angular/common","@groupdocs.examples.angular/common-components","@angular/common/http","rxjs/operators","rxjs","jquery","hammerjs","@fortawesome/angular-fontawesome","@fortawesome/fontawesome-svg-core","@fortawesome/free-solid-svg-icons","@fortawesome/free-regular-svg-icons","ng-click-outside"],e):e(((t=t||self).groupdocs=t.groupdocs||{},t.groupdocs.examples=t.groupdocs.examples||{},t.groupdocs.examples.angular=t.groupdocs.examples.angular||{},t.groupdocs.examples.angular.signature={}),t.ng.core,t.ng.common,t.commonComponents,t.ng.common.http,t.rxjs.operators,t.rxjs,t.jquery,null,t.angularFontawesome,t.fontawesomeSvgCore,t.freeSolidSvgIcons,t.freeRegularSvgIcons,t.ngClickOutside)}(this,function(t,e,i,n,o,r,a,s,p,c,d,g,l,u){"use strict";var h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function f(t,e){function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function v(t){var e="function"==typeof Symbol&&t[Symbol.iterator],i=0;return e?e.call(t):{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}var m=function(){function t(t,e){this._http=t,this._config=e}return t.prototype.loadFiles=function(t){return this._http.post(this._config.getSignatureApiEndpoint()+n.Api.LOAD_FILE_TREE,{path:t},n.Api.httpOptionsJson)},t.prototype.loadFile=function(t){return this._http.post(this._config.getSignatureApiEndpoint()+n.Api.LOAD_DOCUMENT_DESCRIPTION,t,n.Api.httpOptionsJson)},t.prototype.upload=function(t,e,i,o){var r=new FormData;return r.append("file",t),r.append("rewrite",String(i)),o&&r.append("signatureType",o),e&&r.append("url",e),this._http.post(this._config.getSignatureApiEndpoint()+n.Api.UPLOAD_DOCUMENTS,r)},t.prototype.loadPage=function(t,e){return this._http.post(this._config.getSignatureApiEndpoint()+n.Api.LOAD_DOCUMENT_PAGE,{guid:t.guid,password:t.password,page:e},n.Api.httpOptionsJson)},t.prototype.getDownloadUrl=function(t){return this._config.getSignatureApiEndpoint()+n.Api.DOWNLOAD_DOCUMENTS+"/?path="+t.guid},t.prototype.loadPrint=function(t){return this._http.post(this._config.getSignatureApiEndpoint()+n.Api.LOAD_PRINT,{guid:t.guid,password:t.password},n.Api.httpOptionsJson)},t.prototype.loadPrintPdf=function(t){return this._http.post(this._config.getSignatureApiEndpoint()+n.Api.LOAD_PRINT_PDF,{guid:t.guid,password:t.password},n.Api.httpOptionsJsonResponseTypeBlob)},t.prototype.getSignatures=function(t,e){return this._http.post(this._config.getSignatureApiEndpoint()+n.Api.LOAD_FILE_TREE,{path:t,signatureType:e},n.Api.httpOptionsJson)},t.prototype.removeSignatures=function(t,e){return this._http.post(this._config.getSignatureApiEndpoint()+n.Api.DELETE_SIGNATURE_FILE,{guid:t,signatureType:e},n.Api.httpOptionsJson)},t.prototype.uploadSignature=function(t,e){if(t.fileList.length>1)for(var i=0;i<t.fileList.length-1;i++)this.upload(t.fileList.item(i),"",e,t.signType);return this.upload(t.fileList.item(t.fileList.length-1),"",e,t.signType)},t.prototype.getCode=function(t,e,i){return this._http.post(this._config.getSignatureApiEndpoint()+n.Api.SAVE_OPTICAL_CODE,{properties:{text:t,temp:e},signatureType:i},n.Api.httpOptionsJson)},t.prototype.loadSignatureImage=function(t){return this._http.post(this._config.getSignatureApiEndpoint()+n.Api.LOAD_SIGNATURE_IMAGE,{guid:t.guid,page:t.pageNumber,signatureType:t.type,password:""},n.Api.httpOptionsJson).pipe(r.map(function(e){return e.guid=t.guid,e}))},t.prototype.saveTextSignature=function(t){var e=this,i=t.props;return i.fontColor=this.toRgb(i.fontColor),this._http.post(this._config.getSignatureApiEndpoint()+n.Api.SAVE_TEXT,{properties:i},n.Api.httpOptionsJson).pipe(r.map(function(t){return t.fontColor=e.toHex(t.fontColor),t}))},t.prototype.toRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(e){var i=parseInt(e[1],16),n=parseInt(e[2],16),o=parseInt(e[3],16);return e?"rgb("+i+","+n+","+o+")":""}return t},t.prototype.toHex=function(t){if(t.match(/[0-9A-F]{6}|[0-9A-F]{3}$/i))return"#"===t.charAt(0)?t:"#"+t;if(!t.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/))return"";var e=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10)],i=function(t){if(t.length<2)for(var e=0,i=2-t.length;e<i;e++)t="0"+t;return t};return 3===e.length?"#"+i(e[0].toString(16))+i(e[1].toString(16))+i(e[2].toString(16)):void 0},t.prototype.saveImage=function(t){return this._http.post(this._config.getSignatureApiEndpoint()+n.Api.SAVE_IMAGE,{image:t},n.Api.httpOptionsJson)},t.prototype.saveStamp=function(t,e){var i,o;try{for(var r=v(e),a=r.next();!a.done;a=r.next()){var s=a.value;s.backgroundColor=this.toRgb(s.backgroundColor),s.strokeColor=this.toRgb(s.strokeColor),s.textColor=this.toRgb(s.textColor)}}catch(t){i={error:t}}finally{try{a&&!a.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}return this._http.post(this._config.getSignatureApiEndpoint()+n.Api.SAVE_STAMP,{image:t,stampData:e},n.Api.httpOptionsJson)},t.prototype.sign=function(t,e){var i=n.FileUtil.find(t.guid,!1).format;return this._http.post(this._config.getSignatureApiEndpoint()+n.Api.SIGN,{guid:t.guid,password:t.password?t.password:"",signaturesData:e,documentType:i},n.Api.httpOptionsJson)},t.prototype.downloadSigned=function(t,e){var i=n.FileUtil.find(t.guid,!1).format;return this._http.post(this._config.getSignatureApiEndpoint()+n.Api.DOWNLOAD_SIGNED,{guid:t.guid,password:t.password,signaturesData:e,documentType:i},n.Api.httpOptionsJsonResponseTypeBlob)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:o.HttpClient},{type:n.ConfigService}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(o.HttpClient),e.ɵɵinject(n.ConfigService))},token:t,providedIn:"root"}),t}(),y=function(){},x=function(){function t(t,e){this._http=t,this._config=e,this._signatureConfig=new a.BehaviorSubject(new y),this._updatedConfig=this._signatureConfig.asObservable()}return Object.defineProperty(t.prototype,"updatedConfig",{get:function(){return this._updatedConfig},enumerable:!0,configurable:!0}),t.prototype.load=function(){var t=this;return new Promise(function(e,i){var o=t._config.getConfigEndpoint(n.Api.SIGNATURE_APP);t._http.get(o,n.Api.httpOptionsJson).toPromise().then(function(i){var n=i;t._signatureConfig.next(n),e()}).catch(function(t){i("Could not load signature config: "+JSON.stringify(t))})})},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:o.HttpClient},{type:n.ConfigService}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(o.HttpClient),e.ɵɵinject(n.ConfigService))},token:t,providedIn:"root"}),t}(),b=function(){function t(){}return t.getSignatureType=function(e){switch(e){case t.TEXT.id:return t.TEXT;case t.IMAGE.id:return t.IMAGE;case t.DIGITAL.id:return t.DIGITAL;case t.QR_CODE.id:return t.QR_CODE;case t.BAR_CODE.id:return t.BAR_CODE;case t.STAMP.id:return t.STAMP;case t.HAND.id:return t.HAND}},t.TEXT={id:"text",name:"Text signatures",icon:"font",title:""},t.IMAGE={id:"image",name:"Uploaded Images",icon:"image",title:"Add image signature"},t.QR_CODE={id:"qrCode",name:"QR codes",icon:"qrcode",title:"New QR code"},t.BAR_CODE={id:"barCode",name:"Bar codes",icon:"barcode",title:"New Bar code"},t.DIGITAL={id:"digital",name:"Digital signatures",icon:"fingerprint",title:"New digital signature"},t.STAMP={id:"stamp",name:"Stamps",icon:"stamp",title:""},t.HAND={id:"hand",name:"Signatures",icon:"signature",title:""},t}(),w=function(t,e){this.fileList=t,this.signType=e},S=function(){function t(){}return t.TEMP="temp",t}(),C=function(t,e){this.left=t,this.top=e},_=function(){function t(){}return t.map=function(e,i,n){var o=new t;return o.signatureType=i,o.pageNumber=e.number,o.left=n.left,o.top=n.top,o.signatureGuid=e.guid,o.imageWidth=e.width,o.imageHeight=e.height,e.digitalProps&&(o.reason=e.digitalProps.reason,o.contact=e.digitalProps.contact,o.address=e.digitalProps.address,o.signaturePassword=e.digitalProps.signaturePassword,o.date=e.digitalProps.date),o},t}(),A=function(){},P=function(){this.height=0,this.width=0},T=function(){function t(){}return t.getDefault=function(){var e=new t;e.text="";var i=n.Formatting.default();return e.fontColor=i.color,e.font=i.font,e.fontSize=i.fontSize,e.underline=i.underline,e.bold=i.bold,e.italic=i.italic,e},t}(),k=function(){},I=function(){},D=function(){},O=function(){function t(){this.textExpansion=.173,this.textRepeat=1}return t.prototype.init=function(t){return this.text="",this.width=t?103:153,this.height=t?103:153,this.zIndex=10,this.backgroundColor="rgb(255, 255, 255)",this.strokeColor="rgb(51, 51, 51)",this.strokeWidth=1,this.fontSize=19,this.font="Arial",this.textColor="rgb(51, 51, 51)",this.radius=76.5,this.bold=!1,this.italic=!1,this.underline=!1,this},t}(),E=function(){function t(){}return t.widthOptions=function(){for(var t=[],e=1;e<=10;e++)t.push(this.widthOption(e));return t},t.widthOption=function(t){return{value:t,name:t+"px",separator:!1}},t}(),M=function(){function t(){this._observer=new a.Subject,this._selectSignature=this._observer.asObservable()}return Object.defineProperty(t.prototype,"selectSignature",{get:function(){return this._selectSignature},enumerable:!0,configurable:!0}),t.prototype.select=function(t){this._observer.next(t)},t}(),z=function(){function t(){this._observer=new a.Subject,this._removeSignature=this._observer.asObservable()}return Object.defineProperty(t.prototype,"removeSignature",{get:function(){return this._removeSignature},enumerable:!0,configurable:!0}),t.prototype.remove=function(t){this._observer.next(t)},t}(),F=function(){function t(){this._observer=new a.Subject,this._activeChange=this._observer.asObservable()}return Object.defineProperty(t.prototype,"activeChange",{get:function(){return this._activeChange},enumerable:!0,configurable:!0}),t.prototype.changeActive=function(t){this._observer.next(t)},t}(),j=function(){function t(){this.map=new Map}return t.prototype.add=function(t){this.map.set(t,[])},t.prototype.addId=function(t,e){this.map.has(t)||this.add(t),this.map.get(t).push(e)},t.prototype.delete=function(t){this.map.delete(t)},t.prototype.has=function(t){return this.map.has(t)},t.prototype.clear=function(){this.map.clear()},t.prototype.values=function(){return this.map.values()},t.prototype.get=function(t){return this.map.get(t)},t.prototype.remove=function(t,e){var i,n,o=this.map.get(t);if(this.delete(t),1!==o.length){this.add(t);try{for(var r=v(o),a=r.next();!a.done;a=r.next()){var s=a.value;s!==e&&this.map.get(t).push(s)}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}}},t.prototype.changeTemp=function(t,e){this.remove(S.TEMP,e),this.addId(t,e)},t}(),R=function(){function t(){this._observer=new a.Subject,this._copySignature=this._observer.asObservable(),this._observerChanges=new a.Subject,this._changesSignature=this._observerChanges.asObservable()}return Object.defineProperty(t.prototype,"copySignature",{get:function(){return this._copySignature},enumerable:!0,configurable:!0}),t.prototype.copy=function(t){this._observer.next(t)},Object.defineProperty(t.prototype,"changesSignature",{get:function(){return this._changesSignature},enumerable:!0,configurable:!0}),t.prototype.notifyChanges=function(t){this._observerChanges.next(t)},t}(),$=s,N=function(){function t(t,e,i,n,o){var s=this;this._signatureService=t,this._removeSignatureService=e,this._copySignatureService=i,this._activeSignatureService=n,this._signaturesHolderService=o,this.active=!0,this.unlock=!0,this.copied=!1,this.baseCopied=!1,this.subject=new a.Subject,this._activeSignatureService.activeChange.subscribe(function(t){s.id===t?s.active=!0:s.active=!1}),this.subject.pipe(r.debounceTime(300)).subscribe(function(t){s.notifyChanges(),s.sendSaveText()})}return t.prototype.ngOnInit=function(){},t.prototype.getData=function(){return"data:image/png;base64,"+this.data.data},t.prototype.dragOver=function(t){t.preventDefault(),t.stopPropagation()},t.prototype.dragStart=function(t){t.preventDefault(),this.oldPosition=n.Utils.getMousePosition(t),t.dataTransfer&&t.dataTransfer.setData("text","foo")},t.prototype.dragging=function(t){t.preventDefault();var e=n.Utils.getMousePosition(t);if(e.x&&e.y&&this.isOnPage(e)){var i=e.x-this.oldPosition.x,o=e.y-this.oldPosition.y;this.position.left+=i,this.position.top+=o,this.correctPosition(),this.oldPosition=e}},t.prototype.isOnPage=function(t){var e=document.elementFromPoint(t.x,t.y);return e&&$(e).parent().parent()&&($(e).parent().parent().parent().hasClass("page")||$(e).parent().parent().parent().parent().parent().hasClass("page"))},t.prototype.isText=function(){return b.TEXT.id===this.type},t.prototype.getFormatting=function(){var t=this.data.props,e=n.Formatting.default();return t&&(e.fontSize=t.fontSize,e.font=t.font,e.color=t.fontColor,e.bold=t.bold,e.underline=t.underline,e.italic=t.italic),e},t.prototype.saveTextSignature=function(t){this.data.props&&(this.fillFormatting(t),this.notifyChanges(),this.sendSaveText())},t.prototype.fillFormatting=function(t){this.data.props.fontSize=t.fontSize,this.data.props.font=t.font,this.data.props.bold=t.bold,this.data.props.italic=t.italic,this.data.props.underline=t.underline,this.data.props.fontColor=t.color},t.prototype.remove=function(){var t=new k;t.guid=this.data.guid,t.id=this.id,t.type=this.type,this._removeSignatureService.remove(t)},t.prototype.activation=function(){this._activeSignatureService.changeActive(this.id)},t.prototype.isDigital=function(){return this.type===b.DIGITAL.id},t.prototype.width=function(t){this.data.width+=t,this.unlock||(this.data.height+=t),this.correctPosition(),this.notifyChanges()},t.prototype.height=function(t){this.data.height+=t,this.unlock||(this.data.width+=t),this.correctPosition(),this.notifyChanges()},t.prototype.left=function(t){this.unlock&&(this.position.left+=t),this.correctPosition(),this.notifyChanges()},t.prototype.top=function(t){this.unlock&&(this.position.top+=t),this.correctPosition(),this.notifyChanges()},t.prototype.notifyChanges=function(){var t=new D;t.guid=this.data.guid,t.id=this.id,t.position=this.position,t.width=this.data.width,t.height=this.data.height,t.props=this.data.props,this._copySignatureService.notifyChanges(t)},t.prototype.drop=function(t){t.stopPropagation(),t.preventDefault()},t.prototype.isInit=function(){return 0===this.data.width&&0===this.data.height},t.prototype.onCopySign=function(){var t=new I;t.guid=this.data.guid,t.id=this.id,t.type=this.type,this._copySignatureService.copy(t)},t.prototype.ngAfterViewInit=function(){this.type===b.TEXT.id&&setTimeout(function(){var t=$("#text");t&&t.focus()},100)},t.prototype.correctPosition=function(){this.position.left<0&&(this.position.left=0),this.position.top<0&&(this.position.top=0),this.position.top+this.data.height>this.pageHeight&&(this.position.top=this.pageHeight-this.data.height),this.position.left+this.data.width>this.pageWidth&&(this.position.left=this.pageWidth-this.data.width)},t.prototype.saveText=function(t){this.data.props.text=t,this.subject.next(t)},t.prototype.sendSaveText=function(){var t=this;this._signatureService.saveTextSignature(this.data).subscribe(function(e){S.TEMP===t.data.guid&&(t._signaturesHolderService.changeTemp(e.imageGuid,t.id),t.data.guid=e.imageGuid),t.data.props=e})},t.prototype.hideMenu=function(t){this._activeSignatureService.changeActive(null)},t.prototype.getMenuShift=function(){var t=this.type===b.TEXT.id?426:148;return this.data.width>t?0:.5*(this.data.width-t)},t.decorators=[{type:e.Component,args:[{selector:"gd-signature-component",template:'<div class="gd-signature" *ngIf="!isDigital()"\n     (clickOutside)="hideMenu($event)"\n     [exclude]="\'gd-context-menu,.ui-resizable-handle\'"\n     [excludeBeforeClick]="true"\n     [clickOutsideEvents]="\'mousedown\'"\n     [clickOutsideEnabled]="active"\n     [style.left.px]="position.left" [style.top.px]="position.top"\n     [style.width.px]="data.width ? data.width : undefined"\n     [style.height.px]="data.height ? data.height : undefined" (click)="activation()">\n  <div [draggable]="true" (dragover)="dragOver($event)" (dragstart)="dragStart($event)"\n       (drag)="dragging($event)" (dragend)="dragging($event)" (drop)="drop($event)"\n       (panstart)="dragStart($event)" (panmove)="dragging($event)"\n       class="gd-signature-wrapper">\n    <gd-context-menu *ngIf="active" [topPosition]="position.top" [textMenu]="isText()" [formatting]="getFormatting()"\n                     (changeFormatting)="saveTextSignature($event)" (removeSign)="remove()" (copySign)="onCopySign()"\n                     [lock]="!unlock" (lockOut)="unlock = !$event" [translation]="getMenuShift()"></gd-context-menu>\n    <img class="gd-signature-image" *ngIf="!isText()" [attr.src]="getData()" alt>\n    <textarea class="gd-text" *ngIf="isText()" [value]="data.props?.text"\n              id="text" #text (keyup)="saveText(text.value)"\n              [style.text-decoration]="data.props?.underline ? \'underline\' : \'unset\'"\n              [style.font-style]="data.props?.italic ? \'italic\' : \'unset\'"\n              [style.font-weight]="data.props?.bold ? \'bold\' : \'unset\'"\n              [style.color]="data.props?.fontColor"\n              [style.font-family]="data?.props.font"\n              [style.font-size.px]="data?.props.fontSize"\n              [style.width.px]="data.width ? data.width : undefined"\n              [style.height.px]="data.height ? data.height : undefined"></textarea>\n  </div>\n  <gd-resizing [id]="id" *ngIf="active" [init]="isInit()"\n               (offsetX)="width($event)" (offsetY)="height($event)"\n               (offsetTop)="top($event)" (offsetLeft)="left($event)"\n               [se]="true" [sw]="unlock" [ne]="unlock" [nw]="unlock"\n               [pageHeight]="pageHeight" [pageWidth]="pageWidth"></gd-resizing>\n</div>\n<div class="gd-digital-marker" *ngIf="isDigital()">\n  <fa-icon [icon]="[\'fas\',\'info-circle\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n  <div>Digitally signed : {{data.digitalProps.contact ? data.digitalProps.contact : data.digitalProps.reason}}</div>\n  <fa-icon [icon]="[\'fas\',\'times\']" [class]="\'ng-fa-icon icon\'" (click)="remove()"></fa-icon>\n</div>\n',styles:[".gd-signature{position:absolute!important}.gd-signature .gd-signature-wrapper{height:inherit;outline:#679ffa solid 1px}.gd-signature-image{width:100%!important;height:inherit}.gd-text{width:inherit;height:inherit;border:none;resize:none;outline:0;margin:0;padding:0}.gd-digital-marker{background-color:#3787f5;height:16px;width:100%;text-align:left;display:flex;position:absolute;bottom:0}.gd-digital-marker .icon{color:#fff;font-size:10px;margin:0 5px 0 3px}.gd-digital-marker div{flex-grow:1;font-size:8px;color:#fff;margin-top:1px}"]}]}],t.ctorParameters=function(){return[{type:m},{type:z},{type:R},{type:F},{type:j}]},t.propDecorators={id:[{type:e.Input}],data:[{type:e.Input}],position:[{type:e.Input}],type:[{type:e.Input}],pageWidth:[{type:e.Input}],pageHeight:[{type:e.Input}]},t}(),L=function(){},U=function(t){function e(){return t.call(this)||this}return f(e,t),e}(n.TabActivatorService),B=s,H=function(){function t(t,e,i,o,r,a,s,p,c,d,g,l,u,h,f,m,y,x,w,S,C,_){var A=this;this._signatureService=t,this._modalService=e,this._navigateService=r,this._zoomService=a,this._renderPrintService=p,this._windowService=d,this._selectSignatureService=g,this._signatureTabActivationService=l,this._hostingComponentsService=u,this._addDynamicComponentService=h,this._dragSignatureService=f,this._onCloseService=m,this._activeSignatureService=x,this._excMessageService=w,this._signaturesHolderService=S,this._tabActivatorService=C,this.title="signature",this.files=[],this.countPages=0,this.formatDisabled=!this.file,this.browseFilesModal=n.CommonModals.BrowseFiles,this.signatureTypes=[b.TEXT,b.IMAGE,b.DIGITAL,b.QR_CODE,b.BAR_CODE,b.STAMP,b.HAND],this.signatureTypeCodes=[b.QR_CODE,b.BAR_CODE],this.signatureComponents=new Map,this.fileWasDropped=!1,this._tabActivatorService.activeTabChange.subscribe(function(t){"1"===t&&(A.activeSignatureTab&&A._signatureTabActivationService.changeActiveTab(A.activeSignatureTab),A.activeSignatureTab=null)}),_.copySignature.subscribe(function(t){var e,i,n=A.signatureComponents.get(t.id);if(n){var o=n.instance,r=o.data.number;o.baseCopied=!0;try{for(var a=v(A.file.pages),s=a.next();!s.done;s=a.next()){var p=s.value;if(p.number!==r){var c=A.createDraggableSign(o,t,p),d=A.createAddedSignature(t,o,p),g=A.addSignatureComponent(d,c,p,!0);A._signaturesHolderService.addId(c.guid,g)}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(e)throw e.error}}}}),_.changesSignature.subscribe(function(t){var e,i;if(A.signatureComponents.get(t.id)){var n=A._signaturesHolderService.get(t.guid);try{for(var o=v(n),r=o.next();!r.done;r=o.next()){var a=r.value,s=A.signatureComponents.get(a);if(s){var p=s.instance;p.id!==t.id&&(p.copied||p.baseCopied)&&(p.data.width=t.width,p.data.height=t.height,p.data.position=t.position,p.data.props=t.props)}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}}}),y.removeSignature.subscribe(function(t){var e,i,n=A._signaturesHolderService.get(t.guid);try{for(var o=v(n),r=o.next();!r.done;r=o.next()){var a=r.value;if(t.type===b.DIGITAL.id||t.id===a){var s=A.signatureComponents.get(a);s&&s.destroy(),A.signatureComponents.delete(a),A._signaturesHolderService.remove(t.guid,a)}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}}),i.updatedConfig.subscribe(function(t){A.signatureConfig=t}),o.uploadsChange.subscribe(function(t){if(t){var e=void 0;for(e=0;e<t.length;e++)A._signatureService.upload(t.item(e),"",A.rewriteConfig,null).subscribe(function(t){A.fileWasDropped?A.selectFile(t.guid,"",""):A.selectDir("")})}}),s.checkPreload.subscribe(function(t){if(0!==A.preloadPageCountConfig)for(var e=t;e<t+2;e++)e>0&&e<=A.countPages&&!A.file.pages[e-1].data&&A.preloadPages(e,e)}),c.passChange.subscribe(function(t){A.selectFile(A.credentials.guid,t,n.CommonModals.PasswordRequired)}),g.selectSignature.subscribe(function(t){A.selectSignature(t)}),this.isDesktop=d.isDesktop(),d.onResize.subscribe(function(t){A.isDesktop=d.isDesktop()})}return t.prototype.createDraggableSign=function(t,e,i){var n=new S;return n.type=t.type,n.guid=e.guid,n.position=t.position,n.pageNumber=i.number,n},t.prototype.createAddedSignature=function(t,e,i){var n=new P;return n.guid=t.guid,n.data=e.data.data,e.data.props&&(n.props=e.data.props),n.width=e.data.width,n.height=e.data.height,n.number=i.number,n},t.prototype.ngOnInit=function(){this.defaultDocumentConfig()&&(this.isLoading=!0,this.selectFile(this.defaultDocumentConfig(),"",""))},Object.defineProperty(t.prototype,"rewriteConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.rewrite},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomConfig",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageSelectorConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.pageSelector},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preloadPageCountConfig",{get:function(){return this.signatureConfig?this.signatureConfig.preloadPageCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downloadConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.download},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downloadOriginalConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.downloadOriginal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"downloadSingedConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.downloadSigned},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uploadConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.upload},enumerable:!0,configurable:!0}),t.prototype.defaultDocumentConfig=function(){return this.signatureConfig?this.signatureConfig.defaultDocument:""},Object.defineProperty(t.prototype,"printConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.print},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"browseConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.browse},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"htmlModeConfig",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableRightClickConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.enableRightClick},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textSignatureConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.textSignature},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageSignatureConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.imageSignature},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"digitalSignatureConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.digitalSignature},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"qrCodeSignatureConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.qrCodeSignature},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"barCodeSignatureConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.barCodeSignature},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stampSignatureConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.stampSignature},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handSignatureConfig",{get:function(){return!this.signatureConfig||this.signatureConfig.handSignature},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentPage",{get:function(){return this._navigateService.currentPage},enumerable:!0,configurable:!0}),t.prototype.openModal=function(t){this._modalService.open(t)},t.prototype.closeModal=function(t){this._modalService.close(t)},t.prototype.selectDir=function(t){var e=this;this._signatureService.loadFiles(t).subscribe(function(t){return e.files=t||[]})},t.prototype.selectFile=function(t,e,i){var n=this;this.credentials={guid:t,password:e},this.file=null,this._signatureService.loadFile(this.credentials).subscribe(function(t){if(n.file=t,n.formatDisabled=!n.file,t){var e=n.preloadPageCountConfig,i=t.pages?t.pages.length:0;e>0&&n.preloadPages(1,e>i?i:e),n._navigateService.countPages=i,n._navigateService.currentPage=1,n.countPages=i,n.cleanSignatures()}}),i&&this._modalService.close(i),this.clearData()},t.prototype.preloadPages=function(t,e){for(var i=this,n=function(t){o._signatureService.loadPage(o.credentials,t).subscribe(function(e){i.file.pages[t-1]=e})},o=this,r=t;r<=e;r++)n(r)},t.prototype.upload=function(t){var e=this;this._signatureService.upload(null,t,this.rewriteConfig,null).subscribe(function(){e.selectDir("")})},t.prototype.downloadFile=function(){this.formatDisabled||window.location.assign(this._signatureService.getDownloadUrl(this.credentials))},t.prototype.clearData=function(){var t,e;if(this.file&&this.file.pages)try{for(var i=v(this.file.pages),n=i.next();!n.done;n=i.next()){n.value.data=null}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.onRightClick=function(t){return this.enableRightClickConfig},t.prototype.getSignatureTypeConfig=function(t){switch(t){case b.TEXT.id:return this.textSignatureConfig;case b.IMAGE.id:return this.imageSignatureConfig;case b.DIGITAL.id:return this.digitalSignatureConfig;case b.QR_CODE.id:return this.qrCodeSignatureConfig;case b.BAR_CODE.id:return this.barCodeSignatureConfig;case b.STAMP.id:return this.stampSignatureConfig;case b.HAND.id:return this.handSignatureConfig}},t.prototype.dragOver=function(t){t.preventDefault(),t.stopPropagation()},t.prototype.dropSignature=function(t){t.preventDefault(),t.stopPropagation();var e=n.Utils.getMousePosition(t),i=document.elementFromPoint(e.x,e.y);if(i&&B(i).parent().parent()&&B(i).parent().parent().parent().hasClass("page")){var o=B(i).parent().parent()[0],r=e.x-B(o).offset().left,a=e.y-B(o).offset().top,s=new C(r,a),p=this._dragSignatureService.sign;if(p){var c=B(i).parent().attr("id");if(c){var d=c.split("-");p.pageNumber=2===d.length?parseInt(d[1],10):p.pageNumber}p.position=s,this.selectSignature(p),this._dragSignatureService.sign=null}}},t.prototype.selectSignature=function(t){var e,i,n=this;if(t.type===b.DIGITAL.id){var o=new P;o.digitalProps=t.digitalProps,o.guid=t.guid,o.number=t.pageNumber;try{for(var r=v(this.file.pages),a=r.next();!a.done;a=r.next()){var s=a.value,p=this.addSignatureComponent(o,t,s);this._signaturesHolderService.addId(t.guid,p)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}this.closeTab(t.type)}else this._signatureService.loadSignatureImage(t).subscribe(function(e){e.number=t.pageNumber;var i=n.file.pages.find(function(e){return e.number===t.pageNumber}),o=n.addSignatureComponent(e,t,i);n._signaturesHolderService.addId(t.guid,o),n.closeTab(t.type)})},t.prototype.addSignatureComponent=function(t,e,i,n){void 0===n&&(n=!1);var o=this._hostingComponentsService.find(i.number);if(o){for(var r=o.viewContainerRef,a=this._addDynamicComponentService.addDynamicComponent(r,N),s=this.signatureComponents.size+1;t.width>=i.width||t.height>=i.height;)t.width=t.width/2,t.height=t.height/2;return a.instance.id=s,a.instance.copied=n,a.instance.data=t,a.instance.position=e.position,a.instance.type=e.type,a.instance.pageWidth=i.width,a.instance.pageHeight=i.height,this.signatureComponents.set(s,a),this._activeSignatureService.changeActive(s),s}return null},t.prototype.closeTab=function(t){this._signatureTabActivationService.changeActiveTab(t)},t.prototype.hideAll=function(t){t.target.parentElement&&t.target.parentElement.attributes.name&&"button"===t.target.parentElement.attributes.name.value||t.target.parentElement&&t.target.parentElement.parentElement&&t.target.parentElement.parentElement.attributes.name&&"button"===t.target.parentElement.parentElement.attributes.name.value||t.target.parentElement&&t.target.parentElement.parentElement&&t.target.parentElement.parentElement.parentElement&&t.target.parentElement.parentElement.parentElement.parentElement&&t.target.parentElement.parentElement.parentElement.parentElement.attributes.name&&"button"===t.target.parentElement.parentElement.parentElement.parentElement.attributes.name.value||this._onCloseService.close(!0)},t.prototype.newSign=function(t){b.HAND.id===t?(this._modalService.open(n.CommonModals.DrawHandSignature),this._signatureTabActivationService.changeActiveTab(b.HAND.id)):b.STAMP.id===t?(this._modalService.open(n.CommonModals.DrawStampSignature),this._signatureTabActivationService.changeActiveTab(b.STAMP.id)):b.TEXT.id===t&&(this.addTextSign(),this._signatureTabActivationService.changeActiveTab(b.TEXT.id))},t.prototype.addTextSign=function(){var t=new P;t.props=T.getDefault(),t.guid=S.TEMP;var e=new S;e.guid=S.TEMP,e.position=new C(0,0),e.type=b.TEXT.id;var i=this._navigateService.currentPage;t.number=i,e.pageNumber=i;var n=this.file.pages.find(function(t){return t.number===i}),o=this.addSignatureComponent(t,e,n);this._signaturesHolderService.addId(e.guid,o)},t.prototype.ngOnDestroy=function(){this.cleanSignatures()},t.prototype.cleanSignatures=function(){var t,e;try{for(var i=v(this.signatureComponents.values()),n=i.next();!n.done;n=i.next()){n.value.destroy()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.signatureComponents=new Map,this._signaturesHolderService.clear()},t.prototype.sign=function(){var t=this,e=this.prepareSignaturesData();this._signatureService.sign(this.credentials,e).subscribe(function(e){t._modalService.open(n.CommonModals.OperationSuccess),t.selectFile(e.guid,null,n.CommonModals.OperationSuccess)})},t.prototype.prepareSignaturesData=function(){var t,e,i,n,o=[];try{for(var r=v(this._signaturesHolderService.values()),a=r.next();!a.done;a=r.next()){var s=a.value;try{for(var p=v(s),c=p.next();!c.done;c=p.next()){var d=c.value,g=this.signatureComponents.get(d).instance,l=g.data,u=g.position,h=g.type;if(S.TEMP!==l.guid&&o.push(_.map(l,h,u)),b.DIGITAL.id===h)break}}catch(t){i={error:t}}finally{try{c&&!c.done&&(n=p.return)&&n.call(p)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return o},t.prototype.isPdf=function(){return!(!this.file||"Portable Document Format"!==n.FileUtil.find(this.file.guid,!1).format)},t.prototype.codesConfig=function(){return this.getSignatureTypeConfig(b.BAR_CODE.id)||this.getSignatureTypeConfig(b.QR_CODE.id)},t.prototype.isVisible=function(t){var e=t!==b.BAR_CODE.id&&t!==b.QR_CODE.id;return this.getSignatureTypeConfig(t)&&(this.isDesktop||e)},t.prototype.activeTab=function(t){this.activeSignatureTab=t},t.prototype.fileDropped=function(t){this.fileWasDropped=t},t.decorators=[{type:e.Component,args:[{selector:"gd-signature",template:'<gd-loading-mask [loadingMask]="isLoading"></gd-loading-mask>\n<div class="wrapper" (contextmenu)="onRightClick($event)" (click)="hideAll($event)">\n  <div class="signature-wrapper wrapper">\n    <gd-tabbed-toolbars [logo]="\'signature\'" [icon]="\'pen-square\'">\n      <gd-tabs>\n        <gd-tab [tabTitle]="\'File\'" [icon]="\'folder-open\'" [id]="\'1\'" [active]="true">\n          <div id="files-tools" class="toolbar-panel">\n            <gd-button [icon]="\'folder-open\'" [tooltip]="\'Browse files\'" (click)="openModal(browseFilesModal)"\n                       *ngIf="browseConfig"></gd-button>\n\n            <gd-button [disabled]="formatDisabled" [icon]="\'download\'" [tooltip]="\'Download\'"\n                       (click)="downloadFile()" *ngIf="downloadConfig"></gd-button>\n            <gd-button [disabled]="formatDisabled" [icon]="\'save\'" [tooltip]="\'Save\'" (click)="sign()"></gd-button>\n\n          </div>\n        </gd-tab>\n        <gd-tab [tabTitle]="\'Signatures\'" [icon]="\'signature\'" [id]="\'2\'">\n          <div class="toolbar-panel">\n            <div *ngFor="let signatureType of signatureTypes">\n              <gd-signature-tab [disabled]="!file" *ngIf="isVisible(signatureType.id)"\n                                [icon]="signatureType.icon" (activeTab)="activeTab($event)"\n                                [id]="signatureType.id" [tooltip]="signatureType.name">\n              </gd-signature-tab>\n            </div>\n          </div>\n        </gd-tab>\n        <gd-tab [tabTitle]="\'\'" [icon]="\'qrcode\'" [id]="\'3\'" *ngIf="!isDesktop && codesConfig()">\n          <div class="toolbar-panel">\n            <div *ngFor="let signatureType of signatureTypeCodes">\n              <gd-signature-tab [disabled]="!file" *ngIf="getSignatureTypeConfig(signatureType.id)"\n                                [icon]="signatureType.icon" (activeTab)="activeTab($event)"\n                                [id]="signatureType.id" [tooltip]="signatureType.name">\n              </gd-signature-tab>\n            </div>\n          </div>\n        </gd-tab>\n      </gd-tabs>\n    </gd-tabbed-toolbars>\n    <gd-signature-left-panel *ngIf="activeSignatureTab" [rewrite]="rewriteConfig" (newSignatureEvent)="newSign($event)"\n                             [isPdf]="isPdf()" [id]="activeSignatureTab">\n    </gd-signature-left-panel>\n    <div class="doc-panel" *ngIf="file">\n      <gd-document (drop)="dropSignature($event)" (dragover)="dragOver($event)" class="gd-document" *ngIf="file"\n                   [file]="file" [mode]="htmlModeConfig" gdScrollable\n                   [preloadPageCount]="preloadPageCountConfig" gdRenderPrint [htmlMode]="htmlModeConfig"></gd-document>\n    </div>\n\n    <gd-init-state [icon]="\'signature\'" [text]="\'Drop file here to upload\'" *ngIf="!file"\n                   (fileDropped)="fileDropped($event)">\n      Click\n      <fa-icon [icon]="[\'fas\',\'folder-open\']"></fa-icon>\n      to open file<br>\n      Or drop file here\n    </gd-init-state>\n    <gd-hand-modal></gd-hand-modal>\n    <gd-stamp-modal></gd-stamp-modal>\n  </div>\n  <gd-browse-files-modal (urlForUpload)="upload($event)" [files]="files" (selectedDirectory)="selectDir($event)"\n                         (selectedFileGuid)="selectFile($event, null, browseFilesModal)"\n                         [uploadConfig]="uploadConfig"></gd-browse-files-modal>\n\n  <gd-error-modal></gd-error-modal>\n  <gd-password-required></gd-password-required>\n  <gd-success-modal></gd-success-modal>\n</div>\n',styles:["@import url(https://fonts.googleapis.com/css?family=Open+Sans&display=swap);:host *{font-family:'Open Sans',Arial,Helvetica,sans-serif}::ng-deep .page{position:relative}::ng-deep .gd-page-image{width:unset;height:unset}::ng-deep .top-panel{align-content:flex-start}.wrapper{align-items:stretch;height:100%;width:100%;position:fixed;top:0;bottom:0;left:0;right:0}.doc-panel{display:flex;height:inherit}.gd-document{width:100%;height:calc(100% - 90px)}.toolbar-panel{width:100%;display:flex;align-items:center}.signature-wrapper ::ng-deep .button{color:#3e4e5a!important}.signature-wrapper ::ng-deep .button .text{padding:0!important}@media (max-width:1037px){::ng-deep .panzoom{justify-content:unset!important}::ng-deep .logo ::ng-deep .icon{font-size:24px!important}::ng-deep .top-panel{height:120px!important}}"]}]}],t.ctorParameters=function(){return[{type:m},{type:n.ModalService},{type:x},{type:n.UploadFilesService},{type:n.NavigateService},{type:n.ZoomService},{type:n.PagePreloadService},{type:n.RenderPrintService},{type:n.PasswordService},{type:n.WindowService},{type:M},{type:U},{type:n.HostingDynamicComponentService},{type:n.AddDynamicComponentService},{type:L},{type:n.OnCloseService},{type:z},{type:F},{type:n.ExceptionMessageService},{type:j},{type:n.TabActivatorService},{type:R}]},t}(),q=function(){function t(t,i,n,o,r){this._navigateService=t,this._selectSignatureService=i,this._dragSignatureService=n,this._datePipe=o,this._signaturesHolderService=r,this.removeSignatureEvent=new e.EventEmitter,this.showDigitalInputs=!1,this.digitalProps=new A,this.digitalProps.date=this._datePipe.transform(new Date,"dd-MM-yyyy")}return t.prototype.ngOnInit=function(){},t.prototype.getImage=function(t){return"data:image/png;base64,"+t},t.prototype.deleteSign=function(t){this.removeSignatureEvent.emit(t)},t.prototype.isDigital=function(){return b.DIGITAL.id===this.signatureType},t.prototype.selectSignature=function(t){this._selectSignatureService.select(t)},t.prototype.getSign=function(t){var e=new S;return e.type=this.signatureType,e.guid=t,e.position=new C(0,0),e.pageNumber=this._navigateService.currentPage,e},t.prototype.select=function(t){if(this.signatureType===b.DIGITAL.id)this.showDigitalInputs=this.digitalId!==t,this.digitalId=this.digitalId===t?null:t;else{var e=this.getSign(t);this.selectSignature(e)}},t.prototype.dragOver=function(t){t.preventDefault(),t.stopPropagation()},t.prototype.dragLeave=function(t,e){this._dragSignatureService.sign=this.getSign(e)},t.prototype.selectDigital=function(t){if(this.isActive(t)){var e=this.getSign(t);e.digitalProps=this.digitalProps,this.selectSignature(e)}},t.prototype.parseDate=function(t){return this._datePipe.transform(t,"dd-MM-yyyy")},t.prototype.isActive=function(t){return!this._signaturesHolderService.has(t)},t.prototype.dragStart=function(t){t.dataTransfer.setData("text","foo")},t.prototype.empty=function(){return!(this.loading||this.signatures&&0!==this.signatures.length)},t.prototype.ngOnChanges=function(t){this.showDigitalInputs&&(this.showDigitalInputs=this.signatureType===b.DIGITAL.id)},t.prototype.drop=function(t){t.preventDefault(),t.stopPropagation()},t.decorators=[{type:e.Component,args:[{selector:"gd-signature-list-panel",template:'<div class="gd-signature-list-wrapper">\n  <div class="gd-signature-list-scroll" *ngIf="signatures">\n    <div class="gd-signature-list" *ngIf="signatures">\n      <div class="gd-signature" *ngFor="let signature of signatures">\n        <div class="gd-signature-item" [draggable]="isDigital() ? false : true"\n             (dragover)="dragOver($event)" (dragstart)="dragStart($event)"\n             (dragleave)="dragLeave($event, signature.guid)" (drop)="drop($event)">\n          <div class="gd-signature-thumbnail" *ngIf="isDigital()" (click)="select(signature.guid)">\n            <fa-icon [icon]="[\'fa\',\'fingerprint\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n          </div>\n          <div class="gd-signature-thumbnail" *ngIf="signature.image">\n            <img [ngClass]="\'gd-signature-thumbnail-\' + signatureType"\n                 [attr.src]="getImage(signature.image) | safeResourceHtml"\n                 alt="" [draggable]="false" (click)="select(signature.guid)">\n          </div>\n          <div class="gd-signature-title" [ngClass]="signatureType" (click)="select(signature.guid)">\n            <label class="gd-signature-name" [style.color]="signature.fontColor">\n              {{signature.text ? signature.text : signature.name}}</label>\n          </div>\n          <div class="gd-signature-trash-icon">\n            <fa-icon [icon]="[\'fas\',\'trash\']" [class]="\'ng-fa-icon icon\'"\n                     (click)="deleteSign(signature.guid)"></fa-icon>\n          </div>\n        </div>\n        <div class="gd-digital-inputs" *ngIf="showDigitalInputs && digitalId === signature.guid">\n          <div class="gd-digital-input-wrapper">\n            <fa-icon [icon]="[\'fas\',\'comment\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n            <input #reason (input)="digitalProps.reason = reason.value" type="text" placeholder="Reason">\n          </div>\n          <div class="gd-digital-input-wrapper" *ngIf="isPdf">\n            <fa-icon [icon]="[\'fas\',\'envelope\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n            <input #contact (input)="digitalProps.contact = contact.value" type="text" placeholder="Contact">\n          </div>\n          <div class="gd-digital-input-wrapper" *ngIf="isPdf">\n            <fa-icon [icon]="[\'fas\',\'map-marker-alt\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n            <input #address (input)="digitalProps.address = address.value" type="text" placeholder="Location">\n          </div>\n          <div class="gd-digital-input-wrapper">\n            <fa-icon [icon]="[\'fas\',\'key\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n            <input #password (input)="digitalProps.signaturePassword = password.value" type="password"\n                   placeholder="Password">\n          </div>\n          <div class="gd-digital-input-wrapper">\n            <fa-icon [icon]="[\'fas\',\'calendar\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n            <input type="date" #date (input)="digitalProps.date=parseDate(date.value)" placeholder="Date">\n          </div>\n          <div class="gd-sign-digital" [ngClass]="isActive(signature.guid) ? \'active\' : \'\'"\n               (click)="selectDigital(signature.guid)">\n            <fa-icon [icon]="[\'fas\',\'save\']"></fa-icon>\n            <span class="digital-apply">Apply</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="gd-signature-empty-list" *ngIf="empty()">\n    <fa-icon *ngIf="icon" [icon]="[\'fas\',icon]" [class]="\'ng-fa-icon icon\'"></fa-icon>\n    <span class="gd-empty-list-text">There is no entries yet</span>\n  </div>\n</div>\n',styles:[".gd-signature-list-wrapper{display:flex;flex-direction:column;flex:1;overflow:auto;height:100%}.gd-signature-list-scroll{display:block;overflow-x:hidden;overflow-y:auto!important}.gd-signature-item{width:100%;cursor:pointer;position:relative;min-height:68px;display:flex;flex-direction:row;background-color:rgba(255,255,255)}.gd-signature-item .icon{font-size:15px;color:#676767;cursor:pointer}.gd-signature-item .gd-signature-trash-icon{flex:0 0 70px;display:flex;align-items:center;justify-content:center}.gd-signature-item .gd-signature-name{max-width:130px;font-size:13px;color:rgba(0,0,0,.36);cursor:pointer;text-overflow:ellipsis;white-space:nowrap;display:block;overflow:hidden}.gd-signature-item .gd-signature-thumbnail{flex:0 0 70px;display:flex;align-items:center;justify-content:center;width:auto}.gd-signature-item .gd-signature-thumbnail .icon{font-size:30px;padding:0;margin:0;opacity:.25}.gd-signature-item .gd-signature-title{flex:1;display:flex;align-items:center;justify-content:flex-start;padding-left:7px}.gd-signature-item .gd-signature-thumbnail-hand,.gd-signature-item .gd-signature-thumbnail-image,.gd-signature-item .gd-signature-thumbnail-text{max-width:70px;height:41px}.gd-signature-item .gd-signature-thumbnail-image{min-width:41px;max-width:70px}.gd-signature-item .gd-signature-thumbnail-barCode,.gd-signature-item .gd-signature-thumbnail-qrCode{max-width:70px;height:44px}.gd-signature-item .gd-signature-thumbnail-stamp{max-width:70px;height:48px}.gd-signature-item .gd-signature-title.text{padding-left:16px}.gd-signature-list{display:flex;flex-direction:column;width:inherit;background-color:#e7e7e7}.gd-signature{display:flex;flex-direction:column;width:100%;background-color:rgba(255,255,255,.75);margin-bottom:2px}.gd-signature-empty-list{display:flex;flex-direction:column;text-align:center;color:#acacac;justify-content:center;width:350px;height:250px}.gd-signature-empty-list .icon{font-size:60px}.gd-signature-empty-list i{font-size:60px;padding:87px 97px 0}.gd-empty-list-text{padding:18px 38px 0;font-size:12px}.gd-digital-input-wrapper{margin:9px 8px 7px;display:flex;border:5px #ddd}.gd-sign-digital{height:27px;background-color:#969696;margin:9px 8px 7px;display:flex;color:#fff;font-size:13px;box-shadow:0 0 3px #ddd;cursor:pointer;padding-top:5px;padding-left:10px}.digital-apply{padding-left:10px}.gd-sign-digital.active{background-color:#25c2d4}.gd-digital-inputs input{width:100%;height:27px;padding-left:28px}.gd-digital-inputs .icon{position:absolute;font-size:12px;margin:7px 0 7px 7px;color:#ccc!important}@media (max-width:1037px){.gd-signature-item .gd-signature-name{font-size:13px}.gd-signature-item .icon{font-size:15px}.gd-signature-thumbnail-hand,.gd-signature-thumbnail-image,.gd-signature-thumbnail-text{margin:0}.gd-signature-thumbnail-image{width:44px;height:44px}.gd-signature-thumbnail-digital .icon{font-size:30px!important}.gd-digital-inputs .icon{font-size:13px}}"]}]}],t.ctorParameters=function(){return[{type:n.NavigateService},{type:M},{type:L},{type:i.DatePipe},{type:j}]},t.propDecorators={signatures:[{type:e.Input}],icon:[{type:e.Input}],signatureType:[{type:e.Input}],isPdf:[{type:e.Input}],loading:[{type:e.Input}],removeSignatureEvent:[{type:e.Output}]},t}(),G=function(){function t(t,i,n){var o=this;this._tabActivatorService=t,this._modalService=i,this._excMessageService=n,this.disabled=!1,this.activeTab=new e.EventEmitter,this.active=!1,this.showToolTip=!1,this._tabActivatorService.activeTabChange.subscribe(function(t){o.activation(t)})}return t.prototype.activation=function(t){this.id===t?(this.active=!this.active,this.active?this.activeTab.emit(this.id):this.activeTab.emit("")):this.active=!1},t.prototype.ngOnInit=function(){},t.prototype.toggleTab=function(){if(this.disabled)return this._modalService.open(n.CommonModals.ErrorMessage),void this._excMessageService.changeMessage("Please open document first");this._tabActivatorService.changeActiveTab(this.id)},t.decorators=[{type:e.Component,args:[{selector:"gd-signature-tab",template:'<div class="gd-tab" (mousedown)="toggleTab()" gdTooltip\n     (showToolTip)="showToolTip = $event" [ngClass]="(active) ? \'active\' : \'\'">\n  <fa-icon *ngIf="icon" [icon]="[\'fas\',icon]" [class]="\'ng-fa-icon icon\'"></fa-icon>\n  <gd-tooltip [text]="tooltip" [show]="showToolTip"\n              *ngIf="tooltip"></gd-tooltip>\n</div>\n',styles:[".gd-tab{font-size:14px;color:#3e4e5a;cursor:pointer;display:flex;align-items:center;justify-content:center;min-width:36px;height:36px;text-align:center;position:relative;white-space:nowrap;padding:0!important;margin:0 10px}.gd-tab.active{background-color:#acacac;color:#fff!important;font-weight:700}.gd-tab ::ng-deep .tooltip{font-size:12px;margin:20px -57px}.gd-tab .title{margin:auto 23px}@media (max-width:1037px){.gd-tab{font-size:20px}}"]}]}],t.ctorParameters=function(){return[{type:U},{type:n.ModalService},{type:n.ExceptionMessageService}]},t.propDecorators={id:[{type:e.Input}],icon:[{type:e.Input}],disabled:[{type:e.Input}],tooltip:[{type:e.Input}],activeTab:[{type:e.Output}]},t}(),W=function(){function t(t,i){var n=this;this._signatureService=t,this._elementRef=i,this.closePanel=new e.EventEmitter,this.subject=new a.Subject,this.subject.pipe(r.debounceTime(500)).subscribe(function(t){n.saveCode(t,!0)})}return t.prototype.saveCode=function(t,e){var i=this;t?this._signatureService.getCode(t,e,this.type).subscribe(function(t){i.encodedImage=t.encodedImage,e||i.closePanel.emit(!0)}):this.clean()},t.prototype.clean=function(){this.encodedImage=null},t.prototype.ngOnInit=function(){var t=this;this.clean(),setTimeout(function(){t._elementRef.nativeElement.querySelector("#text-input").focus()},100)},t.prototype.addSign=function(t){this.saveCode(t,!1)},t.prototype.saveTemp=function(t){this.subject.next(t)},t.prototype.getData=function(){return"data:image/png;base64,"+this.encodedImage},t.decorators=[{type:e.Component,args:[{selector:"gd-new-bar-qr-code",template:'<div class="gd-qr-container">\n  <div class="gd-qr-preview-container">\n    <img class="gd-signature-thumbnail-image" [attr.src]="getData()" alt *ngIf="encodedImage">\n    <div class="gd-empty-code" *ngIf="!encodedImage">\n      <fa-icon [icon]="[\'fa\',icon]" [class]="\'ng-fa-icon icon\'"></fa-icon>\n    </div>\n  </div>\n  <div class="new-signature-input-group">\n    <input type="text" class="gd-qr-property" #text (keyup)="saveTemp(text.value)" (keyup.enter)="addSign(text.value)"\n           placeholder="{{name}}" id="text-input"/>\n    <div class="gd-add-optical" [ngClass]="text.value ? \'active\' : \'inactive\'" (click)="addSign(text.value)">\n      <fa-icon [icon]="[\'fa\',\'plus\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n    </div>\n  </div>\n</div>\n',styles:['.gd-sign-digital.active{background-color:#3787f5}.gd-sign-digital{height:27px;background-color:#969696;margin:9px 8px 7px;text-align:center;color:#fff;font-size:13px;box-shadow:0 0 3px #ddd;cursor:pointer;padding-top:5px}.gd-qr-container{font-family:"Open Sans","Helvetica Neue",Helvetica,Arial,sans-serif;background-color:#e7e7e7}.gd-qr-container input:focus{border:2px solid #00c4d7;transition:border-color .3s linear}.gd-qr-preview-container{text-align:center;background-color:#fff;margin-bottom:1px;height:350px}.gd-qr-preview-container .gd-empty-code{color:#ccc;font-size:60px;width:350px;height:350px;justify-content:center;display:flex;align-items:center}.gd-qr-preview-container .gd-signature-thumbnail-image{min-width:41px;width:100%;height:100%;margin:0}.new-signature-input-group{display:flex;flex-direction:row;align-items:center;height:70px;background-color:#fff;justify-content:center}.gd-qr-property{font-size:12px;width:80%;border:2px solid #ddd;padding:5px;outline:0;color:#3a4e5b}.gd-add-optical{width:32px;height:29px;display:flex;justify-content:center;align-items:center;background-color:#3787f5;cursor:pointer}.gd-add-optical .icon{color:#fff;line-height:28px}.gd-add-optical.active{background-color:#25c2d4}.gd-add-optical.inactive{background-color:#646464}.gd-add-optical:hover{box-shadow:transparent 0 0 3px}@media (max-width:1037px){.gd-qr-container{margin:0 13px 0 12px}}']}]}],t.ctorParameters=function(){return[{type:m},{type:e.ElementRef}]},t.propDecorators={type:[{type:e.Input}],icon:[{type:e.Input}],name:[{type:e.Input}],closePanel:[{type:e.Output}]},t}(),Q=function(){function t(t){this._signatureService=t,this.closePanel=new e.EventEmitter}return t.prototype.ngOnInit=function(){},t.prototype.handleFileInput=function(t){this.addFiles(t)},t.prototype.addFiles=function(t){var e=this,i=new w(t,this.signatureType);this._signatureService.uploadSignature(i,this.rewrite).subscribe(function(){e.closePanel.emit(!0)})},t.prototype.uploadFiles=function(t){this.addFiles(t)},t.decorators=[{type:e.Component,args:[{selector:"gd-upload-signature",template:'<div class="gd-upload-signature" gdDndSignature (files)="uploadFiles($event)">\n  <div class="gd-upload-inputs">\n    <input type="file" (change)="handleFileInput($event.target.files)"/>\n    <fa-icon [icon]="[\'fas\',\'folder-open\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n    <div class="gd-upload-title">\n      <p class="text">Click\n        <fa-icon [icon]="[\'fas\',\'folder-open\']"></fa-icon>\n        to open file\n      </p>\n      <p class="text">Or drop file here</p>\n    </div>\n  </div>\n</div>\n',styles:[".gd-upload-inputs{height:350px;text-align:center;display:flex;flex-direction:column;justify-content:center;align-content:center;background-color:#fff}.gd-upload-inputs .icon{font-size:52px;color:#959da5}.gd-upload-inputs input{opacity:0;position:absolute;cursor:pointer;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:203px}.gd-upload-title{color:#bababa;font-size:13px;margin:10px 0 0}.text{font-size:12px;text-align:center}@media (max-width:1037px){.gd-upload-inputs{width:-webkit-fill-available}.gd-upload-inputs input{width:-webkit-fill-available;height:201px}}"]}]}],t.ctorParameters=function(){return[{type:m}]},t.propDecorators={signatureType:[{type:e.Input}],rewrite:[{type:e.Input}],closePanel:[{type:e.Output}]},t}(),X=function(t){function i(i){var n=t.call(this,i)||this;return n.files=new e.EventEmitter,n}return f(i,t),i.prototype.onDrop=function(t){t.preventDefault(),t.stopPropagation();var e=t.dataTransfer.files;e.length>0&&(this.active=!1,this.files.emit(e))},i.decorators=[{type:e.Directive,args:[{selector:"[gdDndSignature]"}]}],i.ctorParameters=function(){return[{type:n.UploadFilesService}]},i.propDecorators={files:[{type:e.Output}],onDrop:[{type:e.HostListener,args:["drop",["$event"]]}]},i}(n.DndDirective),Y=function(){function t(t){var i=this;this._windowService=t,this.formatting=n.Formatting.default(),this.lock=!1,this.translation=0,this.changeFormatting=new e.EventEmitter,this.removeSign=new e.EventEmitter,this.copySign=new e.EventEmitter,this.lockOut=new e.EventEmitter,this.isMobile=t.isMobile(),t.onResize.subscribe(function(e){i.isMobile=t.isMobile()})}return t.prototype.ngOnInit=function(){},t.prototype.saveChanges=function(){this.changeFormatting.emit(this.formatting)},t.prototype.selectFontSize=function(t){this.formatting.fontSize=t,this.saveChanges()},t.prototype.selectFont=function(t){this.formatting.font=t,this.saveChanges()},t.prototype.selectColor=function(t){this.formatting.color=t,this.saveChanges()},t.prototype.toggleBold=function(t){this.formatting.bold=t,this.saveChanges()},t.prototype.toggleItalic=function(t){this.formatting.italic=t,this.saveChanges()},t.prototype.toggleUnderline=function(t){this.formatting.underline=t,this.saveChanges()},t.prototype.deleteSign=function(){this.removeSign.emit(!0)},t.prototype.toggleLock=function(){this.lock=!this.lock,this.lockOut.emit(this.lock)},t.prototype.onCopySign=function(){this.copySign.emit(!0)},t.decorators=[{type:e.Component,args:[{selector:"gd-context-menu",template:'<div class="gd-context-menu" [ngStyle]="isMobile ? null : {transform: \'translateX(\' + translation + \'px)\'}"\n     [ngClass]="topPosition > 10 ? \'gd-context-menu-top\' : \'gd-context-menu-bottom\'">\n  <gd-button [icon]="\'arrows-alt\'" [class]="\'ng-fa-icon icon arrows\'" [iconSize]="\'sm\'"></gd-button>\n  <gd-text-menu *ngIf="textMenu" [blur]="isMobile" [color]="formatting.color" [bold]="formatting.bold"\n                [font]="formatting.font" [fontSize]="formatting.fontSize" [italic]="formatting.italic"\n                [underline]="formatting.underline" (outBold)="toggleBold($event)"\n                (outUnderline)="toggleUnderline($event)" (outItalic)="toggleItalic($event)"\n                (outColor)="selectColor($event)" (outFont)="selectFont($event)"\n                (outFontSize)="selectFontSize($event)"></gd-text-menu>\n  <gd-button [icon]="lock ? \'lock\' : \'unlock\'" [class]="\'ng-fa-icon icon\'" (click)="toggleLock()"></gd-button>\n  <gd-button [icon]="\'copy\'" [class]="\'ng-fa-icon icon\'" (click)="onCopySign()"></gd-button>\n  <gd-button [icon]="\'trash\'" [class]="\'ng-fa-icon icon\'" [iconSize]="\'sm\'" (click)="deleteSign()"></gd-button>\n</div>\n',styles:[".gd-context-menu-top{top:-44px}.gd-context-menu-bottom{bottom:-40px}.gd-context-menu{box-shadow:rgba(0,0,0,.52) 0 0 5px;background-color:#fff;position:absolute;left:0;right:0;margin:auto;cursor:default;width:max-content;width:-moz-max-content;width:-webkit-max-content;display:flex;flex-direction:row;z-index:999}.gd-context-menu .arrows{cursor:move}.gd-context-menu ::ng-deep .active{background-color:#e7e7e7}.gd-context-menu ::ng-deep .icon-button{margin:0!important}@media (max-width:1037px){.gd-context-menu-top{top:-34px}}"]}]}],t.ctorParameters=function(){return[{type:n.WindowService}]},t.propDecorators={formatting:[{type:e.Input}],textMenu:[{type:e.Input}],topPosition:[{type:e.Input}],lock:[{type:e.Input}],translation:[{type:e.Input}],changeFormatting:[{type:e.Output}],removeSign:[{type:e.Output}],copySign:[{type:e.Output}],lockOut:[{type:e.Output}]},t}(),J=function(){function t(t){var e=this;this._windowService=t,this._isDragged=!1,this.isDesktop=t.isDesktop(),t.onResize.subscribe(function(i){e.isDesktop=t.isDesktop()})}return t.prototype.ngOnInit=function(){this._ctx=this.canvas.nativeElement.getContext("2d")},t.prototype.onMouseDown=function(t){var e;if(this.isDesktop)e={x:t.offsetX,y:t.offsetY};else{var i=window.event;e={x:i.offsetX,y:i.offsetY}}t.preventDefault(),this._isDragged=!0,this._ctx.beginPath(),this._ctx.moveTo(e.x,e.y)},t.prototype.onMouseUp=function(t){t.preventDefault(),this._isDragged=!1},t.prototype.onMouseMove=function(t){var e;if(this.isDesktop)e={x:t.offsetX,y:t.offsetY};else{var i=window.event;e={x:i.offsetX,y:i.offsetY}}t.preventDefault(),this._isDragged&&(this._ctx.lineTo(e.x,e.y),this._ctx.stroke())},t.prototype.setColor=function(t){this._ctx&&(this._ctx.strokeStyle=t)},t.prototype.getImage=function(){return this.canvas.nativeElement.toDataURL("image/png")},t.prototype.clear=function(){this.canvas.nativeElement.width=this.canvas.nativeElement.width},t.prototype.ngOnChanges=function(t){this.setColor(this.color)},t.prototype.getWidth=function(){return this.isDesktop?1079:this._windowService.getWidth()},t.prototype.getHeight=function(){return this.isDesktop?540:this._windowService.getHeight()},t.decorators=[{type:e.Component,args:[{selector:"gd-canvas",template:'<div class="bc-paint-container">\n  <div class="bc-paint-canvas-container">\n    <canvas #canvas (mousedown)="onMouseDown($event)" (mousemove)="onMouseMove($event)"\n            (mouseup)="onMouseUp($event)" (mouseleave)="onMouseUp($event)" [width]="getWidth()"\n            [height]="getHeight()" (panstart)="onMouseDown($event)" (panmove)="onMouseMove($event)"\n            (panend)="onMouseUp($event)"></canvas>\n  </div>\n</div>\n',styles:[".bc-paint-canvas-container,.bc-paint-container{width:100%;height:100%}@media (max-width:1037px){.bc-paint-canvas-container>canvas{width:100%;height:100%;border:0}}"]}]}],t.ctorParameters=function(){return[{type:n.WindowService}]},t.propDecorators={color:[{type:e.Input}],canvas:[{type:e.ViewChild,args:["canvas",{static:!0}]}]},t}(),V=function(){function t(){this._observer=new a.Subject,this._activeChange=this._observer.asObservable()}return Object.defineProperty(t.prototype,"activeChange",{get:function(){return this._activeChange},enumerable:!0,configurable:!0}),t.prototype.changeActive=function(t){this._observer.next(t)},t}(),K=function(){function t(){this._observer=new a.Subject,this._removeCanvas=this._observer.asObservable()}return Object.defineProperty(t.prototype,"removeCanvas",{get:function(){return this._removeCanvas},enumerable:!0,configurable:!0}),t.prototype.remove=function(t){this._observer.next(t)},t}(),Z=function(){function t(t,e,i,n){var o=this;this._activeCanvasService=t,this._removeCanvas=e,this._onCloseService=i,this._windowService=n,this.colorPickerBG=!1,this.colorPickerC=!1,this.borderWidth=E.widthOptions(),this._onCloseService.onClose.subscribe(function(t){o.colorPickerC=!1,o.colorPickerBG=!1}),this._activeCanvasService.activeChange.subscribe(function(t){o.active=o.id===t}),this.isMobile=n.isMobile(),n.onResize.subscribe(function(t){o.isMobile=n.isMobile()})}return Object.defineProperty(t.prototype,"ctx",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),t.prototype.activation=function(){this._activeCanvasService.changeActive(this.id)},t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){this._ctx=this.canvas.nativeElement.getContext("2d"),this.redrawCanvas()},t.prototype.redrawCanvas=function(){this.refreshRadius(),this.drawCircle(),this.props.text&&(this.theFirst?(this._ctx.fillStyle=this.props.textColor,this._ctx.font=this.fontDecoration()+" "+this.props.fontSize+"px "+this.props.font,this._ctx.textAlign="center",this._ctx.fillText(this.props.text,this.props.width/2,this.props.height/2+this.props.fontSize/2),this.props.underline&&this.makeTextUnderline()):this.drawTextCircle())},t.prototype.fontDecoration=function(){return(this.props.bold?"bold":"")+" "+(this.props.italic?"italic":"")},t.prototype.makeTextUnderline=function(){var t=this.props.width/2,e=this.props.height/2,i=this._ctx.measureText(this.props.text).width,n=e+this.props.fontSize,o=n,r=this.props.fontSize/15;r<1&&(r=1),this._ctx.beginPath();var a=t-i/2,s=t+i/2;this._ctx.strokeStyle=this.props.textColor,this._ctx.lineWidth=r,this._ctx.moveTo(a,n),this._ctx.lineTo(s,o),this._ctx.strokeStyle="blue",this._ctx.stroke()},t.prototype.drawCircle=function(){var t=""===this.props.backgroundColor?"rgb(255, 255, 255)":this.props.backgroundColor,e=this.props.width/2,i=this.props.height/2;this._ctx.beginPath(),this._ctx.arc(e,i,this.props.radius,0,2*Math.PI),this._ctx.lineWidth=this.props.strokeWidth,this._ctx.strokeStyle=this.props.strokeColor,this._ctx.stroke(),this._ctx.fillStyle=t,this._ctx.fill(),this._ctx.closePath()},t.prototype.drawTextCircle=function(){var t=this.props.width/2,e=this.props.height/2;this._ctx.save(),this._ctx.translate(t,e),this._ctx.rotate(Math.PI/2),this._ctx.fillStyle=this.props.textColor,this._ctx.font=this.fontDecoration()+" "+this.props.fontSize+"px "+this.props.font;for(var i=this.props.textExpansion+this.props.fontSize/100,n=this.props.radius-this.props.fontSize/2,o=0;o<this.props.textRepeat;o++)for(var r=0;r<this.props.text.length;r++)this._ctx.save(),this._ctx.rotate(r*i+i*this.props.text.length*o),this._ctx.fillText(this.props.text[r],0,-n),this._ctx.restore();this._ctx.restore()},t.prototype.refreshRadius=function(){this.props.strokeWidth>1?this.props.radius=this.props.width/2-this.props.strokeWidth/2:this.props.radius=this.props.width/2},t.prototype.toggleColorPicker=function(t,e){t.preventDefault(),t.stopPropagation(),e?this.colorPickerBG=!this.colorPickerBG:this.colorPickerC=!this.colorPickerC},t.prototype.selectColor=function(t,e){t?(this.props.backgroundColor=e,this.colorPickerBG=!1):(this.props.strokeColor=e,this.colorPickerC=!1),this.redrawCanvas()},t.prototype.selectBorderWidth=function(t){this.props.strokeWidth=t.value,this.redrawCanvas()},t.prototype.deleteCanvas=function(){this._removeCanvas.remove(this.id),this.redrawCanvas()},t.prototype.getLeft=function(){return(this.width-this.props.width)/2},t.prototype.getTop=function(){return(this.height-(this.isMobile?62:0)-this.props.height)/2-this.calcDiff()},t.prototype.calcDiff=function(){return this.active&&!this.isMobile?37:0},t.prototype.resize=function(t){this.props.width+=t,this.props.height+=t},t.prototype.closeColorPickerBG=function(t){this.colorPickerBG=!t},t.prototype.closeColorPickerC=function(t){this.colorPickerC=!t},t.prototype.getTranslation=function(){this.refreshRadius();return this.props.radius<74?74-this.props.radius:this.props.radius-74},t.prototype.inactive=function(t){this._activeCanvasService.changeActive(null)},t.decorators=[{type:e.Component,args:[{selector:"gd-stamp-canvas",template:'<div [clickOutsideEnabled]="active" [clickOutsideEvents]="\'mousedown\'"\n     (clickOutside)="inactive($event)">\n  <div class="gd-stamp-box" [style.left.px]="getLeft()" [style.top.px]="getTop()" [style.z-index]="props.zIndex">\n    <div class="gd-context-menu" *ngIf="active" [ngStyle]="isMobile ? null : {transform: \'translateX(\' + getTranslation() + \'px)\'}">\n      <gd-button name="button" class="first-element" [icon]="\'fill-drip\'" [tooltip]="\'Color\'" (click)="toggleColorPicker($event, true)">\n        <div class="bg-color-pic" [style.background-color]="props.backgroundColor"></div>\n      </gd-button>\n      <gd-color-picker [isOpen]="colorPickerBG" (closeOutside)="closeColorPickerBG($event)"\n                       [className]="\'palette\'"\n                       (selectedColor)="selectColor(true, $event)"></gd-color-picker>\n      <gd-select class="csg-border-width" [options]="borderWidth" (selected)="selectBorderWidth($event)"\n                 [showSelected]="{name: props.strokeWidth + \'px\', value: props.strokeWidth}"></gd-select>\n      <gd-button name="button" [icon]="\'square\'" [iconRegular]="true" [tooltip]="\'Color\'"\n                 (click)="toggleColorPicker($event, false)" class="color-for-shape">\n        <div class="bg-color-pic" [style.background-color]="props.strokeColor"></div>\n      </gd-button>\n      <gd-color-picker [isOpen]="colorPickerC" (closeOutside)="closeColorPickerC($event)"\n                       [className]="\'palette\'"\n                       (selectedColor)="selectColor(false, $event)"></gd-color-picker>\n      <gd-button name="button" class="stamp-trash" [icon]="\'trash\'" [tooltip]="\'Delete\'" [iconSize]="\'sm\'" (click)="deleteCanvas()">\n      </gd-button>\n    </div>\n    <div class="csg-bounding-box" [ngClass]="active ? \'active\' : \'\'" [style.width.px]="props.width"\n         [style.height.px]="props.height">\n      <canvas #canvas (click)="activation()" class="csg-preview" [width]="props.width" [height]="props.height"></canvas>\n      <gd-resizing [init]="false" [id]="999" (offsetX)="resize($event)" [se]="true"\n                   (release)="redrawCanvas()" *ngIf="active"></gd-resizing>\n    </div>\n  </div>\n</div>\n',styles:[".gd-context-menu{display:flex;height:37px;top:-40px;padding:0;background-color:#fff;cursor:default;flex-direction:row;box-shadow:rgba(0,0,0,.52) 0 0 5px}.gd-context-menu .icon{font-size:14px;cursor:pointer;color:#3e4e5a!important}.gd-context-menu ::ng-deep .dropdown-menu{top:-120px!important;height:120px;overflow-y:auto}.gd-context-menu ::ng-deep .icon-button{margin:0!important}.gd-stamp-box{position:absolute}.palette{position:absolute;top:-190px}.csg-preview{width:100%;height:100%}.csg-bounding-box{position:absolute;background-color:unset!important}.csg-bounding-box.active{border:1px solid #679ffa}.csg-border-width{width:37px!important;height:37px!important;display:flex;justify-content:center;align-items:center}.bg-color-pic{border-radius:100%;border:1px solid #ccc;position:absolute;height:8px;width:8px;right:6px;bottom:6px}::ng-deep .select{min-width:unset!important}::ng-deep .selected-value{font-size:12px!important}@media (max-width:1037px){.gd-context-menu{position:fixed;bottom:0;left:0;top:unset;right:0;width:100%;height:60px;align-items:center;padding:0;margin:0;background-color:#fff;border-top:2px solid #707070}.gd-context-menu .color-for-shape{flex:1;display:flex;align-items:center;justify-content:flex-start}.gd-context-menu .stamp-trash{flex:0 0 37px;margin-right:8px}.gd-context-menu ::ng-deep .button{margin:3px!important}.gd-context-menu ::ng-deep .select{margin:3px!important}.gd-context-menu .first-element{margin-left:8px}.csg-border-width .select{width:21px}}"]}]}],t.ctorParameters=function(){return[{type:V},{type:K},{type:n.OnCloseService},{type:n.WindowService}]},t.propDecorators={id:[{type:e.Input}],theFirst:[{type:e.Input}],active:[{type:e.Input}],props:[{type:e.Input}],width:[{type:e.Input}],height:[{type:e.Input}],canvas:[{type:e.ViewChild,args:["canvas",{static:!0}]}]},t}(),tt=s,et=function(){function t(t){var i=this;this._onCloseService=t,this.decoration=!0,this.outFontSize=new e.EventEmitter,this.outFont=new e.EventEmitter,this.outBold=new e.EventEmitter,this.outItalic=new e.EventEmitter,this.outUnderline=new e.EventEmitter,this.outColor=new e.EventEmitter,this.fontSizeOptions=n.FormattingService.getFontSizeOptions(),this.fontOptions=n.FormattingService.getFontOptions(),this.colorPickerShow=!1,t.onClose.subscribe(function(){i.colorPickerShow=!1})}return t.prototype.ngOnInit=function(){},t.prototype.selectFontSize=function(t){tt(".gd-wrapper").off("keyup"),this.outFontSize.emit(t.value),tt(".gd-wrapper").on("keyup",function(){for(var e=document.getElementsByTagName("font"),i=0,n=e.length;i<n;++i)"7"===e[i].getAttribute("size")&&(e[i].removeAttribute("size"),e[i].style.fontSize=t+"px")})},t.prototype.selectFont=function(t){event.preventDefault(),event.stopPropagation(),this.outFont.emit(t.value)},t.prototype.toggleColorPicker=function(t){t.preventDefault(),t.stopPropagation(),this.colorPickerShow=!this.colorPickerShow},t.prototype.selectColor=function(t){this.colorPickerShow=!1,this.outColor.emit(t)},t.prototype.toggleBold=function(t){t.preventDefault(),t.stopPropagation(),this.outBold.emit(!this.bold)},t.prototype.toggleItalic=function(t){t.preventDefault(),t.stopPropagation(),this.outItalic.emit(!this.italic)},t.prototype.toggleUnderline=function(t){t.preventDefault(),t.stopPropagation(),this.outUnderline.emit(!this.underline)},t.prototype.closePicker=function(t){this.colorPickerShow=!t},t.decorators=[{type:e.Component,args:[{selector:"gd-text-menu",template:'<div class="gd-text-menu">\n  <gd-select class="format-select first-component" [options]="fontOptions"\n             (selected)="selectFont($event)"\n             [showSelected]="{name : font, value : font}"></gd-select>\n  <gd-select class="format-select" [options]="fontSizeOptions"\n             (selected)="selectFontSize($event)"\n             [showSelected]="{name : fontSize + \'px\', value : fontSize}"></gd-select>\n  <gd-button [icon]="\'bold\'" [tooltip]="\'Bold\'" *ngIf="decoration"\n             (click)="toggleBold($event)" [toggle]="bold"></gd-button>\n  <gd-button [icon]="\'italic\'" [tooltip]="\'Italic\'" *ngIf="decoration"\n             (click)="toggleItalic($event)" [toggle]="italic"></gd-button>\n  <gd-button [icon]="\'underline\'" [tooltip]="\'Underline\'" *ngIf="decoration"\n             (click)="toggleUnderline($event)" [toggle]="underline"></gd-button>\n  <gd-button name="button" class="color-for-text" [icon]="\'font\'" [tooltip]="\'Color\'" (click)="toggleColorPicker($event)">\n    <div class="bg-color-pic" [style.background-color]="color"></div>\n  </gd-button>\n  <gd-color-picker [isOpen]="colorPickerShow" (closeOutside)="closePicker($event)"\n                   [className]="\'palette\'"\n                   (selectedColor)="selectColor($event)"></gd-color-picker>\n  <ng-content></ng-content>\n</div>\n',styles:["::ng-deep .active{background-color:#e7e7e7}.gd-text-menu{display:flex;flex-direction:row}.gd-text-menu .format-select{height:37px;display:flex;justify-content:center;align-items:center;max-width:80px;margin:0 3px}.gd-text-menu .first-component{margin-left:8px}.gd-text-menu ::ng-deep .dropdown-menu{top:40px!important;height:120px;overflow-y:auto}.gd-text-menu ::ng-deep .icon-button{margin:0!important}.bg-color-pic{border-radius:100%;border:1px solid #ccc;position:absolute;height:8px;width:8px;right:6px;bottom:6px}.palette{position:relative;top:40px;left:-55px;z-index:100}@media (max-width:1037px){.gd-text-menu{position:fixed;bottom:0;left:0;right:0;width:100%;height:60px;align-items:center;padding:0;margin:0;background-color:#fff;border-top:2px solid #707070}.gd-text-menu ::ng-deep .selected-value{white-space:normal!important;word-wrap:break-word}.gd-text-menu .icon{color:#fff;margin:0 9px}.gd-text-menu ::ng-deep .bcPicker-palette{left:-200px;top:-200px}.gd-text-menu .palette{top:unset;bottom:40px;left:unset;right:5px}.gd-text-menu ::ng-deep .dropdown-menu{bottom:40px;top:unset!important}.gd-text-menu ::ng-deep .button{margin:3px!important}}"]}]}],t.ctorParameters=function(){return[{type:n.OnCloseService}]},t.propDecorators={blur:[{type:e.Input}],fontSize:[{type:e.Input}],font:[{type:e.Input}],bold:[{type:e.Input}],italic:[{type:e.Input}],underline:[{type:e.Input}],color:[{type:e.Input}],decoration:[{type:e.Input}],outFontSize:[{type:e.Output}],outFont:[{type:e.Output}],outBold:[{type:e.Output}],outItalic:[{type:e.Output}],outUnderline:[{type:e.Output}],outColor:[{type:e.Output}]},t}(),it=function(){function t(t){this._signatureService=t,this.newSignatureEvent=new e.EventEmitter,this.showNewCode=!1,this.showUpload=!1,this.loading=!1}return t.prototype.getSignatures=function(t){var e=this;this.loading||(this.loading=!0,this._signatureService.getSignatures("",t).subscribe(function(t){e.signatures=t||[],e.loading=!1}))},t.prototype.ngOnInit=function(){this.init()},t.prototype.init=function(){this.signatures=[],this.getSignatures(this.id),this.showNewCode=!1,this.showUpload=!1},t.prototype.getTitleIcon=function(){return this.showUpload||this.showNewCode?"times":"plus"},t.prototype.getTitle=function(){if(!this.id)return"";var t=b.getSignatureType(this.id);return this.showUpload||this.showNewCode?t.title:t.name},t.prototype.getName=function(){return this.id?b.getSignatureType(this.id).name:""},t.prototype.removeSignature=function(t,e){var i=this;this._signatureService.removeSignatures(t,e).subscribe(function(){return i.getSignatures(e)})},t.prototype.closeUploadPanel=function(t){this.showUpload=!t,this.getSignatures(this.id)},t.prototype.closeCodePanel=function(t){this.showNewCode=!t,this.getSignatures(this.id)},t.prototype.getCodeName=function(){return this.id?b.QR_CODE.id===this.id?"Qr Code":b.BAR_CODE.id===this.id?"Bar Code":"":""},t.prototype.icon=function(){return this.id?b.getSignatureType(this.id).icon:""},t.prototype.ngOnChanges=function(t){this.init()},t.prototype.closeNewSignature=function(){b.DIGITAL.id===this.id||b.IMAGE.id===this.id?this.showUpload=!1:b.BAR_CODE.id!==this.id&&b.QR_CODE.id!==this.id||(this.showNewCode=!1)},t.prototype.openNewSignature=function(){this.showUpload||this.showNewCode||(b.DIGITAL.id===this.id||b.IMAGE.id===this.id?this.showUpload=!0:b.BAR_CODE.id===this.id||b.QR_CODE.id===this.id?this.showNewCode=!0:this.newSignatureEvent.emit(this.id))},t.decorators=[{type:e.Component,args:[{selector:"gd-signature-left-panel",template:'<gd-left-side-bar [showSpinner]="loading">\n  <div class="tab-content">\n    <div class="gd-signature-context-panel">\n      <div class="gd-signature-context-pane-wrapper">\n        <div class="signature-title-block"> \x3c!--for safari--\x3e\n          <div class="gd-signature-list-title" *ngIf="showNewCode || showUpload">\n            <div class="gd-signature-context-panel-title">{{getTitle()}}</div>\n            <div class="gd-signature-title-icon">\n              <fa-icon [icon]="[\'fa\',\'times\']" [class]="\'ng-fa-icon icon\'" (click)="closeNewSignature()"></fa-icon>\n            </div>\n          </div>\n        </div>\n        <gd-upload-signature (closePanel)="closeUploadPanel($event)" [rewrite]="rewrite" [signatureType]="id"\n                             *ngIf="showUpload"></gd-upload-signature>\n        <gd-new-bar-qr-code (closePanel)="closeCodePanel($event)" [type]="id" [icon]="icon()" [name]="getCodeName()"\n                            *ngIf="showNewCode"></gd-new-bar-qr-code>\n        <div class="signature-title-block"> \x3c!--for safari--\x3e\n          <div class="gd-signature-list-title">\n            <div class="gd-signature-context-panel-title">{{getName()}}</div>\n            <div class="gd-signature-title-icon">\n              <fa-icon [icon]="[\'fa\',\'plus\']" [class]="\'ng-fa-icon icon\'"\n                       [ngClass]="showNewCode || showUpload ? \'disabled\' : \'\'"\n                       (click)="openNewSignature()"></fa-icon>\n            </div>\n          </div>\n        </div>\n        <gd-signature-list-panel class="gd-signatures-scroll" [icon]="icon()" [signatureType]="id"\n                                 [signatures]="signatures"\n                                 (removeSignatureEvent)="removeSignature($event, id)"\n                                 [isPdf]="isPdf" [loading]="loading"></gd-signature-list-panel>\n      </div>\n    </div>\n  </div>\n</gd-left-side-bar>\n',styles:["::ng-deep .left-panel{width:350px;height:calc(100% - 90px)}::ng-deep .gd-left-bar-fade{width:350px!important}.gd-signatures-scroll{height:calc(100% - 60px)}.tab-content{height:calc(100% - 90px);line-height:unset;position:absolute;background-color:#fff}.gd-signature-context-panel{background-color:#f3f3f3;width:350px;height:100%;position:absolute}.gd-signature-context-panel-title,.gd-signature-context-upload-title{color:#aaa;font-size:12px;font-family:Helvetica;font-weight:700;margin:5px 12px}.signature-title-block{display:block}.gd-signature-list-title{display:flex;flex-direction:row;height:70px}.gd-signature-list-title .gd-signature-title-icon{flex:0 0 70px;display:flex;align-items:center;justify-content:center}.gd-signature-list-title .gd-signature-title-icon .icon{color:#707070;cursor:pointer;font-size:12px}.gd-signature-list-title .gd-signature-title-icon .icon.disabled{color:#959da5}.gd-signature-list-title .gd-signature-context-panel-title{flex:1;display:flex;align-items:center;justify-content:flex-start}.gd-signature-context-pane-wrapper{display:flex;flex-direction:column;height:inherit;overflow:auto}@media (max-width:1037px){.tab-content{width:100%;height:calc(100% - 120px)!important}::ng-deep .left-panel{width:100%!important;overflow:auto!important;height:calc(100% - 120px)}.gd-signature-context-panel{left:0;right:0;width:auto}.gd-signature-context-panel-title{font-size:12px;line-height:18px;margin:16px 0 14px 12px}.gd-signature-context-panel-title,.gd-signature-context-upload-title{width:unset}}"]}]}],t.ctorParameters=function(){return[{type:m}]},t.propDecorators={rewrite:[{type:e.Input}],isPdf:[{type:e.Input}],id:[{type:e.Input}],newSignatureEvent:[{type:e.Output}]},t}(),nt=function(){function t(t,e,i){this._signatureService=t,this._tabActivationService=e,this._modalService=i,this.defaultColor="#000000",this.selectedColor=this.defaultColor,this.colorPickerShow=!1}return t.prototype.ngOnInit=function(){},t.prototype.selectColor=function(t){this.selectedColor=t,this.colorPickerShow=!1},t.prototype.saveSign=function(t){var e=this,i=t.getImage();this._signatureService.saveImage(i).subscribe(function(){e._tabActivationService.changeActiveTab(b.HAND.id)}),this.clear(t),this.close()},t.prototype.close=function(){this._modalService.close(n.CommonModals.DrawHandSignature)},t.prototype.toggleColorPicker=function(t){t.preventDefault(),t.stopPropagation(),this.colorPickerShow=!this.colorPickerShow},t.prototype.closePicker=function(t){this.colorPickerShow=!t},t.prototype.onCloseOpen=function(t,e){this.clear(t)},t.prototype.clear=function(t){this.selectedColor=this.defaultColor,t.clear()},t.decorators=[{type:e.Component,args:[{selector:"gd-hand-modal",template:'<gd-modal [id]="\'gd-draw-hand-signature\'" [title]="\'Draw signature\'" (visible)="onCloseOpen(canvasComponent, $event)">\n  <div class="paint-body">\n    <div class="bc-paint-header">\n      <div class="bc-paint-palette">\n        <gd-button name="button" [icon]="\'fill\'" [tooltip]="\'Pencil color\'"\n                   (click)="toggleColorPicker($event)">\n          <div class="bg-color-pic" [style.background-color]="selectedColor"></div>\n        </gd-button>\n        <gd-color-picker [isOpen]="colorPickerShow" (closeOutside)="closePicker($event)"\n                         [className]="\'palette\'"\n                         (selectedColor)="selectColor($event)"></gd-color-picker>\n      </div>\n      <div class="bc-paint-export" (click)="saveSign(canvasComponent)">\n        <fa-icon [icon]="[\'fa\',\'save\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n        <span class="save-button">Save</span>\n      </div>\n    </div>\n    <div class="gd-draw-image">\n      <gd-canvas #canvasComponent [color]="selectedColor"></gd-canvas>\n    </div>\n  </div>\n</gd-modal>\n',styles:[".paint-body{width:1036px;height:561px}.paint-body ::ng-deep .button{font-size:unset!important;color:#3e4e5a!important}.paint-body ::ng-deep .button ::ng-deep .text{padding-left:0!important}.gd-draw-image{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAhCAYAAAC4JqlRAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA4UlEQVR4nO2WbQuDMAyE+///q0WhKiiacYFK7BeXK2OMJXC2SF8er2kwiTPO81St6yo5ZxmGQdsnYZwdi/6yLJICIAACIAAC4KcA6uYMgN34BmAX9QgA9atYuQGO47j6mMw4YDXPsyQ8PCqlaAsAuNAjdYC1DyDeY7MOQuoAY10L0CboO0KoAywA6NsFn26QBaUB6hFYAO8VrhEAAfC/APQ1tJXQC9CCXABsKQZAW1qpStgDwG7+kVL8dQBPAnYDQN4cwFgrvFOAfd/Fq23b9IdiHEeZpokWAF41ugKO5u7gN6EQAAAFZL5NAAAAAElFTkSuQmCC)!important;position:absolute;padding:0!important;background-color:#fff;overflow:hidden;overflow-y:auto;width:inherit}.bc-paint-header{height:60px;width:100%;display:flex;justify-content:space-between;align-items:center}.bg-color-pic{border-radius:100%;border:1px solid #ccc;position:absolute;height:8px;width:8px;right:6px;bottom:6px}::ng-deep .bcPicker-palette{position:absolute}.bc-paint-export{background-color:#25c2d4;margin-right:10px;width:68px;height:37px;display:flex;justify-content:space-between;color:#fff;align-items:center;cursor:pointer}.bc-paint-export .icon{display:flex;text-align:center;justify-content:center;flex:0 0 27px}.bc-paint-export .save-button{font-size:10px;display:flex;text-align:center;justify-content:center;flex:0 0 40px}@media (max-width:1037px){.paint-body{width:inherit;height:inherit}}"]}]}],t.ctorParameters=function(){return[{type:m},{type:U},{type:n.ModalService}]},t}(),ot=s,rt=function(){function t(t,e,i,o,r,a,s){var p=this;this._addDynamicComponentService=t,this._activeCanvasService=e,this._windowService=i,this._removeCanvas=o,this._signatureService=r,this._tabActivationService=a,this._modalService=s,this.stampCircles=new Map,this.textString="",this.showText=!1,this.sizeMagnifier=40,this.textProps=n.Formatting.default(),this._removeCanvas.removeCanvas.subscribe(function(t){p.stampCircles.get(t).destroy(),p.stampCircles.delete(t)}),this.isMobile=i.isMobile(),i.onResize.subscribe(function(t){p.isMobile=i.isMobile()}),this._activeCanvasService.activeChange.subscribe(function(t){p.activeId=t})}return t.prototype.ngOnInit=function(){},t.prototype.saveSign=function(){var t=this,e=this.stampCircles.get(this.stampCircles.size).instance,i=e.props,n=e.ctx,o=[];o.push(i);for(var r=this.stampCircles.size-1;r>0;r--){var a=this.stampCircles.get(r).instance,s=a.canvas.nativeElement,p=i.width-a.props.width;0!==p&&(p/=2),n.drawImage(s,p,p),o.push(a.props)}o.reverse();var c=e.canvas.nativeElement.toDataURL("image/png");this._signatureService.saveStamp(c,o).subscribe(function(){t._tabActivationService.changeActiveTab(b.STAMP.id)}),this.close()},t.prototype.close=function(){this._modalService.close(n.CommonModals.DrawStampSignature)},t.prototype.onCloseOpen=function(t){if(t){this.textString="";var e=(new O).init(this.isMobile);e.id=this.stampCircles.size+1,this.addCircle(e,!0)}else this.clear()},t.prototype.clear=function(){var t,e;try{for(var i=v(this.stampCircles.values()),n=i.next();!n.done;n=i.next()){n.value.destroy()}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this.stampCircles=new Map,this.showText=!1},t.prototype.addCircle=function(t,e){if(this.dynamicDirective){var i=this.dynamicDirective.viewContainerRef,n=this._addDynamicComponentService.addDynamicComponent(i,Z);n.instance.id=t.id,n.instance.theFirst=e,n.instance.active=!0,n.instance.props=t,n.instance.width=this.getWidth(),n.instance.height=this.getHeight(),this.stampCircles.set(t.id,n),this._activeCanvasService.changeActive(t.id)}},t.prototype.addCanvas=function(){var t=new O;t.init(this.isMobile),t.id=this.stampCircles.size+1;var e=this.stampCircles.get(this.stampCircles.size);if(e){var i=e.instance.props;t.width=i.width+this.sizeMagnifier,t.height=i.height+this.sizeMagnifier,t.zIndex=i.zIndex-1}this.addCircle(t,!1),this.showText=!1},t.prototype.ngOnDestroy=function(){this.clear()},t.prototype.addText=function(t){this.textString=t;var e=this.stampCircles.get(1);this.textString&&e&&(e.instance.props.text=t,e.instance.redrawCanvas(),this.showText=!1)},t.prototype.toggleText=function(){this.showText=!this.showText,this.showText&&this._activeCanvasService.changeActive(null),this.showText&&setTimeout(function(){var t=ot("#text-input");t&&t.focus()},100)},t.prototype.toggleUnderline=function(t){this.textProps.underline=t;var e=this.stampCircles.get(1);e&&(e.instance.props.underline=t,e.instance.redrawCanvas())},t.prototype.toggleBold=function(t){this.textProps.bold=t;var e=this.stampCircles.get(1);e&&(e.instance.props.bold=t,e.instance.redrawCanvas())},t.prototype.toggleItalic=function(t){this.textProps.italic=t;var e=this.stampCircles.get(1);e&&(e.instance.props.italic=t,e.instance.redrawCanvas())},t.prototype.selectTextColor=function(t){this.textProps.color=t;var e=this.stampCircles.get(1);e&&(e.instance.props.textColor=t,e.instance.redrawCanvas())},t.prototype.selectFont=function(t){this.textProps.font=t;var e=this.stampCircles.get(1);e&&(e.instance.props.font=t,e.instance.redrawCanvas())},t.prototype.selectFontSize=function(t){this.textProps.fontSize=t;var e=this.stampCircles.get(1);e&&(e.instance.props.fontSize=t,e.instance.redrawCanvas())},t.prototype.getWidth=function(){return this.isMobile?this._windowService.getWidth():1036},t.prototype.getHeight=function(){return this.isMobile?this._windowService.getHeight():501},t.prototype.deleteText=function(){var t=this.stampCircles.get(1);t&&(t.instance.props.text="",t.instance.redrawCanvas(),this.showText=!1)},t.prototype.leaveText=function(t){this.showText=!1},t.prototype.getTextWidth=function(){var t=this.stampCircles.get(1);return t?2*t.instance.props.radius:100},t.decorators=[{type:e.Component,args:[{selector:"gd-stamp-modal",template:'<gd-modal [id]="\'gd-draw-stamp-signature\'" [title]="\'Compose stamp\'" (visible)="onCloseOpen($event)">\n  <div class="stamp-body">\n    <div class="stamp-header">\n      <div class="header-buttons">\n        <gd-button [icon]="\'circle\'" (click)="addCanvas()" [iconRegular]="true">\n          <fa-icon class="plus" [icon]="[\'fas\',\'plus\']"></fa-icon>\n        </gd-button>\n        <gd-button [icon]="\'font\'" (click)="toggleText()">\n          <fa-icon class="plus" [icon]="[\'fas\',\'plus\']"></fa-icon>\n        </gd-button>\n      </div>\n      <div class="stamp-export" (click)="saveSign()">\n        <fa-icon [icon]="[\'fa\',\'save\']" [class]="\'ng-fa-icon icon\'"></fa-icon>\n        <span class="save-button">Save</span>\n      </div>\n    </div>\n    <div class="gd-draw-stamp" [style.width.px]="getWidth()" [style.height.px]="getHeight()">\n      <div gdHostDynamic [ident]="999999"></div>\n      <div class="gd-draw-stamp-text" *ngIf="showText" [clickOutsideEnabled]="showText"\n           [clickOutsideEvents]="\'mousedown\'" (clickOutside)="text.value ? addText(text.value) : leaveText($event)">\n        <div class="gd-text-menu-context">\n          <gd-text-menu [blur]="true" [color]="textProps.color" [bold]="textProps.bold"\n                        [font]="textProps.font" [fontSize]="textProps.fontSize" [italic]="textProps.italic"\n                        [underline]="textProps.underline" (outBold)="toggleBold($event)"\n                        (outUnderline)="toggleUnderline($event)" (outItalic)="toggleItalic($event)"\n                        (outColor)="selectTextColor($event)" (outFont)="selectFont($event)"\n                        (outFontSize)="selectFontSize($event)" [decoration]="false">\n            <gd-button [icon]="\'trash\'" [class]="\'ng-fa-icon icon\'" [iconSize]="\'sm\'"\n                       (click)="deleteText()"></gd-button>\n          </gd-text-menu>\n        </div>\n        <input placeholder="Type your text" id="text-input"\n               #text (keyup.enter)="addText(text.value)"\n               [style.text-decoration]="textProps?.underline ? \'underline\' : \'unset\'"\n               [style.font-style]="textProps?.italic ? \'italic\' : \'unset\'"\n               [style.font-weight]="textProps?.bold ? \'bold\' : \'unset\'"\n               [style.color]="textProps?.color"\n               [style.font-family]="textProps.font"\n               [style.font-size.px]="textProps.fontSize"\n               [value]="textString" type="text"\n               [style.width.px]="getTextWidth()">\n      </div>\n    </div>\n  </div>\n</gd-modal>\n',styles:['.stamp-body{width:1036px;height:561px}.stamp-body ::ng-deep .button{font-size:unset!important;color:#3e4e5a!important}.stamp-body ::ng-deep .button ::ng-deep .text{padding-left:0!important}.stamp-body .csg-text-input{padding:5px;background-color:#e6e6e6;position:absolute;top:120px;left:0;width:calc(100% - 10px);flex-direction:row;display:flex;z-index:99999}.stamp-body .csg-text-input::after{content:" ";width:0;height:0;border-style:solid;border-width:0 4px 5px;border-color:transparent transparent #e6e6e6;position:absolute;top:-5px;right:110px}.stamp-body .csg-text-input input{height:20px;width:100%;padding:0;margin:0 10px 0 0}.stamp-body .csg-insert-text{width:27px;height:27px;background-color:#3787f5;margin:0}.stamp-body .csg-insert-text .icon{padding:5px;color:#fff}.stamp-header{height:60px;width:100%;display:flex;justify-content:space-between;align-items:center}.header-buttons{display:flex}.header-buttons .plus{font-size:8px;position:absolute;height:5px;width:5px;right:10px;bottom:10px}.stamp-export{background-color:#25c2d4;margin-right:10px;width:68px;height:37px;display:flex;justify-content:space-between;color:#fff;align-items:center;cursor:pointer}.stamp-export .icon{display:flex;text-align:center;justify-content:center;flex:0 0 27px}.stamp-export .save-button{font-size:10px;display:flex;text-align:center;justify-content:center;flex:0 0 40px}.gd-draw-stamp{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAhCAYAAAC4JqlRAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAA4UlEQVR4nO2WbQuDMAyE+///q0WhKiiacYFK7BeXK2OMJXC2SF8er2kwiTPO81St6yo5ZxmGQdsnYZwdi/6yLJICIAACIAAC4KcA6uYMgN34BmAX9QgA9atYuQGO47j6mMw4YDXPsyQ8PCqlaAsAuNAjdYC1DyDeY7MOQuoAY10L0CboO0KoAywA6NsFn26QBaUB6hFYAO8VrhEAAfC/APQ1tJXQC9CCXABsKQZAW1qpStgDwG7+kVL8dQBPAnYDQN4cwFgrvFOAfd/Fq23b9IdiHEeZpokWAF41ugKO5u7gN6EQAAAFZL5NAAAAAElFTkSuQmCC)!important;position:absolute;padding:0!important;background-color:#fff;display:flex;justify-content:center;align-items:center}.gd-draw-stamp input{height:30px;outline:#679ffa solid 2px}.gd-draw-stamp .gd-draw-stamp-text{z-index:99999}.gd-draw-stamp .gd-text-menu-context{height:37px;top:180px;padding:0;background-color:#fff;cursor:default;position:absolute;box-shadow:rgba(0,0,0,.52) 0 0 5px}.gd-draw-stamp .gd-text-menu-context ::ng-deep .color-for-text{flex:1;display:flex;align-items:center;justify-content:flex-start}.gd-draw-stamp .gd-text-menu-context .stamp-trash{flex:0 0 37px;margin-right:8px}.gd-draw-stamp .gd-text-menu-context ::ng-deep .first-component ::ng-deep .dropdown-menu{left:8px}::ng-deep .select{color:#3e4e5a!important}::ng-deep gd-drop-down{z-index:999999!important}@media (max-width:1037px){.stamp-body{width:inherit;height:inherit}}']}]}],t.ctorParameters=function(){return[{type:n.AddDynamicComponentService},{type:V},{type:n.WindowService},{type:K},{type:m},{type:U},{type:n.ModalService}]},t.propDecorators={dynamicDirective:[{type:e.ViewChild,args:[n.HostDynamicDirective,{static:!0}]}]},t}();function at(t){return function(){return t.load()}}function st(t){return new n.LoadingMaskInterceptorService(t)}var pt=function(){function t(){d.library.add(g.fas,l.far)}return t.forRoot=function(e){return n.Api.DEFAULT_API_ENDPOINT=e,{ngModule:t}},t.decorators=[{type:e.NgModule,args:[{declarations:[H,q,G,W,Q,X,N,Y,J,Z,et,it,nt,rt],exports:[H,q,G,W,Q,X,N,Y,J,Z,et,it,nt,rt,n.CommonComponentsModule],imports:[i.CommonModule,n.CommonComponentsModule,o.HttpClientModule,c.FontAwesomeModule,u.ClickOutsideModule],providers:[m,n.ConfigService,x,M,L,z,F,V,K,i.DatePipe,j,U,R,{provide:o.HTTP_INTERCEPTORS,useClass:n.ErrorInterceptorService,multi:!0},{provide:e.APP_INITIALIZER,useFactory:at,deps:[x],multi:!0},n.LoadingMaskService,{provide:o.HTTP_INTERCEPTORS,useFactory:st,multi:!0,deps:[n.LoadingMaskService]}],entryComponents:[N,Z]}]}],t.ctorParameters=function(){return[]},t}();t.ActiveCanvasService=V,t.ActiveSignatureService=F,t.CopySignatureService=R,t.DragSignatureService=L,t.RemoveSignatureService=z,t.SelectSignatureService=M,t.SignatureAppComponent=H,t.SignatureConfigService=x,t.SignatureListPanelComponent=q,t.SignatureModule=pt,t.SignatureService=m,t.SignatureTabActivatorService=U,t.SignaturesHolderService=j,t.initializeApp=at,t.setupLoadingInterceptor=st,t.ɵa=G,t.ɵb=W,t.ɵc=Q,t.ɵd=X,t.ɵe=N,t.ɵf=Y,t.ɵg=J,t.ɵh=Z,t.ɵi=K,t.ɵj=et,t.ɵk=it,t.ɵl=nt,t.ɵm=rt,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=groupdocs.examples.angular-signature.umd.min.js.map