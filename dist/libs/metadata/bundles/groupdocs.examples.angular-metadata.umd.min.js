!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/platform-browser"),require("@angular/core"),require("@angular/common"),require("@angular/common/http"),require("@groupdocs.examples.angular/common-components"),require("rxjs"),require("@fortawesome/angular-fontawesome"),require("moment"),require("@angular/forms"),require("ng2-date-picker")):"function"==typeof define&&define.amd?define("@groupdocs.examples.angular/metadata",["exports","@angular/platform-browser","@angular/core","@angular/common","@angular/common/http","@groupdocs.examples.angular/common-components","rxjs","@fortawesome/angular-fontawesome","moment","@angular/forms","ng2-date-picker"],t):t(((e=e||self).groupdocs=e.groupdocs||{},e.groupdocs.examples=e.groupdocs.examples||{},e.groupdocs.examples.angular=e.groupdocs.examples.angular||{},e.groupdocs.examples.angular.metadata={}),e.ng.platformBrowser,e.ng.core,e.ng.common,e.ng.common.http,e.commonComponents,e.rxjs,e.angularFontawesome,e.moment_,e.ng.forms,e.ng2DatePicker)}(this,(function(e,t,o,i,n,r,a,p,s,d,c){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function l(e){var t="function"==typeof Symbol&&e[Symbol.iterator],o=0;return t?t.call(e):{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}}}var u=function(){function e(e,t){this._http=e,this._config=t}return e.prototype.loadFiles=function(e){return this._http.post(this._config.getMetadataApiEndpoint()+r.Api.LOAD_FILE_TREE,{path:e},r.Api.httpOptionsJson)},e.prototype.loadFile=function(e){return this._http.post(this._config.getMetadataApiEndpoint()+r.Api.LOAD_DOCUMENT_DESCRIPTION,e,r.Api.httpOptionsJson)},e.prototype.loadProperties=function(e){return this._http.post(this._config.getMetadataApiEndpoint()+r.Api.LOAD_DOCUMENT_PROPERTIES,e,r.Api.httpOptionsJson)},e.prototype.loadPropertiesNames=function(e){return this._http.post(this._config.getMetadataApiEndpoint()+r.Api.LOAD_DOCUMENT_PROPERTIES_NAMES,e,r.Api.httpOptionsJson)},e.prototype.saveProperty=function(e){return this._http.post(this._config.getMetadataApiEndpoint()+r.Api.SAVE_PROPERTY,e,r.Api.httpOptionsJson)},e.prototype.removeProperty=function(e){return this._http.post(this._config.getMetadataApiEndpoint()+r.Api.REMOVE_PROPERTY,e,r.Api.httpOptionsJson)},e.prototype.cleanMetadata=function(e){return this._http.post(this._config.getMetadataApiEndpoint()+r.Api.CLEAN_METADATA,e,r.Api.httpOptionsJson)},e.prototype.upload=function(e,t,o){var i=new FormData;return i.append("file",e),i.append("rewrite",String(o)),t&&i.append("url",t),this._http.post(this._config.getMetadataApiEndpoint()+r.Api.UPLOAD_DOCUMENTS,i)},e.prototype.loadPage=function(e,t){return this._http.post(this._config.getMetadataApiEndpoint()+r.Api.LOAD_DOCUMENT_PAGE,{guid:e.guid,password:e.password,page:t},r.Api.httpOptionsJson)},e.prototype.getDownloadUrl=function(e){return this._config.getMetadataApiEndpoint()+r.Api.DOWNLOAD_DOCUMENTS+"/?path="+e.guid},e.prototype.exportProperties=function(e){return this._http.post(this._config.getMetadataApiEndpoint()+r.Api.EXPORT_METADATA,e,r.Api.httpOptionsJsonResponseTypeBlob)},e.prototype.loadPrint=function(e){return this._http.post(this._config.getMetadataApiEndpoint()+r.Api.LOAD_PRINT,{guid:e.guid,password:e.password},r.Api.httpOptionsJson)},e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:n.HttpClient},{type:r.ConfigService}]},e.ngInjectableDef=o.ɵɵdefineInjectable({factory:function(){return new e(o.ɵɵinject(n.HttpClient),o.ɵɵinject(r.ConfigService))},token:e,providedIn:"root"}),e}();var g=function(){};var f=function(){};var m,h=function(){function e(e,t){this._http=e,this._config=t,this._metadataConfig=new a.BehaviorSubject(new f),this._updatedConfig=this._metadataConfig.asObservable()}return Object.defineProperty(e.prototype,"updatedConfig",{get:function(){return this._updatedConfig},enumerable:!0,configurable:!0}),e.prototype.load=function(){var e=this;return new Promise((function(t,o){var i=e._config.getConfigEndpoint(r.Api.METADATA_APP);e._http.get(i,r.Api.httpOptionsJson).toPromise().then((function(o){var i=o;e._metadataConfig.next(i),t()})).catch((function(e){o("Could not load metadata config: "+JSON.stringify(e))}))}))},e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:n.HttpClient},{type:r.ConfigService}]},e.ngInjectableDef=o.ɵɵdefineInjectable({factory:function(){return new e(o.ɵɵinject(n.HttpClient),o.ɵɵinject(r.ConfigService))},token:e,providedIn:"root"}),e}();var y={Read:0,Update:1,Remove:2,Add:4,AddOrUpdate:5,Full:7};y[y.Read]="Read",y[y.Update]="Update",y[y.Remove]="Remove",y[y.Add]="Add",y[y.AddOrUpdate]="AddOrUpdate",y[y.Full]="Full";var v={Empty:0,String:1,Boolean:2,DateTime:3,TimeSpan:4,Integer:5,Long:6,Double:7,StringArray:8,ByteArray:9,DoubleArray:10,IntegerArray:11,LongArray:12,Metadata:13,MetadataArray:14,Guid:15,PropertyValueArray:16};v[v.Empty]="Empty",v[v.String]="String",v[v.Boolean]="Boolean",v[v.DateTime]="DateTime",v[v.TimeSpan]="TimeSpan",v[v.Integer]="Integer",v[v.Long]="Long",v[v.Double]="Double",v[v.StringArray]="StringArray",v[v.ByteArray]="ByteArray",v[v.DoubleArray]="DoubleArray",v[v.IntegerArray]="IntegerArray",v[v.LongArray]="LongArray",v[v.Metadata]="Metadata",v[v.MetadataArray]="MetadataArray",v[v.Guid]="Guid",v[v.PropertyValueArray]="PropertyValueArray";var b={Undefined:0,Root:1,Xmp:2,Exif:3,Iptc:4,DublinCore:5,ImageResourceBlock:6,FileFormat:7,DigitalSignature:8,Presentation:9,Spreadsheet:10,WordProcessing:11,Diagram:12,Note:13,ProjectManagement:14,Pdf:15,DocumentStatistics:16,Psd:17,Jpeg2000:18,Dicom:19,Bmp:20,Wav:21,ID3V1:22,ID3V2:23,MpegAudio:24,Lyrics3:25,ApeV2:26,Avi:27,Flv:28,Asf:29,Mov:30,Matroska:31,Zip:32,VCard:33,Epub:34,OpenType:35,Cad:36,Eml:37,Msg:38,Torrent:39};b[b.Undefined]="Undefined",b[b.Root]="Root",b[b.Xmp]="Xmp",b[b.Exif]="Exif",b[b.Iptc]="Iptc",b[b.DublinCore]="DublinCore",b[b.ImageResourceBlock]="ImageResourceBlock",b[b.FileFormat]="FileFormat",b[b.DigitalSignature]="DigitalSignature",b[b.Presentation]="Presentation",b[b.Spreadsheet]="Spreadsheet",b[b.WordProcessing]="WordProcessing",b[b.Diagram]="Diagram",b[b.Note]="Note",b[b.ProjectManagement]="ProjectManagement",b[b.Pdf]="Pdf",b[b.DocumentStatistics]="DocumentStatistics",b[b.Psd]="Psd",b[b.Jpeg2000]="Jpeg2000",b[b.Dicom]="Dicom",b[b.Bmp]="Bmp",b[b.Wav]="Wav",b[b.ID3V1]="ID3V1",b[b.ID3V2]="ID3V2",b[b.MpegAudio]="MpegAudio",b[b.Lyrics3]="Lyrics3",b[b.ApeV2]="ApeV2",b[b.Avi]="Avi",b[b.Flv]="Flv",b[b.Asf]="Asf",b[b.Mov]="Mov",b[b.Matroska]="Matroska",b[b.Zip]="Zip",b[b.VCard]="VCard",b[b.Epub]="Epub",b[b.OpenType]="OpenType",b[b.Cad]="Cad",b[b.Eml]="Eml",b[b.Msg]="Msg",b[b.Torrent]="Torrent";var w=function(){};var P=function(){};var k=function(){};var x=function(){};var A=function(){};var S=((m={})[b.WordProcessing]="Document Properties",m[b.Spreadsheet]="Workbook Properties",m[b.Presentation]="Presentation Properties",m[b.ProjectManagement]="Project Properties",m[b.Diagram]="Diagram Properties",m[b.Note]="Note Properties",m[b.Pdf]="PDF Properties",m[b.FileFormat]="File Format Info",m[b.DocumentStatistics]="Document Statistics",m[b.DublinCore]="Dublin Core Properties",m[b.ImageResourceBlock]="Image Resources",m[b.MpegAudio]="Mpeg Audio Properties",m[b.DigitalSignature]="Digital Signature Properties",m),D={NotePage:"Page",ZipFile:"Archived File",TorrentSharedFilePackage:"Shared File",MovAtom:"Atom",CanonMakerNotePackage:"Canon Makernote",NikonMakerNotePackage:"Nikon Makernote",PanasonicMakerNotePackage:"Panasonic Makernote",SonyMakerNotePackage:"Sony Makernote",MatroskaSegment:"Segment",MatroskaAudioTrack:"Track",MatroskaSubtitleTrack:"Track",MatroskaVideoTrack:"Track",MatroskaTrack:"Track",MatroskaTag:"Tag",MatroskaEbmlHeader:"Header",VCardCard:"Card",AsfCodec:"Codec",AsfBaseStreamProperty:"Stream",AsfAudioStreamProperty:"Stream",AsfVideoStreamProperty:"Stream",AsfMetadataDescriptorCollection:"Descriptors",OpenTypeFont:"Font"},M=function(){function e(e,t,o,i,n,a,p,s,d){this.metadataService=e,this.modalService=t,this.configService=o,this.uploadFilesService=i,this.navigateService=n,this.zoomService=a,this.passwordService=p,this.loadingMaskService=s,this.windowService=d,this.returnUrl=window.location.href,this.title="metadata",this.files=[],this.countPages=0,this.formatDisabled=!0,this.browseFilesModal=r.CommonModals.BrowseFiles,this.previewZoom=100,this.fileWasDropped=!1,this.disabled=!1,this.showSidePanel=!0,this.confirmCleanModalId="confirm-clean",this.confirmSaveModalId="confirm-save"}return e.prototype.ngOnInit=function(){var e=this;this.isDesktop=this.windowService.isDesktop(),this.windowService.onResize.subscribe((function(t){e.isDesktop=e.windowService.isDesktop(),e.refreshZoom()})),this.configService.updatedConfig.subscribe((function(t){e.metadataConfig=t})),this.uploadFilesService.uploadsChange.subscribe((function(t){if(t){var o=void 0;for(o=0;o<t.length;o++)e.metadataService.upload(t.item(o),"",e.metadataConfig.rewrite).subscribe((function(t){e.fileWasDropped?e.selectFile(t.guid,"",""):e.selectDir("")}))}})),this.passwordService.passChange.subscribe((function(t){e.selectFile(e.credentials.guid,t,r.CommonModals.PasswordRequired)})),""!==this.metadataConfig.defaultDocument?(this.isLoading=!0,this.selectFile(this.metadataConfig.defaultDocument,"","")):this.initialFile&&(this.isLoading=!0,this.selectFile(this.initialFile,null,null))},e.prototype.ngAfterViewInit=function(){var e=this;this.loadingMaskService.onLoadingChanged.subscribe((function(t){return e.isLoading=t})),this.refreshZoom()},Object.defineProperty(e.prototype,"rewriteConfig",{get:function(){return!this.metadataConfig||this.metadataConfig.rewrite},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"downloadConfig",{get:function(){return!this.metadataConfig||this.metadataConfig.download},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uploadConfig",{get:function(){return!this.metadataConfig||this.metadataConfig.upload},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browseConfig",{get:function(){return!this.metadataConfig||this.metadataConfig.browse},enumerable:!0,configurable:!0}),e.prototype.openModal=function(e,t){t&&this.formatDisabled||this.modalService.open(e)},e.prototype.selectDir=function(e){var t=this;this.metadataService.loadFiles(e).subscribe((function(e){return t.files=e||[]}))},e.prototype.selectFile=function(e,t,o){var i=this;this.credentials={guid:e,password:t},this.file=null,this.metadataService.loadFile(this.credentials).subscribe((function(e){if(i.file=e,i.formatDisabled=!i.file,e){e.pages&&e.pages[0]&&(i.pageHeight=e.pages[0].height,i.pageWidth=e.pages[0].width,i.options=i.zoomOptions(),i.refreshZoom());var t=e.pages?e.pages.length:0;i.navigateService.countPages=t,i.navigateService.currentPage=1,i.countPages=t,i.loadProperties()}})),o&&this.modalService.close(o),this.clearData()},e.prototype.upload=function(e){var t=this;this.metadataService.upload(null,e,this.rewriteConfig).subscribe((function(){t.selectDir("")}))},e.prototype.fileDropped=function(e){this.fileWasDropped=e},e.prototype.ptToPx=function(e){return 96*e/72},e.prototype.getFitToWidth=function(){var e=this.ptToPx(this.pageWidth),t=this.ptToPx(this.pageHeight),o=e||window.innerWidth;return t>e&&Math.round(o/window.innerWidth)<2?200-Math.round(100*o/window.innerWidth):Math.round(100*window.innerWidth/o)},e.prototype.getFitToHeight=function(){var e=this.ptToPx(this.pageWidth),t=this.ptToPx(this.pageHeight),o=t>e?window.innerHeight-100:window.innerHeight+100,i=t||o;return t>e?Math.round(100*o/i):Math.round(100*i/o)},e.prototype.zoomOptions=function(){var e=this.getFitToWidth(),t=this.getFitToHeight();return this.zoomService.zoomOptions(e,t)},Object.defineProperty(e.prototype,"zoom",{get:function(){return this.previewZoom},set:function(e){this.previewZoom=e,this.zoomService.changeZoom(this.previewZoom)},enumerable:!0,configurable:!0}),e.prototype.refreshZoom=function(){this.zoom=this.windowService.isDesktop()?100:this.getFitToWidth()},e.prototype.downloadFile=function(){this.formatDisabled||window.location.assign(this.metadataService.getDownloadUrl(this.credentials))},e.prototype.exportProperties=function(){var e=this;this.formatDisabled||this.metadataService.exportProperties(this.credentials).subscribe((function(t){return e.saveBlob(t,"ExportedProperties.xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")}))},e.prototype.clearData=function(){var e,t;if(this.file&&this.file.pages)try{for(var o=l(this.file.pages),i=o.next();!i.done;i=o.next()){i.value.data=null}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype.isDisabled=function(){return!this.file||this.disabled},e.prototype.save=function(){var e=this,t=new g;t.guid=this.file.guid,t.password=this.credentials.password,t.packages=this.packages.map((function(e){return{id:e.id,properties:e.properties.filter((function(e){return e.added||e.edited}))}})).filter((function(e){return e.properties.length>0})),t.packages.length>0&&this.metadataService.saveProperty(t).subscribe((function(t){e.loadProperties(),e.disabled=!1,e.modalService.open(r.CommonModals.OperationSuccess)}))},e.prototype.cleanMetadata=function(){var e=this;this.metadataService.cleanMetadata(this.credentials).subscribe((function(){e.loadProperties(),e.disabled=!1,e.modalService.open(r.CommonModals.OperationSuccess)}))},e.prototype.loadProperties=function(){var e=this;this.file&&(this.metadataService.loadProperties(this.credentials).subscribe((function(t){e.packages=t})),this.showSidePanel||(this.showSidePanel=!0))},e.prototype.hideSidePanel=function(e){this.showSidePanel=!this.showSidePanel},e.prototype.removeProperty=function(e){var t=this;if(this.file){var o=new g;o.guid=this.file.guid,o.password=this.credentials.password,o.packages=[{id:e.packageId,properties:[e.property]}],this.metadataService.removeProperty(o).subscribe((function(){t.loadProperties(),t.modalService.open(r.CommonModals.OperationSuccess)}))}},e.prototype.getPackageName=function(e){return e.name in D?e.index>=0?D[e.name].concat(" ",(e.index+1).toString(10)):D[e.name]:e.type in S?S[e.type]:b[e.type].toString()},e.prototype.saveBlob=function(e,t,o){var i=new Blob([e],{type:o});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(i);else{var n=window.URL.createObjectURL(i),r=document.createElement("a");r.href=n,r.download=t,r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),setTimeout((function(){window.URL.revokeObjectURL(n),r.remove()}),100)}},e.decorators=[{type:o.Component,args:[{selector:"gd-metadata",template:'<gd-loading-mask [loadingMask]="isLoading"></gd-loading-mask>\n<div class="wrapper">\n  <div class="row">\n    <div class="column" [ngClass]="{\'document-loaded\': !formatDisabled}">\n      <div class="top-panel">\n        <a class="logo-link" [href]="returnUrl"><gd-logo [logo]="\'metadata\'" icon="clipboard-list"></gd-logo></a>\n        <gd-top-toolbar class="toolbar-panel">\n          <gd-button [icon]="\'folder-open\'" [tooltip]="\'Browse files\'" (click)="openModal(browseFilesModal, false)"\n                    *ngIf="browseConfig" ></gd-button>\n          <gd-button [disabled]="formatDisabled" [icon]="\'trash\'" [tooltip]="\'Clean Metadata\'" (click)="openModal(confirmCleanModalId, true)">\n                    </gd-button>\n          <gd-button [disabled]="formatDisabled" [icon]="\'save\'" [tooltip]="\'Save\'" (click)="openModal(confirmSaveModalId, true)">\n                    </gd-button>\n          <gd-button [hidden] ="isDesktop" [disabled]="formatDisabled" [icon]="\'file-export\'" [tooltip]="\'Attributes\'" (click)="loadProperties()">\n                    </gd-button>\n          <gd-button [disabled]="formatDisabled" [icon]="\'download\'" [tooltip]="\'Download\'"\n                    (click)="downloadFile()" *ngIf="downloadConfig" ></gd-button>\n          <gd-button [disabled]="formatDisabled" [icon]="\'file-excel\'" [tooltip]="\'Export Properties\'"\n                    (click)="exportProperties()" ></gd-button>\n        </gd-top-toolbar>\n      </div>\n      <div class="doc-panel" *ngIf="file" #docPanel>\n        <gd-document class="gd-document" *ngIf="file" [file]="file" [mode]="false" gdScrollable\n                    [preloadPageCount]="metadataConfig?.preloadPageCount" gdRenderPrint [htmlMode]="false"></gd-document>\n      </div>\n    </div>\n    <gd-side-panel *ngIf="file && showSidePanel"\n      (hideSidePanel)="hideSidePanel($event)"\n      (saveInSidePanel)="save()"\n      [closable]="isDesktop ? false : true"\n      [saveable]="isDesktop ? false : true"\n      [title]="\'Metadata\'"\n      [icon]="\'clipboard-list\'">\n      <gd-accordion>\n        <gd-accordion-group *ngFor="let package of packages" [title]="getPackageName(package)" [addDisabled]="false" [addHidden]="false" [properties]="package.properties" [knownProperties]="package.knownProperties" [packageId]="package.id" (removeProperty)="removeProperty($event)"></gd-accordion-group>\n      </gd-accordion>\n    </gd-side-panel>\n  </div>\n  <gd-init-state [icon]="\'clipboard-list\'" [text]="\'Drop file here to upload\'" *ngIf="!file && uploadConfig" (fileDropped)="fileDropped($event)">\n    Click <fa-icon [icon]="[\'fas\',\'folder-open\']"></fa-icon> to open file<br>\n    Or drop file here\n  </gd-init-state>\n  <gd-browse-files-modal (urlForUpload)="upload($event)" [files]="files" (selectedDirectory)="selectDir($event)"\n                         (selectedFileGuid)="selectFile($event, null, browseFilesModal)"\n                         [uploadConfig]="uploadConfig"></gd-browse-files-modal>\n\n  <gd-error-modal></gd-error-modal>\n  <gd-password-required></gd-password-required>\n  <gd-success-modal></gd-success-modal>\n  <gd-confirm-modal [id]="confirmCleanModalId" [text]="\'Are you sure, you want to clean metadata in this file?\'" (confirm)="cleanMetadata()"></gd-confirm-modal>\n  <gd-confirm-modal [id]="confirmSaveModalId" [text]="\'Do you want to save the changes?\'" (confirm)="save()"></gd-confirm-modal>\n  \n</div>\n',styles:["@import url(https://fonts.googleapis.com/css?family=Open+Sans&display=swap);:host *{font-family:'Open Sans',Arial,Helvetica,sans-serif}.wrapper{-webkit-box-align:stretch;align-items:stretch;height:100%;width:100%;position:fixed;top:0;bottom:0;left:0;right:0}.logo-link{color:inherit;text-decoration:inherit}.doc-panel{display:-webkit-box;display:flex;height:calc(100vh - 60px);-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row}.top-panel{display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;width:100%}.toolbar-panel{background-color:#3e4e5a;width:100%}::ng-deep .tools .button{color:#fff!important;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column}::ng-deep .tools .button.inactive{color:#959da5!important}::ng-deep .tools .icon-button{margin:0 0 0 7px!important}.row{display:-webkit-box;display:flex}.column{width:100%;background-color:#e7e7e7}.document-loaded{overflow:hidden}::ng-deep .gd-side-panel-body{background-color:#f4f4f4}::ng-deep .gd-side-panel-wrapper{width:464px!important}::ng-deep .page.excel{overflow:unset!important}@media (max-width:1037px){::ng-deep .tools gd-button:nth-child(1)>.icon-button{margin:0 0 0 10px!important}::ng-deep .tools .icon-button{height:60px;width:60px}::ng-deep .gd-side-panel-wrapper{width:375px!important}}"]}]}],e.ctorParameters=function(){return[{type:u},{type:r.ModalService},{type:h},{type:r.UploadFilesService},{type:r.NavigateService},{type:r.ZoomService},{type:r.PasswordService},{type:r.LoadingMaskService},{type:r.WindowService}]},e.propDecorators={initialFile:[{type:o.Input}],returnUrl:[{type:o.Input}]},e}();var C=function(){function e(){}return e.prototype.ngAfterContentInit=function(){},e.decorators=[{type:o.Component,args:[{selector:"gd-accordion",template:"\n    <ng-content></ng-content>\n",styles:[""]}]}],e}(),I=s,T=function(){function e(e){this.windowService=e,this.opened=!0,this.removeProperty=new o.EventEmitter,this.datePickerConfig={format:"DD-MM-YYYY HH:mm:ss"},this.editableTypes=new Set([v.String,v.Integer,v.Long,v.Double,v.Boolean,v.DateTime])}return e.prototype.ngOnInit=function(){var e=this;this.isDesktop=this.windowService.isDesktop(),this.windowService.onResize.subscribe((function(t){e.isDesktop=e.windowService.isDesktop()})),this.knownPropertyDictionary=this.toDictionary(this.knownProperties),this.updateNotAddedProperties(),this.metadataPropertyType=v},e.prototype.ngAfterViewInit=function(){this.textinput.changes.subscribe((function(e){e.length&&e.first.nativeElement.focus()}))},e.prototype.resetProperties=function(){this.properties.forEach((function(e){e.selected=!1,e.editing=!1}))},e.prototype.toggle=function(e){this.opened=!this.opened},e.prototype.addProperty=function(e){if(e.preventDefault(),e.stopPropagation(),this.resetProperties(),this.isAddAvailable()){var t=new w;t.added=!0,t.editing=!0,t.name="Select property",t.type=1,this.properties.push(t)}},e.prototype.selectProperty=function(e){this.resetProperties(),e.selected=!e.selected},e.prototype.editProperty=function(e){this.isEditable(e)&&(this.resetProperties(),e.editing=!e.editing,e.edited=!0)},e.prototype.delete=function(e){e.preventDefault(),e.stopPropagation();var t=this.properties.filter((function(e){return e.selected}))[0];this.removeProperty.emit({packageId:this.packageId,property:t})},e.prototype.isRemoveAvailable=function(){var e=this;return this.properties&&1===this.properties.filter((function(t){return t.selected&&e.isRemovable(t)})).length},e.prototype.isAddAvailable=function(){return!this.addDisabled&&this.notAddedProperties.length>0},e.prototype.selectPropName=function(e,t){t.type=e.type,t.name=e.name,e.type===v.DateTime?t.value=I().toISOString():t.value="",this.updateNotAddedProperties()},e.prototype.formatValue=function(e){switch(e.type){case v.DateTime:return this.dateToPicker(e.value);default:return e.value}},e.prototype.updateNotAddedProperties=function(){var e=this.toDictionary(this.properties);this.notAddedProperties=this.knownProperties.filter((function(t){return 0!=(t.accessLevel&y.Add)&&!(t.name in e)}))},e.prototype.isEditable=function(e){if(this.editableTypes.has(e.type))return this.hasAccessTo(e,y.Update)},e.prototype.isRemovable=function(e){return this.hasAccessTo(e,y.Remove)},e.prototype.hasAccessTo=function(e,t){return e.name in this.knownPropertyDictionary&&0!=(this.knownPropertyDictionary[e.name].accessLevel&t)},e.prototype.dateToPicker=function(e){return e?I.utc(e).local().format(this.datePickerConfig.format):null},e.prototype.dateFromPicker=function(e,t){if(t){var o=I(t,this.datePickerConfig.format);e.value=o.toISOString()}},e.prototype.toDictionary=function(e){return e.reduce((function(e,t){return e[t.name]=t,e}),{})},e.decorators=[{type:o.Component,args:[{selector:"gd-accordion-group",template:'<div class="accordion-wrapper">\n    <div class="title" (click)="toggle($event)">\n      <fa-icon *ngIf="!opened" class="chevron" [icon]="[\'fas\', \'chevron-down\']"></fa-icon>\n      <fa-icon *ngIf="opened" class="chevron" [icon]="[\'fas\', \'chevron-up\']"></fa-icon>\n      <div class="text">{{title}}</div>\n      <fa-icon class="trash" *ngIf="isRemoveAvailable()" [icon]="[\'fas\', \'trash\']" (click)="delete($event)"></fa-icon>\n      <gd-button class="plus" [icon]="[\'plus\']" [hidden]="addHidden" [disabled]="!isAddAvailable()" (click)="addProperty($event)"></gd-button>\n    </div>\n    <div class="body" [ngClass]="{\'hidden\': !opened}">\n      <div *ngFor="let property of properties" class="property-wrapper">\n          <div *ngIf="!property.added" [ngClass]="{\'selected\': property.selected, \'disabled\': !isEditable(property)}" (click)="selectProperty(property)" class="property-name property-name-simple" title="{{property.name}}">{{property.name}}</div>\n          <gd-select  class="property-name" *ngIf="property.added" id="propertiesNames" [disabled]="false" [options]="notAddedProperties" (selected)="selectPropName($event, property)" [showSelected]="{name : property.name, value : property.name}"></gd-select>\n          <div *ngIf="!property.editing" [ngClass]="{\'selected\': property.selected}" (click)="editProperty(property)" class="property-value" title="{{property.value}}">{{formatValue(property)}}</div>\n          <div *ngIf="property.editing" class="input-wrapper">\n            <input #textinput *ngIf="property.type == metadataPropertyType.String" class="property-value" [(ngModel)]="property.value" />\n            <input *ngIf="property.type == metadataPropertyType.Integer || property.type == metadataPropertyType.Long" type="text" class="property-value" [(ngModel)]="property.value" gdInteger />\n            <input *ngIf="property.type == metadataPropertyType.Double" type="number" class="property-value" [(ngModel)]="property.value" />\n            <input *ngIf="property.type == metadataPropertyType.Boolean" type="checkbox" class="property-value" [(ngModel)]="property.value" />\n            <dp-date-picker *ngIf="property.type == metadataPropertyType.DateTime" [mode]="\'daytime\'" [theme]="\'dp-material dp-main\'" [config]="datePickerConfig" [ngModel]="dateToPicker(property.value)" (ngModelChange)="dateFromPicker(property, $event)" ></dp-date-picker>\n        </div>\n      </div>\n    </div>\n  <div>',styles:[".accordion-wrapper{background-color:#fff}.accordion-wrapper .title{width:100%;cursor:pointer;border-bottom:1px solid #6e6e6e;background-color:#539cf0;color:#f4f4f4;font-weight:700;display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;height:37px;line-height:37px;font-size:13px}.accordion-wrapper .title .text{width:100%}.chevron{padding:0 16px 0 15px}.plus{margin-left:auto}::ng-deep .title .button{color:#fff!important;display:block!important;margin-right:0!important}::ng-deep .title .button.active fa-icon{color:#fff!important}.accordion-wrapper .body.hidden,.trash.hidden{display:none}.property-wrapper{display:-webkit-box;display:flex;height:35px;font-size:12px;border-bottom:1px solid #e7e7e7;line-height:35px}.property-wrapper.disabled{cursor:not-allowed;color:#acacac}.property-name{width:216px;text-transform:uppercase;font-weight:700;padding-left:15px;border-right:1px solid #e7e7e7;text-overflow:ellipsis;word-wrap:break-word}.property-name.disabled{color:#acacac}.property-name ::ng-deep .select{height:35px;line-height:37px;text-align:center;-webkit-box-pack:unset;justify-content:unset;position:relative}.property-name ::ng-deep .select .nav-caret{display:none}.property-name ::ng-deep .select .selected-value{max-width:none;font-size:unset;text-transform:none;font-weight:400}.property-name ::ng-deep .select .dropdown-menu{width:216px;margin-left:-15px;top:36px}.property-name-simple{overflow-x:hidden;word-wrap:normal}.property-value{font-family:'Courier New',Courier,monospace;padding-left:12px;text-overflow:ellipsis;width:216px;white-space:nowrap;overflow:hidden;word-wrap:break-word;display:inline-block}.property-value.desktop-hide{display:none}::ng-deep dp-date-picker.dp-material .dp-picker-input,::ng-deep dp-day-time-calendar *{font-family:'Courier New',Courier,monospace}.input-wrapper input{height:30px;border:0;font-size:12px}.input-wrapper input.hidden{display:none}.input-wrapper input[type=datetime-local]::-webkit-clear-button,.input-wrapper input[type=datetime-local]::-webkit-inner-spin-button{-webkit-appearance:none;display:none}.selected{background-color:#3e4e5a;color:#fff}::ng-deep .default .property-name{color:#acacac}@media (max-width:1037px){.property-value{width:194px!important}.property-name{width:150px!important}.property-value.mobile-hide{display:none}.input-wrapper{width:185px!important}}"]}]}],e.ctorParameters=function(){return[{type:r.WindowService}]},e.propDecorators={knownProperties:[{type:o.Input}],opened:[{type:o.Input}],title:[{type:o.Input}],packageId:[{type:o.Input}],addDisabled:[{type:o.Input}],addHidden:[{type:o.Input}],properties:[{type:o.Input}],removeProperty:[{type:o.Output}],textinput:[{type:o.ViewChildren,args:["textinput"]}]},e}();var E=function(){function e(){this._addingObserver=new a.BehaviorSubject(null),this._addedProperty=this._addingObserver.asObservable()}return Object.defineProperty(e.prototype,"addedProperty",{get:function(){return this._addedProperty},enumerable:!0,configurable:!0}),e.prototype.addProperty=function(e){this._addingObserver.next(e)},e.decorators=[{type:o.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=o.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();var O=function(){function e(e,t){this.ngModel=e,this.element=t,this.specialKeys=["Backspace","Tab","End","Home","ArrowLeft","ArrowRight","Delete"]}return e.prototype.isInteger=function(e){return String(e).match(new RegExp(/^(\-){0,1}\d*$/))},e.prototype.onKeyDown=function(e){if(-1===this.specialKeys.indexOf(e.key)){var t=this.element.nativeElement.value,o=this.element.nativeElement.selectionStart,i=[t.slice(0,o),e.key,t.slice(o)].join("");i&&!this.isInteger(i)&&e.preventDefault()}},e.prototype.ngOnInit=function(){var e=this;this.ngModel.control.valueChanges.subscribe((function(){var t=e.element.nativeElement.value;t&&e.ngModel.control.setValue("-"===t?0:parseInt(t,10),{emitModelToViewChange:!1,emitViewToModelChange:!0,emitEvent:!1})}))},e.decorators=[{type:o.Directive,args:[{selector:"[gdInteger]"}]}],e.ctorParameters=function(){return[{type:d.NgModel},{type:o.ElementRef}]},e.propDecorators={onKeyDown:[{type:o.HostListener,args:["keydown",["$event"]]}]},e}();var F=function(){function e(){this.confirm=new o.EventEmitter,this.cancel=new o.EventEmitter}return e.prototype.onConfirm=function(e){this.cleanUpAndClose(e),this.confirm.emit()},e.prototype.onCancel=function(e){this.cleanUpAndClose(e),this.cancel.emit()},e.prototype.cleanUpAndClose=function(e){e.stopPropagation(),this.buttons.forEach((function(e){return e.onUnhovering()})),this.modal.close()},e.decorators=[{type:o.Component,args:[{selector:"gd-confirm-modal",template:'<gd-modal [id]="id" [title]="\'Confirm action\'">\n    <section id="gd-confirm-section">\n        <div class="gd-confirm-wrap">\n          <span class="gd-confirm-text">{{text}}</span>\n          <div class="gd-confirm-button-wrap">\n            <gd-button id="cancel-button" [icon]="\'times\'" [intent]="\'brand\'" [iconOnly]="false" (click)="onCancel($event)">\n                Cancel\n            </gd-button>\n            <gd-button id="confirm-button" [icon]="\'check\'" [intent]="\'brand\'" [iconOnly]="false" (click)="onConfirm($event)">\n                Confirm\n            </gd-button>\n        </div>\n        </div>\n      </section>\n</gd-modal>',styles:["#gd-confirm-section{width:375px}.gd-confirm-wrap{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;margin:24px}.gd-confirm-wrap ::ng-deep .button{height:37px;width:75px;padding:0;-webkit-box-pack:center;justify-content:center}.gd-confirm-wrap ::ng-deep .button ::ng-deep .text{font-size:10px!important}.gd-confirm-text{color:#000;padding:10px 0 45px;height:20px;font-size:16px}.gd-confirm-button-wrap{height:40px}.gd-confirm-button-wrap gd-button{float:right;padding-left:15px}@media (max-width:1037px){#gd-confirm-section{max-width:375px}}"]}]}],e.propDecorators={id:[{type:o.Input}],text:[{type:o.Input}],confirm:[{type:o.Output}],cancel:[{type:o.Output}],modal:[{type:o.ViewChild,args:[r.ModalComponent,{static:!1}]}],buttons:[{type:o.ViewChildren,args:[r.ButtonComponent]}]},e}();function _(e){return function(){return e.load()}}function R(e){return new r.LoadingMaskInterceptorService(e)}var N=function(){function e(){}return e.forRoot=function(t){return r.Api.DEFAULT_API_ENDPOINT=t,{ngModule:e}},e.decorators=[{type:o.NgModule,args:[{declarations:[M,C,T,O,F],imports:[t.BrowserModule,r.CommonComponentsModule,n.HttpClientModule,p.FontAwesomeModule,d.FormsModule,c.DpDatePickerModule],exports:[M,r.CommonComponentsModule,C,T],providers:[u,E,r.ConfigService,i.DatePipe,h,{provide:n.HTTP_INTERCEPTORS,useClass:r.ErrorInterceptorService,multi:!0},{provide:o.APP_INITIALIZER,useFactory:_,deps:[h],multi:!0},r.LoadingMaskService,{provide:n.HTTP_INTERCEPTORS,useFactory:R,multi:!0,deps:[r.LoadingMaskService]}]}]}],e}();e.AccessLevels=y,e.AccordionService=E,e.ChangedPackageModel=A,e.FilePropertyModel=w,e.KnownPropertyModel=P,e.MetadataAppComponent=M,e.MetadataConfigService=h,e.MetadataFileDescription=g,e.MetadataModule=N,e.MetadataPropertyType=v,e.MetadataService=u,e.MetadataType=b,e.PackageModel=k,e.PackageNameByMetadataType=S,e.PackageNameByOriginalName=D,e.RemovePropertyModel=x,e.initializeApp=_,e.setupLoadingInterceptor=R,e.ɵa=C,e.ɵb=T,e.ɵc=O,e.ɵd=F,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=groupdocs.examples.angular-metadata.umd.min.js.map