<gd-loading-mask [loadingMask]="isLoading"></gd-loading-mask>
<div class="wrapper">
  <div class="row">
    <div class="column" [ngClass]="{'document-loaded': isFileLoaded()}">
      <div class="top-panel">
        <a class="logo-link" [href]="returnUrl">
          <gd-logo [logo]="'parser'" icon="glasses"></gd-logo>
        </a>
        <gd-top-toolbar class="toolbar-panel">
          <gd-button [icon]="'folder-open'" [tooltip]="'Browse files'" (click)="openModal(browseFilesModal, false)"
            *ngIf="browseConfig"></gd-button>

          <gd-button *ngIf="!documentError && document" [icon]="'search-plus'" [tooltip]="'Zoom In'" (click)="zoomIn()"></gd-button>
          <gd-button *ngIf="!documentError && document" [icon]="'search-minus'" [tooltip]="'Zoom Out'" (click)="zoomOut()"></gd-button>
          <gd-button *ngIf="!documentError && document" [icon]="'expand'" [tooltip]="'Add text field'" (click)="addFieldClick()"></gd-button>
          <gd-button *ngIf="!documentError && document" [icon]="'table'" [tooltip]="'Add table'" (click)="addTableClick()"></gd-button>
        </gd-top-toolbar>
      </div>
       <gd-init-state [icon]="'glasses'" [text]="'Drop file here to upload'" *ngIf="documentError || !document" (fileDropped)="fileDropped($event)">
        Click <fa-icon [icon]="['fas','folder-open']"></fa-icon> to open file<br>
        Or drop file here
      </gd-init-state>
      <!-- <gd-preview-status [status]="previewStatus"></gd-preview-status> -->
     <!-- <div class="doc-panel" *ngIf="preview" #docPanel>
        <gd-document class="gd-document" *ngIf="preview" [file]="preview" [mode]="false" gdScrollable
                    [preloadPageCount]="metadataConfig?.preloadPageCount" gdRenderPrint [htmlMode]="false"></gd-document>
      </div> -->
      <!--  -->
      <div class="parser-wrapper" *ngIf="!documentError && document">
        <app-surface [document]="document"></app-surface>
      </div>
    </div>

    <app-side-panel *ngIf="!documentError && document"></app-side-panel>

    <!-- <gd-side-panel *ngIf="isFileLoaded() && showSidePanel"
      (hideSidePanel)="hideSidePanel($event)"
      (saveInSidePanel)="save()"
      [closable]="isDesktop ? false : true"
      [saveable]="isDesktop ? false : true"
      [title]="'Metadata'"
      [icon]="'clipboard-list'">
      <gd-accordion>
        <gd-accordion-group *ngFor="let package of packages" [title]="getPackageName(package)" [addDisabled]="false" [addHidden]="false" [properties]="package.properties" [knownProperties]="package.knownProperties" [packageId]="package.id" (removeProperty)="removeProperty($event)"></gd-accordion-group>
      </gd-accordion>
    </gd-side-panel> -->
  </div>

  <gd-browse-files-modal (urlForUpload)="upload($event)" [files]="files" (selectedDirectory)="selectDir($event)"
    (selectedFileGuid)="selectFile($event, null, browseFilesModal)" [uploadConfig]="uploadConfig">
  </gd-browse-files-modal>

  <gd-error-modal></gd-error-modal>
  <gd-password-required></gd-password-required>
  <gd-success-modal></gd-success-modal>
</div>