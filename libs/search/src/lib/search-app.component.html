<gd-loading-mask [loadingMask]="isLoading"></gd-loading-mask>
<div class="wrapper">
  <div class="top-panel">
    <gd-logo [logo]="'search'" icon="search"></gd-logo>
    <gd-top-toolbar class="toolbar-panel">
      <gd-button [icon]="'arrow-left'"
        [tooltip]="'Go back'"
        (click)="goBack()"
        *ngIf="appState != 'Default'"></gd-button>
      <gd-button [icon]="'folder-plus'"
        [tooltip]="'Add files'"
        (click)="openModal(browseFilesModal)"
        *ngIf="appState == 'Default'"></gd-button>
      <gd-button [icon]="'search'"
        id="open-search-button"
        [tooltip]="'Search'"
        (click)="openSearch()"
        *ngIf="appState == 'Default'"></gd-button>
      <gd-button [icon]="'list'"
        [tooltip]="'Show indexed files'"
        (click)="openIndexedList()"
        *ngIf="appState == 'Default'"></gd-button>
      <gd-button [icon]="'book'"
        [tooltip]="'Edit index dictionaries'"
        (click)="selectDictionary()"
        *ngIf="appState == 'Default'"></gd-button>
      <gd-button [icon]="'info'"
        [tooltip]="'Show index properties'"
        (click)="showIndexProperties()"
        *ngIf="appState == 'Default'"></gd-button>
      <gd-button [icon]="'save'"
        [tooltip]="'Save changes'"
        (click)="pushCommand('save')"
        *ngIf="appState == 'AlphabetDictionary'"></gd-button>
    </gd-top-toolbar>
  </div>

  <div id="main-container" *ngIf="appState == 'Default'">
    <gd-side-panel *ngIf="appState == 'Default' && sidePanelVisible"
      (hideSidePanel)="hideIndexProperties()"
      [icon]="'info'"
      [title]="'Index properties'"
      [saveable]="false"
      [closable]="true">
      <gd-index-properties-panel></gd-index-properties-panel>
    </gd-side-panel>

    <gd-init-state [icon]="'eye'"
      [text]="'Drop file here to upload'"
      *ngIf="appState == 'Default'"
      (fileDropped)="fileDropped($event)">
      Drop files here to add.<br>
      Or click <fa-icon [icon]="['fas','folder-plus']"></fa-icon>&nbsp;<b>Add files</b> button.
    </gd-init-state>
  </div>

  <gd-search-panel *ngIf="appState == 'Search' || appState == 'SearchResult'"
    (searchText)="search($event)"
    (cleared)="clearSearchResult()"></gd-search-panel>

  <gd-search-options-panel *ngIf="appState == 'Search'"></gd-search-options-panel>

  <gd-search-result-summary [searchResult]="searchResult" *ngIf="appState == 'SearchResult'"></gd-search-result-summary>

  <gd-indexed-files-list [files]="indexedFiles" *ngIf="appState == 'IndexedList'"></gd-indexed-files-list>

  <gd-dictionary-list *ngIf="appState == 'DictionaryList'" (dictionarySelected)="onDictionarySelected($event)"></gd-dictionary-list>

  <gd-alias-dictionary *ngIf="appState == 'AliasDictionary'"></gd-alias-dictionary>

  <gd-alphabet-dictionary *ngIf="appState == 'AlphabetDictionary'"></gd-alphabet-dictionary>

  <gd-search-browse-files-modal (urlForUpload)="upload($event)"
    [files]="files"
    (selectedDirectory)="selectDir($event)"
    [uploadConfig]="uploadConfig"
    (selectAll)="selectAllItems($event)"
    (fileDropped)="fileDropped($event, true)"
    (filesAddedToIndex)="loadIndexedFiles($event)"></gd-search-browse-files-modal>

  <gd-error-modal></gd-error-modal>
  <gd-password-required (cancelEvent)="cancel($event)"></gd-password-required>
</div>
