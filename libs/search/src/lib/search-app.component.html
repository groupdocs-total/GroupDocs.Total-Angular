<gd-loading-mask [loadingMask]="isLoading"></gd-loading-mask>
<div class="wrapper">
  <div class="top-panel">
    <a class="return-link" [href]="returnUrl">
      <gd-logo [logo]="'search'" icon="search"></gd-logo>
    </a>
    <gd-top-toolbar class="toolbar-panel">
      <gd-button [icon]="'arrow-left'"
        [tooltip]="'Go back'"
        (click)="goBack()"
        *ngIf="appState != 'Default'"></gd-button>
      <gd-button [icon]="'folder-plus'"
        [tooltip]="'Add files'"
        (click)="openModal(browseFilesModal)"
        *ngIf="appState == 'Default'"></gd-button>
      <gd-button [icon]="'list'"
        [tooltip]="'Show indexed files'"
        (click)="openIndexedList()"
        *ngIf="appState == 'Default'"></gd-button>
      <gd-button [icon]="'book'"
        [tooltip]="'Edit index dictionaries'"
        (click)="openModal('gd-select-dictionary')"
        *ngIf="this.configService.isAdmin && appState == 'Default'"></gd-button>
      <gd-button [icon]="'save'"
        [tooltip]="'Save changes'"
        (click)="pushCommand('save')"
        *ngIf="appState == 'AlphabetDictionary' || appState == 'StopWordDictionary' || appState == 'SynonymDictionary' || appState == 'HomophoneDictionary' || appState == 'SpellingCorrectorDictionary' || appState == 'CharacterReplacementDictionary' || appState == 'PasswordDictionary'"></gd-button>
      <gd-button [icon]="'file-download'"
        [tooltip]="'Get report'"
        (click)="getReport()"
        *ngIf="canGetReport()"></gd-button>
      <gd-button [icon]="'retweet'"
        [tooltip]="'Re-index documents'"
        (click)="requestReindex()"
        *ngIf="canRequestReindex()"></gd-button>

      <div class="separator mobile-hide"
        *ngIf="termNavigation.enabled"></div>
      <gd-button class="mobile-hide"
        [icon]="'angle-double-left'"
        [tooltip]="'First term'"
        (click)="termNavigation.navigateFirst()"
        *ngIf="termNavigation.enabled"></gd-button>
      <gd-button
        [icon]="'angle-left'"
        [tooltip]="'Previous term'"
        (click)="termNavigation.navigatePrevious()"
        *ngIf="termNavigation.enabled"></gd-button>
      <div class="current-page-number"
        *ngIf="termNavigation.enabled">{{termNavigation.current}}/{{termNavigation.total}}</div>
      <gd-button
        [icon]="'angle-right'"
        [tooltip]="'Next term'"
        (click)="termNavigation.navigateNext()"
        *ngIf="termNavigation.enabled"></gd-button>
      <gd-button class="mobile-hide"
        [icon]="'angle-double-right'"
        [tooltip]="'Last term'"
        (click)="termNavigation.navigateLast()"
        *ngIf="termNavigation.enabled"></gd-button>
      <div class="separator mobile-hide"
        *ngIf="currentDocumentService.displayDocument"></div>
      <gd-button class="mobile-hide"
        [icon]="'download'"
        [tooltip]="'Download source file'"
        (click)="currentDocumentService.downloadSourceFile()"
        *ngIf="currentDocumentService.displayDocument"></gd-button>
      <gd-button class="mobile-hide"
        [icon]="'file-download'"
        [tooltip]="'Download extracted text'"
        (click)="currentDocumentService.downloadExtractedText()"
        *ngIf="currentDocumentService.displayDocument"></gd-button>
    </gd-top-toolbar>
  </div>

  <gd-init-state [icon]="'eye'"
    [text]="'Drop file here to upload'"
    *ngIf="appState == 'Default'"
    (fileDropped)="fileDropped($event)">
    Drop files here to add.<br>
    Or click <fa-icon [icon]="['fas','folder-plus']"></fa-icon>&nbsp;<b>Add files</b> button.
  </gd-init-state>

  <gd-search-panel *ngIf="appState == 'Default' || appState == 'SearchResult'"
    (searchText)="search($event)"
    (cleared)="clearSearchResult()">
  </gd-search-panel>

  <div class="extra-info-container"
    *ngIf="appState == 'Default'">
    <gd-search-options-panel *ngIf="appState == 'Default'"></gd-search-options-panel>

    <!-- <gd-index-properties-panel *ngIf="appState == 'Default'"></gd-index-properties-panel> -->
  </div>

  <gd-search-result-summary [searchResult]="searchResult" *ngIf="appState == 'SearchResult'"></gd-search-result-summary>

  <gd-indexed-files-list [files]="indexedFiles" *ngIf="appState == 'IndexedList'"></gd-indexed-files-list>

  <gd-highlight-document *ngIf="highlightDocumentService.visible === true"></gd-highlight-document>

  <gd-document-view *ngIf="documentViewService.visible === true"></gd-document-view>

  <gd-alias-dictionary *ngIf="appState == 'AliasDictionary'"></gd-alias-dictionary>

  <gd-stop-word-dictionary *ngIf="appState == 'StopWordDictionary'"></gd-stop-word-dictionary>

  <gd-alphabet-dictionary *ngIf="appState == 'AlphabetDictionary'"></gd-alphabet-dictionary>

  <gd-synonym-dictionary *ngIf="appState == 'SynonymDictionary'"></gd-synonym-dictionary>

  <gd-homophone-dictionary *ngIf="appState == 'HomophoneDictionary'"></gd-homophone-dictionary>

  <gd-spelling-corrector-dictionary *ngIf="appState == 'SpellingCorrectorDictionary'"></gd-spelling-corrector-dictionary>

  <gd-character-replacement-dictionary *ngIf="appState == 'CharacterReplacementDictionary'"></gd-character-replacement-dictionary>

  <gd-password-dictionary *ngIf="appState == 'PasswordDictionary'"></gd-password-dictionary>

  <gd-status-bar></gd-status-bar>

  <gd-search-browse-files-modal (urlForUpload)="upload($event)"
    [files]="files"
    [folderName]="this.configService.folderName"
    (selectedDirectory)="selectDir($event)"
    [uploadConfig]="uploadConfig"
    (selectAll)="selectAllItems($event)"
    (fileDropped)="fileDropped($event, true)"
    (filesAddedToIndex)="loadIndexedFiles($event)"
    (filesDeleted)="selectDir($event)">
  </gd-search-browse-files-modal>

  <gd-select-dictionary-modal (dictionarySelected)="onDictionarySelected($event)"></gd-select-dictionary-modal>

  <gd-message-modal></gd-message-modal>
  <gd-error-modal></gd-error-modal>
  <gd-password-required (cancelEvent)="cancel($event)"></gd-password-required>
</div>
