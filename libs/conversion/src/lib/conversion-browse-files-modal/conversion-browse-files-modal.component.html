<gd-modal id="gd-browse-files" [title]="'Open document'" (visible)="refresh($event)">
  <section id="gd-browse-section" (dragover)="showUploadFile = true;">
    <div class="gd-dnd-wrap" *ngIf="showUploadFile" gdDnd (opening)="showUploadFile=$event">
      <div class="gd-drag-n-drop-icon">
        <fa-icon [icon]="['fas','cloud-download-alt']" size="5x" aria-hidden="true"></fa-icon>
      </div>
      <h2>Drag &amp; Drop your files here</h2>
    </div>

    <div class="upload-panel" *ngIf="uploadConfig">
      <input id="gd-upload-input" type="file" multiple style="display: none;"
             (change)="handleFileInput($event.target.files)">

      <div class="select-all">
        <input type="checkbox" class="gd-select-all gd-checkbox" [checked]="allItemsSelected()"
               (change)="selectAllItems($event.target.checked);">
      </div>
      <div class="context">
        <div class="context-actions">
          <gd-drop-down>
            <gd-drop-down-toggle>
              <gd-button [icon]="'plus'" [disabled]="!anyItemSelected()" [intent]="'primary'" [iconOnly]="false">
                {{getLabelString()}}
              </gd-button>
            </gd-drop-down-toggle>
            <gd-drop-down-items>
              <gd-drop-down-item (selected)="selectFormat(item, null)" *ngFor="let item of dynamicOptions">
                <fa-icon [icon]="['far', item.icon]"></fa-icon>
                <div class="text">{{item.name}}</div>
                <div *ngIf="item.warning" class="gd-type-warning"
                     title="1 selected file(s) canâ€™t be converted to {{item.name}} format">
                  <fa-icon [icon]="['fas','exclamation-triangle']"></fa-icon>
                </div>
              </gd-drop-down-item>
            </gd-drop-down-items>
          </gd-drop-down>

          <gd-drop-down>
            <gd-drop-down-toggle>
              <gd-button [icon]="'upload'" [intent]="'brand'" [iconOnly]="false">
                Upload file
              </gd-button>
            </gd-drop-down-toggle>
            <gd-drop-down-items>
              <gd-drop-down-item (selected)="selectUpload(item.name)" *ngFor="let item of uploads">
                <fa-icon [icon]="['fas', item.icon]"></fa-icon>
                <div class="text">{{item.name}}</div>
              </gd-drop-down-item>
            </gd-drop-down-items>
          </gd-drop-down>
        </div>
        <div class="context-panel">
          <div class="upload-url" *ngIf="showUploadUrl">
            <input class="url-input" placeholder="http://" #url (keyup.enter)="uploadUrl(url.value)">
            <div class="url-check" (click)="uploadUrl(url.value)">
              <fa-icon [icon]="['fas','check']"></fa-icon>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="gd-modal-filebrowser" class="gd-modal-table">
      <div class="list-files-header">
        <div class="header-name">Document</div>
        <div class="header-size">Size</div>
      </div>
      <div class="list-files-body">
        <div class="go-up" (click)="goUp()">
          <div class="go-up-icon">
            <fa-icon [icon]="['fas','level-up-alt']"></fa-icon>
          </div>
          <div class="go-up-dots">...</div>
        </div>
        <div class="list-files-lines" *ngFor="let file of files" (click)="choose(file);">
          <div class="gd-file-checkbox" [ngClass]="{'empty': file && (file.isDirectory || file.directory)}">
            <input type="checkbox" *ngIf="file && !file.isDirectory && !file.directory" [checked]="file.selected"
                   (change)="selectSingleItem($event.target.checked, file);" class="gd-checkbox gd-checkbox-single">
          </div>
          <div class="file-description">
            <fa-icon [icon]="['fas',getFormatIcon(file)]" [class]="'ng-fa-icon fa-' + getFormatIcon(file)"></fa-icon>
            <div class="file-name-format">
              <div class="file-name" [ngClass]="{'gd-folder-name' : file.isDirectory || file.directory}">{{file?.name}}</div>
              <div class="file-format">{{getFormatName(file)}}</div>
            </div>
          </div>
          <div class="file-size">{{getSize(file?.size)}}</div>
          <div class="file-format-select" [ngClass]="{'empty': file && (file.isDirectory || file.directory)}">
            <gd-drop-down *ngIf="!(file.isDirectory || file.directory)" [placement]="{h:'left',v:'center'}">
              <gd-drop-down-toggle>
                <gd-button [icon]="'plus'">
                </gd-button>
              </gd-drop-down-toggle>
              <gd-drop-down-items>
                <gd-drop-down-item (selected)="selectFormat(item, file)" *ngFor="let item of formatOptions(file.conversionTypes)">
                  <fa-icon [icon]="['far', item.icon]"></fa-icon>
                  <div class="text">{{item.name}}</div>
                </gd-drop-down-item>
              </gd-drop-down-items>
            </gd-drop-down>
          </div>
        </div>
      </div>
    </div>
    <div id="gd-modal-spinner" class="gd-modal-spinner" *ngIf="showSpinner()">
      <fa-icon [icon]="['fas','circle-notch']" [spin]="true"></fa-icon>
      &nbsp;Loading... Please wait.
    </div>
  </section>
</gd-modal>
